{"version":3,"sources":["uni-app:///main.js","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?1e79","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?caa4","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?4771","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?db6a","uni-app:///pages/order-state/dingdan-state.vue","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?893f","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/order-state/dingdan-state.vue?6feb"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","userAddress","zitidianShow","zitidianShowSeller","paymentTypeModal","data","mmpLat","mmpLon","isShowLoading","peiTypeShangjia","peiTypeZiti","peiTypeKuaidi","peiTypeDada","peiTypeShansong","peiTypeDuozitidian","peiTypeEnumObj","orderInfo","isShowCouponModal","ord_id","orderDetail","cancel_order_countdown","showTime","backPage","type","commentFlag","pay","kdStateArr","isLoadKded","kdInfoLogisticCode","kdInfoShipperCode","kdInfoState","kdInfoSuccess","kdInfoTraces","kdInfoReason","orderInfoOrdBh","orderInfoOrdPrice","orderInfoOrdPayPrice","orderInfoAddTime","orderInfoPeisongTime","orderInfoPayTime","orderInfoUserName","orderInfoUserPhone","orderInfoAddress","orderInfoUserTag","orderInfoPayType","orderInfoPeisongPrice","orderInfoStatus","orderInfoQuehuo","orderInfoPostType","orderInfoPostTypeText","thirdPeisongStatusMsg","thirdQiShouName","thirdQiShouTel","goodsList","orderInfoSaleObj","sendEndImg","id","origin","latitude","longitude","target","polyline","pageLoad","preSaleJdt","zitidianName","zitidianImage","zitidianTime","zitidianAddressText","isddzt","loginBoxFlag","isShowPaymentTypeModal","currentPaymentType","orderIsSelectPaymentType","yve","isUseYve","orderType","onLoad","that","qqmapsdk","key","onShow","uni","onUnload","clearInterval","methods","toggleUseYveFn","confirmPaymentBtnClickFn","orderId","storeType","platform","payDataResult","handleFn","icon","title","requestPaymentFn","setPaymentTypeModalIsShow","setDefaultPaymentTypeFn","setPaymentType","regionchangeFn","console","mapPageLoadFn","qiLocationResult","setTimeout","mapTimer","getQiLocationFn","url","result","resFn","msg","setQiLocationFn","lng","lat","mapCtx","markerId","destination","setPolylineFn","fromLng","fromLat","toLng","toLat","polylineDataArrResult","points","color","width","getPolylineDataArrFn","locationOptions","polylineData1","polylineData2","getPolylineDataFn","mode","refreshFn","toShouhou","openThirdPeisongInfoFn","postTypeObj","orderAddress","openkdFn","loading","kdInfo","closeCouponModalFn","getCancelOrderCountdown","setTime","timer","str","getOrderDetailFn","voucher","thirdPeisongObj","name","fn","payFn","Platform","objs","method","showCancel","success","zfbStr","payMentOptions","provider","fail","cancelFn","computed","showPaymentType","zfb","mmpMark","height","iconPath","isShowAddress","calcIsAtRunIng","resultBoolean","calcTracesArr","desc","showAddressInfo","sellerImage","sellerName","sellerTel","sellerOpenTime","sellerAddress","shopAddressObj","markers","zitidianInfo","isRange"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,qBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsI;AACtI;AACiE;AACL;AACsC;;;AAGlG;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,mFAAM;AACR,EAAE,oGAAM;AACR,EAAE,6GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,+LAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxDA;AAAA;AAAA;AAAA;AAAyuB,CAAgB,8vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;AC6U7vB;AACA;AAEA;AACA;AAEA;AAmCA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAMA;;AAEA;AAAA,eACA;EACAC;IACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MAEAC;MAAA;;MAEA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MACA;MACAC;QACAC;QACAC;MACA;MAEA;MACAC;QACAF;QACAC;MACA;MACA;MACAD;MACAC;MAEAE;MAAA;;MAEAC;MAEA;MACAC;MACA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MAAA;;MAEAC;MACAC;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACA;MACAC;IACA;EACA;EACAC;IACA;IACAC;IACAA;IACAA;IACAA;IAEAC;MACAC;IACA;IAKAF;EACA;EACAG;IACA;;IAEA;IACAC;IACAA;MACAJ;IACA;IAEA;MACAA;IACA;IACAI;IACAA;IAEA;MACAJ;MACAA;IACA;MACAA;QACA;UACAA;QACA;QACA;UACAA;QACA;MACA;IACA;IACAA;EACA;EACAK;IACA;IACAC;IACAA;IACA;MACAF;IACA;EACA;EAEAG;IACA;IACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAT;gBAsBAU;gBAAA;gBAAA,OAEA,yBACAV,MACAW,qCACAD,SACAE,UACAZ,uEACAA,cACA;cAAA;gBAPAa;gBASA;kBACAC,qEACA;oBACA;oBACAd;kBACA,6CACA,mBA4HA;kBAEAc;gBACA;kBACAV;oBACAW;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACAb;IACA;IACA;IACAc;MACA;IACA;IACA;IACAC;MACA;IAkBA;IACA;IACAC;MACA;IACA;IAEAC;MACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAvB;gBACAA;;gBAEA;gBACAA;gBACAA;;gBAEA;gBACAA;gBACAA;gBAAA;gBAAA,OAEAA;cAAA;gBAAAwB;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACApB;kBACAW;kBACAC;gBACA;gBAAA,kCACA;cAAA;gBAEA;gBAAA,wBAEAQ;gBAEAC;kBACA;kBACA;gBACA;gBAEAC;kBACA1B;gBACA;gBAEAA;gBAEAsB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAK;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACA3B;oBACA4B;oBACApG;sBACAmD;oBACA;kBACA;gBAAA;kBALAkD;kBAOA;oBACA;sBAAA,oBACAA;sBAEAC;wBACApF;wBACAqF;wBACAF;0BACAhD;0BACAC;wBACA;sBACA;oBACA;sBACAgD;wBACApF;wBACAqF;wBACAF;sBACA;oBACA;kBACA;oBACAC;sBACApF;sBACAqF;sBACAF;oBACA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAhC;gBAAA;gBAAA,OACAA;cAAA;gBAAAwB;gBACA;kBAAA,yBACAA;kBAEAS,yCACAC;kBAEAlC;kBACAA;kBAEAmC;kBACAA;oBACAC;oBACAC;sBACAxD;sBACAC;oBACA;kBACA;kBAEAqD;oBACAtD;oBACAC;kBACA;gBACA;kBACAsB;oBACAW;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAsB;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAtC;gBAAA;gBAAA,OACAA;kBACAuC;kBACAC;kBACAC;kBACAC;gBACA;cAAA;gBALAC;gBAOA;kBACA3C,iBACA;oBACA4C;oBACAC;oBACAC;kBACA,EACA;gBACA;kBACA1C;oBACAW;oBACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA+B;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBACAC;kBAAA;kBAAA,OACAhD;gBAAA;kBAAAiD;kBACA3B;kBAAA,MACA2B;oBAAA;oBAAA;kBAAA;kBACAnB;kBAAA;kBAAA;gBAAA;kBAAA,MAEAmB,iCACAA,kCACAA;oBAAA;oBAAA;kBAAA;kBAEAD;kBAAA;kBAAA,OACAhD;gBAAA;kBAAAkD;kBACA;oBACApB;kBACA;oBACAA;sBACApF;sBACAmF;sBACAE;oBACA;kBACA;kBAAA;kBAAA;gBAAA;kBAEAD;oBACApF;oBACAmF;oBACAE;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAEA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAoB;MACA;MACA;QAAAX;QAAAC;QAAAC;QAAAU;MACA9B;MACA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CAsHA;QAAA;UAAA;QAAA;MAAA;IACA;IACA+B;MACA;MACArD;MACA;MACAA;IACA;IACA;IACAsD;MACA;QACA1B;MACA;IACA;IACA;IACA2B;MACA;MACA;MACA;QACAC;MACA;MACA;QACAA;MACA;MACA;QACAA;MACA;;MAEA;MACA;MACA;MACA;MAEA;QACA7E;MAAA,GACAqB,iCACAwD;QACAC;UACA3E;UACAD;QACA;MAAA,EACA;MACAmB;IACA;IACA;IACA0D;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA1D;gBAAA,KACAA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA,OAEAA;kBACA2D;kBACA/B;kBACApG;oBACAmD;kBACA;gBACA;cAAA;gBANAkD;gBAOA;kBACA;oBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;oBAEA7B;oBACA4D;oBACA5D;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;kBACA;oBACAI;sBACAW;sBACAC;oBACA;kBACA;gBACA;kBACAZ;oBACAW;oBACAC;kBACA;gBACA;gBAEAhB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IACA;IACA6D;MACA;IACA;IAEA;IACAC;MACA;MACA9D;MACAA;IACA;IAEA;IACA+D;MACA;MACAzD;MACA0D;QACAC;QACAA;QAEA;QACA;QAEA;UACAjE;UACA;QACA;QACA;QACAA;MACA;IACA;IAEA;IACAkE;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAlE;gBACAsB;gBAAA;gBAAA,OACAtB;kBACA4B;kBACApG;oBACAmD;kBACA;gBACA;cAAA;gBALAkD;gBAOA;;gBAEA;kBACA;oBACA1F;oBAEA6D;;oBAEAA;;oBAEAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;oBACAA;;oBAEAA;;oBAEAA;;oBAEA;oBACAsB;oBACAA;oBAEA;sBACAtB;sBACAA;sBACAA;sBACAA;oBACA;oBAEAmE;oBACAnE;oBAEAA;oBACAvB;oBAEA;sBACA;wBACA;0BACAA;wBACA;sBACA;sBACA;oBACA;sBACAA;oBACA;oBACAuB;oBAEAA;oBACAA;;oBAEA;AACA;AACA;AACA;oBACA;sBACAoE;sBACA;wBACA;0BACA;0BACApE;wBACA;wBACA;0BACA;0BACAA;wBACA;;wBACA,IACAA,+BACA,uEACAoE,4CACA;0BACA;0BACApE,6BACAoE,gCACAA,2CACA;wBACA;sBACA;oBACA;;oBAEA;AACA;AACA;oBACA;sBACAA;sBAEA9F;sBACAC;sBACA;wBACA;0BACA;0BACAD;0BACAC;wBACA;wBACA;0BACA;0BACAD,8HACA+F;0BACA9F;wBACA;wBACA;0BACA;0BACAD;0BACAC;wBACA;sBACA;sBACAyB;sBACAA;oBACA;oBAEAd;oBAEA;sBACAc;wBACA;0BACAgB;wBACA;sBACA;oBACA;sBACAhB;oBACA;oBAEAsE;kBACA;oBACAlE;sBACAW;sBACAC;oBACA;kBACA;gBACA;kBACAZ;oBACAW;oBACAC;kBACA;gBACA;gBACAhB;gBAEAsB;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAiD;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAvE,eAIA;gBACA;kBACAtD;gBAiBA,gFAsBA,iFAaA;gBACA4E,YACA,QACAtB,4BACA,MACA,QACAA,uBACA,MACA,QACAtD,MACA,MACA,QACA8H,UACA,KACA;gBACA;gBACAC;kBACA/H;kBACA8H;kBACAnI;gBACA;gBACAiF;gBAAA;gBAAA,OACAtB;kBACA0E;kBACA9C;kBACApG;gBACA;cAAA;gBAJAqG;gBAKAP;gBAOA;kBACA;oBACA;sBACA;sBACAtB;wBACAI;0BACAuE;0BAAA;0BACA3D;0BACA4D;4BACA;4BACA5E;4BACAA;0BACA;wBACA;sBACA;oBACA;sBACAI;wBACAW;wBACAC;sBACA;oBACA;kBACA;oBACA,8BAgFA;sBACAZ;wBACAW;wBACAC;sBACA;oBACA;kBACA;oBACA6D;oBAEAC;sBACAC;sBACA5I;sBACAyI;wBACA5E;0BACAI;4BACAuE;4BAAA;4BACA3D;4BACA4D;8BACA;8BACA5E;8BACAA;4BACA;0BACA;wBACA;sBACA;sBACAgF;wBACA;wBACA1D;wBACAlB;0BACAuE;0BAAA;0BACA3D;0BACA4D;4BACA;4BACA;0BAAA;wBAEA;sBACA;oBACA;oBACAtD;oBACAlB;kBACA;gBACA;kBACAA;oBACAW;oBACAC;kBACA;gBACA;gBAEAM;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAwEA;IACA2D;MACA;MACA7E;QACAY;QACA4D;UAAA;YAAA;cAAA;gBAAA;kBAAA;oBACA;sBACA5E;wBACAtD;wBACAkF;sBACA;oBACA;kBAAA;kBAAA;oBAAA;gBAAA;cAAA;YAAA;UAAA;QACA;MACA;IACA;EACA;EAEAsD;IACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACAC;MACA;MACA;QACArK;QACAsK;MACA;MA6BA;IACA;IACAC;MACA;MAEA,QACA;QACA1G;QACAmE;QACAwC;QACAC;QACA;;QAEA1G;QACAC;MACA,GACA;QACAH;QACAmE;QACAwC;QACAC;QACA;;QAEA1G;QACAC;MACA,GAEA;QACAH;QACAmE;QACAwC;QACAC;QACA;;QAEA1G;QACAC;MACA,EACA;IACA;IACA;IACA0G;MAAA;MACA;MACA;MACA;QACA;MACA;MACA;MACA,wFACAtJ,oGACAA,iGACAA,kGACAA,gGACAA,oGACAA,yEACA;MACA;IACA;IACA;AACA;AACA;AACA;IACAuJ;MACA;MACA;MACA;QACA;QACA;UACA,IACAzF,+BACA,+DACAoE,wCACA;YACA;YACAsB;UACA,WACA1F,+BACA,6DACAoE,wCACA;YACA;YACAsB;UACA,WACA1F,+BACA,uEACAoE,8CACAA,2FACA,OACA;YACAsB;UACA;YACAA;UACA;QACA;UACAA;QACA;MACA;QACAA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACA;QACA;UACAxI;QACA;UACAA;QACA;QACA;UACA;YACA;cACA6D;cACA4E;YACA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IAEA;IACA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;QACAtH;QACAC;MACA;IACA;IAEA;IACAsH;MACA;MACA,QACA;QACAzH;QACAmE;QACAwC;QACAC;QACA1G;QACAC;MACA,GACA;QACAH;QACAmE;QACAwC;QACAC;QAEA1G;QACAC;MACA,GACA;QACAH;QACAmE;QACAwC;QACAC;QACA1G;QACAC;MACA,EACA;IACA;IACA;IACAuH;MACA;MACA;QACAjH;QACAkH;QACAjH;QACAC;QACAH;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/7DA;AAAA;AAAA;AAAA;AAAo5C,CAAgB,i3CAAG,EAAC,C;;;;;;;;;;;ACAx6C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/order-state/dingdan-state.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/order-state/dingdan-state.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./dingdan-state.vue?vue&type=template&id=8c05a21e&scoped=true&\"\nvar renderjs\nimport script from \"./dingdan-state.vue?vue&type=script&lang=js&\"\nexport * from \"./dingdan-state.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dingdan-state.vue?vue&type=style&index=0&id=8c05a21e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8c05a21e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/order-state/dingdan-state.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./dingdan-state.vue?vue&type=template&id=8c05a21e&scoped=true&\"","var components\ntry {\n  components = {\n    uniIcons: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-icons/uni-icons\" */ \"@/components/uni-icons/uni-icons.vue\"\n      )\n    },\n    uniSteps: function () {\n      return import(\n        /* webpackChunkName: \"components/uni-steps/uni-steps\" */ \"@/components/uni-steps/uni-steps.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.goodsList, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var m0 = _vm.trimFn(item.tag_name)\n    return {\n      $orig: $orig,\n      m0: m0,\n    }\n  })\n  var f0 = _vm._f(\"filterTransNum\")(_vm.orderInfoOrdPayPrice)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        f0: f0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./dingdan-state.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./dingdan-state.vue?vue&type=script&lang=js&\"","<!-- \r\n\t订单详情页面\r\n -->\r\n<template>\r\n\t<view class=\"page\">\r\n\t\t<loading-css :is-show=\"isShowLoading\"></loading-css>\r\n\r\n\t\t<!-- 订单状态 -->\r\n\t\t<view class=\"cancel-block\">\r\n\t\t\t<view class=\"content-wrap\">\r\n\t\t\t\t<view class=\"cancel-content border-radius20\">\r\n\t\t\t\t\t<view class=\"before\" :style=\"{ background: configInfo.web_site_color }\"></view>\r\n\t\t\t\t\t<view class=\"h3-block\">\r\n\t\t\t\t\t\t<view class=\"h3-1\">{{ orderInfoStatus }}</view>\r\n\t\t\t\t\t\t<view class=\"h3-2\" v-if=\"showTime == '0:0' && orderInfoStatus == '待支付'\">订单已过期</view>\r\n\t\t\t\t\t\t<view class=\"h3-2\" v-if=\"orderInfoStatus == '待支付' && showTime != '0:0'\">\r\n\t\t\t\t\t\t\t剩余支付时间 {{ showTime }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"h4\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"btn-buy border-radius20\"\r\n\t\t\t\t\t\t\t@click=\"cancelFn\"\r\n\t\t\t\t\t\t\tv-if=\"orderInfoStatus == '待支付' && (type == 'dzf' || type == 'all')\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t取消订单\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!--\r\n\t\t\t\t\t\t\t确认支付按钮-不是新版购物车接口下单\r\n\t\t\t\t\t\t-->\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"btn-buy border-radius20\"\r\n\t\t\t\t\t\t\t@click=\"$onceClick(payFn)\"\r\n\t\t\t\t\t\t\tv-if=\"orderInfoStatus == '待支付' && !orderIsSelectPaymentType\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t确认支付\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<!--\r\n\t\t\t\t\t\t\t确认支付按钮-是新版购物车接口下单\r\n\t\t\t\t\t\t-->\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"btn-buy border-radius20\"\r\n\t\t\t\t\t\t\t@click=\"setPaymentTypeModalIsShow(true)\"\r\n\t\t\t\t\t\t\tv-if=\"orderInfoStatus == '待支付' && orderIsSelectPaymentType\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t确认支付\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 展示用户地址组件 -->\r\n\t\t<user-address\r\n\t\t\t:is-show-address=\"isShowAddress\"\r\n\t\t\t:address-is-set=\"true\"\r\n\t\t\t:address-user-name=\"orderInfoUserName\"\r\n\t\t\t:address-user-tel=\"orderInfoUserPhone\"\r\n\t\t\t:address-text=\"orderInfoAddress\"\r\n\t\t\t:address-tag-name=\"orderInfoUserTag\"\r\n\t\t\tpage=\"dingdan-state\"\r\n\t\t></user-address>\r\n\r\n\t\t<!-- 多点自提信息 -->\r\n\t\t<zitidian-show\r\n\t\t\tv-if=\"orderInfoPostType == peiTypeEnumObj[peiTypeDuozitidian]\"\r\n\t\t\t:zitidian-info=\"zitidianInfo\"\r\n\t\t\tpage=\"pages/order-state/dingdan-state\"\r\n\t\t></zitidian-show>\r\n\r\n\t\t<!-- 商家自提信息 -->\r\n\t\t<zitidian-show-seller\r\n\t\t\tv-if=\"orderInfoPostType == peiTypeEnumObj[peiTypeZiti]\"\r\n\t\t\t:seller-image=\"showAddressInfo.sellerImage\"\r\n\t\t\t:seller-name=\"showAddressInfo.sellerName\"\r\n\t\t\t:seller-tel=\"showAddressInfo.sellerTel\"\r\n\t\t\t:seller-open-time=\"showAddressInfo.sellerOpenTime\"\r\n\t\t\t:seller-address=\"showAddressInfo.sellerAddress\"\r\n\t\t></zitidian-show-seller>\r\n\r\n\t\t<!-- 订单的商品信息 -->\r\n\t\t<view class=\"goods-list-block\">\r\n\t\t\t<view class=\"content-wrap\">\r\n\t\t\t\t<view class=\"goods-content\">\r\n\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t<view class=\"h3\">购物清单</view>\r\n\t\t\t\t\t\t<view class=\"h4\" v-if=\"orderInfoPayType == 0\">\r\n\t\t\t\t\t\t\t<!-- 预计送达时间 -->\r\n\t\t\t\t\t\t\t预计送达时间 {{ orderInfoPeisongTime }}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"goods-list\">\r\n\t\t\t\t\t\t<block v-for=\"(item, index) in goodsList\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"item\">\r\n\t\t\t\t\t\t\t\t<view class=\"top-goods-info\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"image-block\"><image :src=\"item.original_img\" mode=\"\"></image></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"goods-description-block\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"goods-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"name-block\">{{ item.goods_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"goods-description-box\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"goods-description\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{ item.spec_name ? item.spec_name : item.goods_remark }}\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"tag-list\" v-if=\"trimFn(item.tag_name)\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"tag-block\">{{ item.tag_name }}</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<!-- 右边的价格 和 购买数量 -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"right-price-num\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"price-block\" v-if=\"orderInfoPayType == '积分兑换'\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{ item.single_price }}积分\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"price-block\" v-else>¥ {{ item.single_price }}</view>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"num\">× {{ item.buy_num }}</view>\r\n\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"item.tui_bh\"\r\n\t\t\t\t\t\t\t\t\t\t\t@click=\"toShouhou(item.tui_bh)\"\r\n\t\t\t\t\t\t\t\t\t\t\t:style=\"{ color: configInfo.web_site_color }\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t售后详情\r\n\t\t\t\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\t\tv-if=\"item.czDiffDesc || item.htDiffDesc\"\r\n\t\t\t\t\t\t\t\t\tclass=\"bottom-diff-price-tips\"\r\n\t\t\t\t\t\t\t\t\t:style=\"{ color: configInfo.web_site_color }\"\r\n\t\t\t\t\t\t\t\t\t@click=\"navigateToFn({ url: '/packageA/kefu/kefu' })\"\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<view style=\"display: inline-block;\">\r\n\t\t\t\t\t\t\t\t\t\t<uni-icons\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"help\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-weight: 100;\"\r\n\t\t\t\t\t\t\t\t\t\t\t:color=\"configInfo.web_site_color\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"14\"\r\n\t\t\t\t\t\t\t\t\t\t></uni-icons>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t{{ item.czDiffDesc ? item.czDiffDesc : '' }}\r\n\t\t\t\t\t\t\t\t\t{{ item.czDiffDesc && item.htDiffDesc ? '、' : '' }}\r\n\t\t\t\t\t\t\t\t\t{{ item.htDiffDesc ? item.htDiffDesc : '' }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"xiaofei\">\r\n\t\t\t\t\t\t<view class=\"peisong\" v-for=\"(item, keys, index) in orderInfoSaleObj\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"text\">{{ keys }}</view>\r\n\t\t\t\t\t\t\t<view class=\"cont\">¥{{ item }}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"goods-content\" style=\"margin-top: 20rpx;\" v-if=\"preSaleJdt.length\">\r\n\t\t\t\t\t<view class=\"steps-block\">\r\n\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t<view class=\"h3\">预售商品付款</view>\r\n\t\t\t\t\t\t\t<view class=\"h4\" v-if=\"orderInfoPayType == 0\">\r\n\t\t\t\t\t\t\t\t<!-- 预计送达时间 -->\r\n\t\t\t\t\t\t\t\t预计送达时间 {{ orderInfoPeisongTime }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<uni-steps\r\n\t\t\t\t\t\t\t:left=\"true\"\r\n\t\t\t\t\t\t\t:options=\"preSaleJdt\"\r\n\t\t\t\t\t\t\tdirection=\"column\"\r\n\t\t\t\t\t\t\t:active=\"preSaleJdt.length\"\r\n\t\t\t\t\t\t></uni-steps>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"zongjia\">\r\n\t\t\t\t\t实付金额:\r\n\t\t\t\t\t<text>¥{{ orderInfoOrdPayPrice | filterTransNum }}</text>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"order-info\">\r\n\t\t\t\t\t<view class=\"line\">\r\n\t\t\t\t\t\t<text>订单编号: {{ orderInfoOrdBh }}</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tclass=\"copy-btn\"\r\n\t\t\t\t\t\t\t@click=\"copyFn(orderInfoOrdBh)\"\r\n\t\t\t\t\t\t\t:style=\"{ color: configInfo.web_site_color }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t复制\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\">\r\n\t\t\t\t\t\t<text>下单时间: {{ orderInfoAddTime }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\" v-if=\"orderInfoPayType\">\r\n\t\t\t\t\t\t<text>支付方式: {{ orderInfoPayType }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"line\">\r\n\t\t\t\t\t\t<text>配送方式: {{ orderInfoPostTypeText }}</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tclass=\"copy-btn\"\r\n\t\t\t\t\t\t\tstyle=\"font-weight: bold; text-decoration: underline;\"\r\n\t\t\t\t\t\t\tv-if=\"orderInfoPostType == 2 && orderDetail.status == '待收货'\"\r\n\t\t\t\t\t\t\t@click=\"openkdFn\"\r\n\t\t\t\t\t\t\t:style=\"{ color: configInfo.web_site_color }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t物流信息\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<block v-if=\"orderInfoPostType == 3 || orderInfoPostType == 4 || orderInfoPostType == 0\">\r\n\t\t\t\t\t\t<view class=\"line\" v-if=\"thirdPeisongStatusMsg\">\r\n\t\t\t\t\t\t\t<text>配送状态: {{ thirdPeisongStatusMsg }}</text>\r\n\t\t\t\t\t\t\t<!--\r\n\t\t\t\t\t\t\t<text class=\"copy-btn\" v-if=\"calcIsAtRunIng\" style=\"font-weight: bold; text-decoration: underline;\" @click=\"openThirdPeisongInfoFn\"\r\n\t\t\t\t\t\t\t :style=\"{ color: configInfo.web_site_color }\">\r\n\t\t\t\t\t\t\t\t查看详情\r\n\t\t\t\t\t\t\t</text>\r\n\t\t\t\t\t\t\t-->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"line\"\r\n\t\t\t\t\t\tv-if=\"sendEndImg\"\r\n\t\t\t\t\t\t@click=\"lookBigImgFn([sendEndImg])\"\r\n\t\t\t\t\t\tstyle=\"justify-content: flex-start;\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<text>送达凭证:</text>\r\n\t\t\t\t\t\t<view class=\"img-box\"><image class=\"image-dom\" :src=\"sendEndImg\"></image></view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"line\" v-if=\"calcIsAtRunIng && thirdQiShouName && thirdQiShouTel\">\r\n\t\t\t\t\t\t<text>联系骑手: {{ thirdQiShouName }}({{ thirdQiShouTel }})</text>\r\n\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\tclass=\"copy-btn\"\r\n\t\t\t\t\t\t\t@click=\"telFn(thirdQiShouTel)\"\r\n\t\t\t\t\t\t\tstyle=\"font-weight: bold;\"\r\n\t\t\t\t\t\t\t:style=\"{ color: configInfo.web_site_color }\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t呼叫骑手\r\n\t\t\t\t\t\t</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"line\" v-if=\"orderInfoQuehuo\">\r\n\t\t\t\t\t\t<text>如遇缺货: {{ orderInfoQuehuo }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"map-wrap\" v-if=\"calcIsAtRunIng\">\r\n\t\t\t<map\r\n\t\t\t\tid=\"dingdan-map\"\r\n\t\t\t\tclass=\"map-dom\"\r\n\t\t\t\t:show-compass=\"true\"\r\n\t\t\t\t:markers=\"markers\"\r\n\t\t\t\t:polyline=\"polyline\"\r\n\t\t\t\t:latitude=\"latitude\"\r\n\t\t\t\t:longitude=\"longitude\"\r\n\t\t\t\t@regionchange=\"regionchangeFn\"\r\n\t\t\t\t:scale=\"11\"\r\n\t\t\t></map>\r\n\t\t</view>\r\n\t\t<!-- 物流信息模态框 -->\r\n\t\t<view :class=\"['couponModal']\" v-if=\"isShowCouponModal\">\r\n\t\t\t<view class=\"top\" @click=\"closeCouponModalFn\"></view>\r\n\t\t\t<view class=\"bottom\">\r\n\t\t\t\t<view class=\"icon-block\" @click=\"closeCouponModalFn\">\r\n\t\t\t\t\t<uni-icons color=\"#bbbdc0\" size=\"20\" type=\"closeempty\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"title-h4\">物流信息</view>\r\n\r\n\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t<view class=\"card-wrap\">\r\n\t\t\t\t\t\t<view class=\"card-block\">\r\n\t\t\t\t\t\t\t<view class=\"state-top-block\">\r\n\t\t\t\t\t\t\t\t<view class=\"state-info\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"h5\">订单状态:</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"h6\">{{ kdInfoSuccess ? kdStateArr[kdInfoState] : kdInfoReason }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"state-info\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"h5\">快递单号:</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"h6\">{{ kdInfoLogisticCode }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"state-info\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"h5\">快递编码:</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"h6\">{{ kdInfoShipperCode }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t<view class=\"Traces-block\" v-if=\"calcTracesArr.length > 0\">\r\n\t\t\t\t\t\t\t\t<!-- 进度条 -->\r\n\t\t\t\t\t\t\t\t<uni-steps\r\n\t\t\t\t\t\t\t\t\t:options=\"calcTracesArr\"\r\n\t\t\t\t\t\t\t\t\tdirection=\"column\"\r\n\t\t\t\t\t\t\t\t\tleft\r\n\t\t\t\t\t\t\t\t\t:active=\"calcTracesArr.length - 1\"\r\n\t\t\t\t\t\t\t\t></uni-steps>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 支付时弹出的选择支付方式模态框 -->\r\n\t\t<payment-type-modal\r\n\t\t\t:orderInfoOrdPayPrice=\"orderInfoOrdPayPrice\"\r\n\t\t\t:isShow=\"isShowPaymentTypeModal\"\r\n\t\t\t:showPaymentType=\"showPaymentType\"\r\n\t\t\t:currentPaymentType=\"currentPaymentType\"\r\n\t\t\t:yve=\"yve\"\r\n\t\t\t:isUseYve=\"isUseYve\"\r\n\t\t\t@setPaymentTypeModalIsShow=\"setPaymentTypeModalIsShow(false)\"\r\n\t\t\t@setPaymentType=\"setPaymentType\"\r\n\t\t\t@toggleUseYveFn=\"toggleUseYveFn\"\r\n\t\t\t@confirmPaymentBtnClickFn=\"confirmPaymentBtnClickFn\"\r\n\t\t></payment-type-modal>\r\n\t\t<!-- 登录框组件 -->\r\n\t\t<login-fn\r\n\t\t\t:is-show-login=\"loginBoxFlag\"\r\n\t\t\t@loginSuccessCallback=\"refreshFn\"\r\n\t\t\t@close=\"closeGlobalLoginFn\"\r\n\t\t\tis-show-exit\r\n\t\t\thide-page\r\n\t\t></login-fn>\r\n\t</view>\r\n</template>\r\n<script>\r\nimport { host } from '@/tools/siteinfo.js';\r\nimport { common, rob, group, integral, preSale, orderTypeEnum } from '@/tools/const.js';\r\n\r\nimport QQMapWX from '@/tools/libs/tx-map-sdk/qqmap-wx-jssdk.min';\r\nimport { checkTypeFn, transNumFn, assertObject, assertArray, assertString, Object2QueryString } from '@/tools/tools';\r\n\r\nimport { getPayDataFn } from '@/pages/order/submit-order-fun/order.js'; // 订单相关方法\r\n\r\n// #ifdef APP-PLUS\r\n\r\nimport {\r\n\t// 当前运行环境 安卓 or 苹果\r\n\tENVANDROID,\r\n\tENVIOS\r\n} from '@/tools/const.js';\r\n\r\nimport amapFile from '@/tools/libs/a-map-sdk/amap-wx.js';\r\nimport { amapKey } from '@/tools/siteinfo.js';\r\nvar myAmapFun;\r\n// #endif\r\n\r\nimport {\r\n\t// ↓↓ 配送方式 ===========================\r\n\tpeiTypeShangjia,\r\n\tpeiTypeZiti,\r\n\tpeiTypeKuaidi,\r\n\tpeiTypeDada,\r\n\tpeiTypeShansong,\r\n\tpeiTypeDuozitidian,\r\n\tpeiTypeEnumObj,\r\n\tpaymentTypeEnum,\r\n\tpayment_zfb,\r\n\tpayment_wx,\r\n\txcx_wx,\r\n\txcx_tt,\r\n\tbrowser_third,\r\n\tbrowser_wx,\r\n\tapp_android,\r\n\tapp_ios\r\n} from '@/tools/const.js';\r\n\r\nimport { oneModel, moreModel, storeType } from '@/pages/order/submit-order-enum.js';\r\n\r\nimport userAddress from '@/pages/order/order-components/user-address.vue'; // 展示用户地址组件\r\nimport zitidianShow from '@/pages/order/order-components/duozitidian/zitidian-show.vue'; // 展示在页面上的自提点\r\n\r\nimport zitidianShowSeller from '@/pages/order/order-components/zitidian-show-seller.vue'; // 展示在页面上的自提点 商家自提类型\r\nimport paymentTypeModal from '@/pages/order-state/order-components/payment-type-modal.vue'; // 支付时弹出的选择支付方式模态框\r\n\r\nlet timer, mapTimer, qqmapsdk;\r\nexport default {\r\n\tcomponents: {\r\n\t\tuserAddress,\r\n\t\tzitidianShow,\r\n\t\tzitidianShowSeller,\r\n\t\tpaymentTypeModal\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmmpLat: 39.908397,\r\n\t\t\tmmpLon: 116.446029,\r\n\r\n\t\t\tisShowLoading: true, // 开屏动画\r\n\r\n\t\t\t// ↓↓ 配送方式 ===========================\r\n\t\t\tpeiTypeShangjia,\r\n\t\t\tpeiTypeZiti,\r\n\t\t\tpeiTypeKuaidi,\r\n\t\t\tpeiTypeDada,\r\n\t\t\tpeiTypeShansong,\r\n\t\t\tpeiTypeDuozitidian,\r\n\t\t\tpeiTypeEnumObj,\r\n\r\n\t\t\torderInfo: {},\r\n\t\t\tisShowCouponModal: false, // 物流模态框\r\n\r\n\t\t\tord_id: null, // 订单编号\r\n\t\t\torderDetail: {}, // 订单信息\r\n\t\t\tcancel_order_countdown: null,\r\n\t\t\tshowTime: '',\r\n\r\n\t\t\tbackPage: '',\r\n\t\t\ttype: '',\r\n\t\t\tcommentFlag: false,\r\n\t\t\tpay: '',\r\n\r\n\t\t\tkdStateArr: ['暂无物流信息', '已揽件', '在途中', '签收', '问题件'],\r\n\t\t\tisLoadKded: false, // 是否加载过 快递相关信息\r\n\r\n\t\t\tkdInfoLogisticCode: '', // 快递单号\r\n\t\t\tkdInfoShipperCode: '', // 快递编码\r\n\t\t\tkdInfoState: '', // 物流状态\r\n\t\t\tkdInfoSuccess: false, // 请求状态\r\n\t\t\tkdInfoTraces: '', // 轨迹信息\r\n\t\t\tkdInfoReason: '', // 错误信息\r\n\r\n\t\t\torderInfoOrdBh: '', // 订单号\r\n\t\t\torderInfoOrdPrice: 0, // 订单金额\r\n\t\t\torderInfoOrdPayPrice: 0, // 实付金额\r\n\t\t\torderInfoAddTime: '', // 订单下单时间\r\n\t\t\torderInfoPeisongTime: '', // 配送时间\r\n\t\t\torderInfoPayTime: '', // 支付时间\r\n\t\t\torderInfoUserName: '', // 收货人姓名\r\n\t\t\torderInfoUserPhone: '', // 收货人手机号\r\n\t\t\torderInfoAddress: '', // 收货地址\r\n\t\t\torderInfoUserTag: '', // 收货地址标签\r\n\t\t\torderInfoPayType: '', // 支付方式\r\n\t\t\torderInfoPeisongPrice: 0, // 配送费\r\n\t\t\torderInfoStatus: '', // 订单状态\r\n\t\t\torderInfoQuehuo: '', // 如遇缺货 提示的文字\r\n\t\t\t/*\r\n\t\t\t\torderInfoPostType 配送方式\r\n\t\t\t\t\t0: 店家配送;\r\n\t\t\t\t\t1: 自提;\r\n\t\t\t\t\t2: 快递;\r\n\t\t\t\t\t3: 达达;\r\n\t\t\t\t\t4: 闪送;\r\n\t\t\t\t\t5: 到点自提;\r\n\t\t\t*/\r\n\t\t\torderInfoPostType: '', // 配送方式 等于2  加一个按钮，查看物流信息  其他第三方配送....\r\n\r\n\t\t\torderInfoPostTypeText: '', // 配送方式 对应的文字展示字符串\r\n\t\t\tthirdPeisongStatusMsg: '', // 第三方 (达达闪送) 配送状态\r\n\r\n\t\t\tthirdQiShouName: '', // 骑手名字\r\n\t\t\tthirdQiShouTel: '', // 骑手电话\r\n\r\n\t\t\tgoodsList: [], // 商品数据\r\n\t\t\torderInfoSaleObj: {}, // 订单优惠钱的信息\r\n\r\n\t\t\tsendEndImg: '', // 送达的凭证图片路径\r\n\r\n\t\t\tid: null,\r\n\t\t\t// 万达坐标(商家位置) 发\r\n\t\t\torigin: {\r\n\t\t\t\tlatitude: 0,\r\n\t\t\t\tlongitude: 0\r\n\t\t\t},\r\n\r\n\t\t\t// 双桥(目标位置) 收\r\n\t\t\ttarget: {\r\n\t\t\t\tlatitude: 0,\r\n\t\t\t\tlongitude: 0\r\n\t\t\t},\r\n\t\t\t// 八里桥(骑手位置)\r\n\t\t\tlatitude: 0,\r\n\t\t\tlongitude: 0,\r\n\r\n\t\t\tpolyline: [], // 地图上 路线线 根据数据 画 在地图是的\r\n\r\n\t\t\tpageLoad: 0,\r\n\r\n\t\t\t// 预售进度条\r\n\t\t\tpreSaleJdt: [],\r\n\t\t\t// 多自提点 信息\r\n\t\t\tzitidianName: '', // 自提点名字\r\n\t\t\tzitidianImage: '', // 自提点预览图\r\n\t\t\tzitidianTime: '', // 自提点营业时间\r\n\t\t\tzitidianAddressText: '', // 自提点地址\r\n\r\n\t\t\tisddzt: false, // 是否是到点自提的订单  true 是到点自提   false 不是到点自提\r\n\r\n\t\t\tloginBoxFlag: false, // 登录框显示隐藏状态\r\n\r\n\t\t\tisShowPaymentTypeModal: false,\r\n\t\t\tcurrentPaymentType: '',\r\n\t\t\torderIsSelectPaymentType: false, // 该订单支付时是否可以弹出选支付方式弹框\r\n\r\n\t\t\tyve: 0, // 余额\r\n\t\t\tisUseYve: false, // 是否使用余额抵扣\r\n\t\t\t// 订单类型\r\n\t\t\torderType: ''\r\n\t\t};\r\n\t},\r\n\tonLoad(options) {\r\n\t\tlet that = this;\r\n\t\tthat.ord_id = options.id;\r\n\t\tthat.backPage = options.backPage;\r\n\t\tthat.type = options.type;\r\n\t\tthat.pay = options.pay;\r\n\r\n\t\tqqmapsdk = new QQMapWX({\r\n\t\t\tkey: that.configInfo.tx_map_key\r\n\t\t});\r\n\t\t// #ifdef APP-PLUS\r\n\t\tmyAmapFun = new amapFile.AMapWX({ key: amapKey });\r\n\t\t// #endif\r\n\r\n\t\tthat.setDefaultPaymentTypeFn();\r\n\t},\r\n\tonShow() {\r\n\t\tlet that = this;\r\n\r\n\t\t// 监听登录框\r\n\t\tuni.$off('setLoginBoxFlag');\r\n\t\tuni.$on('setLoginBoxFlag', loginBoxFlag => {\r\n\t\t\tthat.loginBoxFlag = loginBoxFlag;\r\n\t\t});\r\n\r\n\t\tif (!that.isShowLoading) {\r\n\t\t\tthat.isShowLoading = true;\r\n\t\t}\r\n\t\tuni.setStorageSync('orderZhifuLoadCont', 0);\r\n\t\tuni.setStorageSync('orderZhifuReloadFlag', 0);\r\n\r\n\t\tif (!that.isLogin) {\r\n\t\t\tthat.closeGlobalLoginFn(true);\r\n\t\t\tthat.isShowLoading = false;\r\n\t\t} else {\r\n\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\tif (that.backPage == 'dingdanList' && that.pay && that.pageLoad == 0) {\r\n\t\t\t\t\tthat.payFn();\r\n\t\t\t\t}\r\n\t\t\t\tif (that.calcIsAtRunIng) {\r\n\t\t\t\t\tthat.openThirdPeisongInfoFn();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tthat.pageLoad++;\r\n\t},\r\n\tonUnload() {\r\n\t\tlet that = this;\r\n\t\tclearInterval(timer);\r\n\t\tclearInterval(mapTimer);\r\n\t\tif (that.backPage == 'dingdanList' && !that.commentFlag) {\r\n\t\t\tuni.setStorageSync('refreshBack', 1);\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t// 切换抵扣余额\r\n\t\ttoggleUseYveFn(e) {\r\n\t\t\tthis.isUseYve = e;\r\n\t\t},\r\n\t\t// 调起客户端支付\r\n\t\tasync confirmPaymentBtnClickFn() {\r\n\t\t\tlet that = this;\r\n\r\n\t\t\tlet platform;\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tplatform = xcx_wx;\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\tplatform = browser_wx;\r\n\t\t\t} else {\r\n\t\t\t\tplatform = browser_third;\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (that.appenv == ENVANDROID) {\r\n\t\t\t\tplatform = app_android;\r\n\t\t\t} else if (that.appenv == ENVIOS) {\r\n\t\t\t\tplatform = app_ios;\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\r\n\t\t\tlet orderId = that.ord_id;\r\n\r\n\t\t\tlet payDataResult = await getPayDataFn(\r\n\t\t\t\tthat,\r\n\t\t\t\tstoreType.oneModel,\r\n\t\t\t\torderId,\r\n\t\t\t\tplatform,\r\n\t\t\t\tthat.currentPaymentType ? that.currentPaymentType : payment_wx,\r\n\t\t\t\tthat.isUseYve\r\n\t\t\t);\r\n\r\n\t\t\tif (payDataResult.type == 'success') {\r\n\t\t\t\tlet handleFn = {\r\n\t\t\t\t\t[2099]() {\r\n\t\t\t\t\t\t// 2099 是余额支付成功 直接跳转订单页面\r\n\t\t\t\t\t\tthat.refreshFn();\r\n\t\t\t\t\t},\r\n\t\t\t\t\t[200]() {\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t// 200 拉起客户端支付\r\n\t\t\t\t\t\tlet payMentOptions = {\r\n\t\t\t\t\t\t\t...payDataResult.result,\r\n\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\torderInfo: payDataResult.result,\r\n\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 成功', e);\r\n\t\t\t\t\t\t\t\tthat.refreshFn();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 失败', e);\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\ttitle: '订单未支付,是否继续支付',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthat.setPaymentTypeModalIsShow(false);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t\t// 200 拉起客户端支付\r\n\t\t\t\t\t\t// 微信支付\r\n\t\t\t\t\t\tif (payment_wx == that.currentPaymentType) {\r\n\t\t\t\t\t\t\tlet payMentOptions = {\r\n\t\t\t\t\t\t\t\t...payDataResult.result,\r\n\t\t\t\t\t\t\t\tprovider: 'wxpay',\r\n\t\t\t\t\t\t\t\torderInfo: payDataResult.result,\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 成功', e);\r\n\t\t\t\t\t\t\t\t\tthat.refreshFn();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 失败', e);\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '订单未支付,是否继续支付',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setPaymentTypeModalIsShow(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconsole.log('app微信支付 uni.requestPayment 参数', payMentOptions);\r\n\t\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t} else if (payment_zfb == that.currentPaymentType) {\r\n\t\t\t\t\t\t\t// 支付宝支付\r\n\t\t\t\t\t\t\tlet payMentOptions = {\r\n\t\t\t\t\t\t\t\torderInfo: payDataResult.result,\r\n\t\t\t\t\t\t\t\tprovider: 'alipay',\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 成功', e);\r\n\t\t\t\t\t\t\t\t\tthat.refreshFn();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('uni.requestPayment 失败', e);\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '订单未支付,是否继续支付',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthat.setPaymentTypeModalIsShow(false);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tconsole.log('app支付宝支付 uni.requestPayment 参数', payMentOptions);\r\n\t\t\t\t\t\t\tthat.requestPaymentFn(payMentOptions);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef H5\r\n\t\t\t\t\t\t// 200 拉起客户端支付\r\n\r\n\t\t\t\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\t\t\t\t// 公众号支付\r\n\t\t\t\t\t\t\tfunction paymentFn(opt) {\r\n\t\t\t\t\t\t\t\tWeixinJSBridge.invoke('getBrandWCPayRequest', opt, function(res) {\r\n\t\t\t\t\t\t\t\t\tconsole.log('jweixinModule.invoke 结果', res);\r\n\t\t\t\t\t\t\t\t\tif (res.err_msg == 'get_brand_wcpay_request:ok') {\r\n\t\t\t\t\t\t\t\t\t\tthat.refreshFn();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '订单未支付,是否继续支付',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpaymentFn(opt);\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.setPaymentTypeModalIsShow(false);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log('公众号支付参数', payDataResult.result);\r\n\t\t\t\t\t\t\tpaymentFn(payDataResult.result);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 普通浏览器支付\r\n\t\t\t\t\t\t\tlet redirectUrl = encodeURIComponent(`${host}/h5/#/pages/my/dingdan/index?act=0`);\r\n\t\t\t\t\t\t\tlet url = `${payDataResult.result}&redirect_url=${redirectUrl}`;\r\n\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\tlocation.href = url;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.navigateToFn({\r\n\t\t\t\t\t\t\t\tisTab: true,\r\n\t\t\t\t\t\t\t\turl: '/pages/my/my'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\thandleFn[payDataResult.code]();\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: payDataResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 拉起客户端支付\r\n\t\trequestPaymentFn(opt) {\r\n\t\t\tuni.requestPayment(opt);\r\n\t\t},\r\n\t\t// 设置支付方式模态框显示隐藏状态\r\n\t\tsetPaymentTypeModalIsShow(flag) {\r\n\t\t\tthis.isShowPaymentTypeModal = flag;\r\n\t\t},\r\n\t\t// 进入页面后设置默认的支付方式\r\n\t\tsetDefaultPaymentTypeFn() {\r\n\t\t\tlet that = this;\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tif (that.showPaymentType.wx) {\r\n\t\t\t\tthat.setPaymentType(payment_wx);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\tif (that.showPaymentType.wx) {\r\n\t\t\t\tthat.setPaymentType(payment_wx);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (that.showPaymentType.wx) {\r\n\t\t\t\tthat.setPaymentType(payment_wx);\r\n\t\t\t} else if (that.showPaymentType.zfb) {\r\n\t\t\t\tthat.setPaymentType(payment_zfb);\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\t// 设置支付方式\r\n\t\tsetPaymentType(type) {\r\n\t\t\tthis.currentPaymentType = type;\r\n\t\t},\r\n\r\n\t\tregionchangeFn(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\t// console.log(e.detail.scale);\r\n\t\t},\r\n\t\t// 第三方地图页面 load 加载的函数\r\n\t\tasync mapPageLoadFn(thirdPeisongInfoObj) {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.id = thirdPeisongInfoObj.id; // 订单id\r\n\r\n\t\t\t// 赋值商家地址\r\n\t\t\tthat.origin.latitude = that.shopAddressObj.latitude - 0;\r\n\t\t\tthat.origin.longitude = that.shopAddressObj.longitude - 0;\r\n\r\n\t\t\t// 赋值订单地址\r\n\t\t\tthat.target.latitude = thirdPeisongInfoObj.orderAddress.latitude - 0;\r\n\t\t\tthat.target.longitude = thirdPeisongInfoObj.orderAddress.longitude - 0;\r\n\r\n\t\t\tlet qiLocationResult = await that.getQiLocationFn();\r\n\t\t\tif (qiLocationResult.type == 'error') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: qiLocationResult.msg\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 八里桥(骑手位置)\r\n\r\n\t\t\tlet { latitude, longitude } = qiLocationResult.result;\r\n\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis.latitude = latitude - 0;\r\n\t\t\t\tthis.longitude = longitude - 0;\r\n\t\t\t});\r\n\r\n\t\t\tmapTimer = setInterval(() => {\r\n\t\t\t\tthat.setQiLocationFn();\r\n\t\t\t}, 1000 * 10);\r\n\r\n\t\t\tthat.setPolylineFn();\r\n\r\n\t\t\tconsole.log(that.markers, 'that.markers', '\\n');\r\n\t\t},\r\n\r\n\t\t/*\r\n\t\t\t@description 返回promise对象 里面的数据是骑手的经纬度\r\n\t\t\t@return <Object>\r\n\t\t\t\t{\r\n\t\t\t\t\tlatitude:'',\r\n\t\t\t\t\tlongitude:'',\r\n\t\t\t\t}\r\n\t\t*/\r\n\t\tgetQiLocationFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async (resFn, rejFn) => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: '/api/order/order_detail_show_wz',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: that.id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet { latitude, longitude } = result.data.data;\r\n\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tlatitude,\r\n\t\t\t\t\t\t\t\tlongitude\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: result.data\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 给data里的 markers 里的 骑手(latitude,longitude) 循环赋值\r\n\t\tasync setQiLocationFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet qiLocationResult = await that.getQiLocationFn();\r\n\t\t\tif (qiLocationResult.type == 'success') {\r\n\t\t\t\tlet { latitude, longitude } = qiLocationResult.result;\r\n\r\n\t\t\t\tlet lng = transNumFn(longitude),\r\n\t\t\t\t\tlat = transNumFn(latitude);\r\n\r\n\t\t\t\tthat.latitude = lat;\r\n\t\t\t\tthat.longitude = lng;\r\n\r\n\t\t\t\tlet mapCtx = uni.createMapContext('dingdan-map');\r\n\t\t\t\tmapCtx.translateMarker({\r\n\t\t\t\t\tmarkerId: 2,\r\n\t\t\t\t\tdestination: {\r\n\t\t\t\t\t\tlatitude: lat,\r\n\t\t\t\t\t\tlongitude: lng\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tmapCtx.moveToLocation({\r\n\t\t\t\t\tlatitude: lat,\r\n\t\t\t\t\tlongitude: lng\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: qiLocationResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 设置 polyline 数据\r\n\t\tasync setPolylineFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet polylineDataArrResult = await that.getPolylineDataArrFn({\r\n\t\t\t\tfromLng: that.origin.longitude,\r\n\t\t\t\tfromLat: that.origin.latitude,\r\n\t\t\t\ttoLng: that.target.longitude,\r\n\t\t\t\ttoLat: that.target.latitude\r\n\t\t\t});\r\n\r\n\t\t\tif (polylineDataArrResult.type == 'success') {\r\n\t\t\t\tthat.polyline = [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tpoints: polylineDataArrResult.result,\r\n\t\t\t\t\t\tcolor: '#007afb',\r\n\t\t\t\t\t\twidth: 6\r\n\t\t\t\t\t}\r\n\t\t\t\t];\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: polylineDataArrResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 获取polyline数据\r\n\t\tgetPolylineDataArrFn(locationOptions) {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlocationOptions.mode = 'bicycling';\r\n\t\t\t\tlet polylineData1 = await that.getPolylineDataFn(locationOptions);\r\n\t\t\t\tconsole.log('polylineData1', polylineData1);\r\n\t\t\t\tif (polylineData1.type == 'success') {\r\n\t\t\t\t\tresFn(polylineData1);\r\n\t\t\t\t} else if (\r\n\t\t\t\t\tpolylineData1.type == 'error' &&\r\n\t\t\t\t\tpolylineData1.msg == '起终点距离超长' &&\r\n\t\t\t\t\tpolylineData1.result.status == 373\r\n\t\t\t\t) {\r\n\t\t\t\t\tlocationOptions.mode = 'driving';\r\n\t\t\t\t\tlet polylineData2 = await that.getPolylineDataFn(locationOptions);\r\n\t\t\t\t\tif (polylineData2.type == 'success') {\r\n\t\t\t\t\t\tresFn(polylineData2);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tresult: polylineData2,\r\n\t\t\t\t\t\t\tmsg: polylineData2.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tresult: polylineData1,\r\n\t\t\t\t\t\tmsg: polylineData1.msg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 获取polyline数据 (根据mode获取)\r\n\t\tgetPolylineDataFn(locationOptions) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet { fromLng, fromLat, toLng, toLat, mode } = locationOptions;\r\n\t\t\tconsole.log('locationOptions', locationOptions);\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tlet qqmapsdkResult = qqmapsdk.direction({\r\n\t\t\t\t\tmode: mode ? mode : 'driving',\r\n\t\t\t\t\tfrom: {\r\n\t\t\t\t\t\tlongitude: fromLng,\r\n\t\t\t\t\t\tlatitude: fromLat\r\n\t\t\t\t\t},\r\n\t\t\t\t\tto: {\r\n\t\t\t\t\t\tlongitude: toLng,\r\n\t\t\t\t\t\tlatitude: toLat\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tvar coors = res.result.routes[0].polyline,\r\n\t\t\t\t\t\t\tpl = [];\r\n\t\t\t\t\t\t//坐标解压（返回的点串坐标，通过前向差分进行压缩）\r\n\t\t\t\t\t\tvar kr = 1000000;\r\n\t\t\t\t\t\tfor (var i = 2; i < coors.length; i++) {\r\n\t\t\t\t\t\t\tcoors[i] = Number(coors[i - 2]) + Number(coors[i]) / kr;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//将解压后的坐标放入点串数组pl中\r\n\t\t\t\t\t\tfor (var i = 0; i < coors.length; i += 2) {\r\n\t\t\t\t\t\t\tpl.push({\r\n\t\t\t\t\t\t\t\tlatitude: coors[i],\r\n\t\t\t\t\t\t\t\tlongitude: coors[i + 1]\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tresult: pl,\r\n\t\t\t\t\t\t\tmsg: '获取polyline数据成功'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tresult: e,\r\n\t\t\t\t\t\t\tmsg: e.message\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tlet url = `https://apis.map.qq.com/ws/direction/v1/${mode ? mode : 'driving'}/?`;\r\n\t\t\t\tlet mapOptions = {\r\n\t\t\t\t\tkey: that.configInfo.tx_map_key,\r\n\t\t\t\t\toutput: 'jsonp',\r\n\t\t\t\t\tfrom: `${fromLat},${fromLng}`,\r\n\t\t\t\t\tto: `${toLat},${toLng}`\r\n\t\t\t\t};\r\n\r\n\t\t\t\tlet directionResult = await that.$jsonp(`${url}${Object2QueryString(mapOptions)}`);\r\n\t\t\t\tconsole.log('directionResult', directionResult);\r\n\t\t\t\tif (directionResult.status == 0) {\r\n\t\t\t\t\tvar coors = directionResult.result.routes[0].polyline,\r\n\t\t\t\t\t\tpl = [];\r\n\t\t\t\t\t//坐标解压（返回的点串坐标，通过前向差分进行压缩）\r\n\t\t\t\t\tvar kr = 1000000;\r\n\t\t\t\t\tfor (var i = 2; i < coors.length; i++) {\r\n\t\t\t\t\t\tcoors[i] = Number(coors[i - 2]) + Number(coors[i]) / kr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//将解压后的坐标放入点串数组pl中\r\n\t\t\t\t\tfor (var i = 0; i < coors.length; i += 2) {\r\n\t\t\t\t\t\tpl.push({\r\n\t\t\t\t\t\t\tlatitude: coors[i],\r\n\t\t\t\t\t\t\tlongitude: coors[i + 1]\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\tresult: pl,\r\n\t\t\t\t\t\tmsg: '获取polyline数据成功'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tresult: directionResult,\r\n\t\t\t\t\t\tmsg: directionResult.message\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\r\n\t\t\t\tmyAmapFun.getDrivingRoute({\r\n\t\t\t\t\torigin: `${fromLng},${fromLat}`,\r\n\t\t\t\t\tdestination: `${toLng},${toLat}`,\r\n\t\t\t\t\tsuccess(data) {\r\n\t\t\t\t\t\tvar points = [];\r\n\t\t\t\t\t\tif (data.paths && data.paths[0] && data.paths[0].steps) {\r\n\t\t\t\t\t\t\tvar steps = data.paths[0].steps;\r\n\t\t\t\t\t\t\tfor (var i = 0; i < steps.length; i++) {\r\n\t\t\t\t\t\t\t\tvar poLen = steps[i].polyline.split(';');\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < poLen.length; j++) {\r\n\t\t\t\t\t\t\t\t\tpoints.push({\r\n\t\t\t\t\t\t\t\t\t\tlongitude: parseFloat(poLen[j].split(',')[0]),\r\n\t\t\t\t\t\t\t\t\t\tlatitude: parseFloat(poLen[j].split(',')[1])\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tresult: points,\r\n\t\t\t\t\t\t\tmsg: '获取polyline数据成功'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tresult: e,\r\n\t\t\t\t\t\t\tmsg: '获取polyline数据失败'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// #endif\r\n\t\t\t});\r\n\t\t},\r\n\t\trefreshFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.setPaymentTypeModalIsShow(false); // 隐藏支付框\r\n\t\t\t// 刷新页面\r\n\t\t\tthat.getOrderDetailFn();\r\n\t\t},\r\n\t\t// 跳转到售后详情里\r\n\t\ttoShouhou(tui_bh) {\r\n\t\t\tthis.navigateToFn({\r\n\t\t\t\turl: `/pages/my/shouhou/tuikuan?id=${tui_bh}`\r\n\t\t\t});\r\n\t\t},\r\n\t\t// @description 跳转页面 查看第三方配送 信息\r\n\t\topenThirdPeisongInfoFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet postTypeObj = {};\r\n\t\t\tif (that.orderInfoPostType == 3) {\r\n\t\t\t\tpostTypeObj.orderInfoPostType = 3;\r\n\t\t\t}\r\n\t\t\tif (that.orderInfoPostType == 4) {\r\n\t\t\t\tpostTypeObj.orderInfoPostType = 4;\r\n\t\t\t}\r\n\t\t\tif (that.orderInfoPostType == 0) {\r\n\t\t\t\tpostTypeObj.orderInfoPostType = 0;\r\n\t\t\t}\r\n\r\n\t\t\t// 处理 赋值在订单的收货地址信息\r\n\t\t\tlet orderAddress = that.orderDetail.address_jingweidu;\r\n\t\t\tlet longitude = orderAddress.split(',')[0];\r\n\t\t\tlet latitude = orderAddress.split(',')[1];\r\n\r\n\t\t\tlet thirdPeisongInfoObj = {\r\n\t\t\t\tid: that.ord_id,\r\n\t\t\t\t...that.orderDetail.third_peisong,\r\n\t\t\t\t...postTypeObj,\r\n\t\t\t\torderAddress: {\r\n\t\t\t\t\tlongitude,\r\n\t\t\t\t\tlatitude\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthat.mapPageLoadFn(thirdPeisongInfoObj);\r\n\t\t},\r\n\t\t// 打开物流信息\r\n\t\tasync openkdFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tif (that.isLoadKded) {\r\n\t\t\t\tthat.isShowCouponModal = true;\r\n\t\t\t} else {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\tloading: true,\r\n\t\t\t\t\turl: '/api/order/show_kd',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: that.orderDetail.id\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\tresult.data.data.Traces = [{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【浙江省金华市义乌市新后傅公司】 已打包\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-18 22:07:15\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【浙江省金华市义乌市新后傅】 已发出 下一站 【义乌转运中心公司】\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 00:51:49\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【浙江省金华市义乌市新后傅公司】 已收件 取件人: 陆小乖 (15267349749)\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 01:13:41\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【义乌转运中心公司】 已收入\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 01:40:40\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【义乌转运中心】 已发出 下一站 【北京转运中心公司】\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 02:02:20\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【杭州转运中心公司】 已收入\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 19:07:18\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【杭州转运中心】 已发出 下一站 【北京转运中心公司】\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-19 19:28:01\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【北京转运中心公司】 已收入\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-20 10:12:43\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【北京转运中心】 已发出 下一站 【北京市通州区富豪公司】\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-20 10:40:45\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【北京市通州区富豪公司】 已收入\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-20 14:54:18\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"【北京市通州区富豪公司】 派件中  派件人: 张建伟 电话 18521854327  如有疑问，请联系：010-53713918\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-20 14:56:08\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\"AcceptStation\": \"客户签收人: 车棚超市 已签收  感谢使用圆通速递，期待再次为您服务 如有疑问请联系：18521854327，投诉电话：010-53713918\",\r\n\t\t\t\t\t\t\t\t\"AcceptTime\": \"2020-06-20 17:37:32\"\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tthat.isLoadKded = true;\r\n\t\t\t\t\t\tlet kdInfo = result.data.data;\r\n\t\t\t\t\t\tthat.kdInfoLogisticCode = kdInfo.LogisticCode; // 快递单号\r\n\t\t\t\t\t\tthat.kdInfoShipperCode = kdInfo.ShipperCode; // 快递编码\r\n\t\t\t\t\t\tthat.kdInfoState = kdInfo.State; // 物流状态\r\n\t\t\t\t\t\tthat.kdInfoSuccess = kdInfo.Success; // 请求状态\r\n\t\t\t\t\t\tthat.kdInfoTraces = kdInfo.Traces; // 轨迹信息\r\n\t\t\t\t\t\tthat.kdInfoReason = kdInfo.Reason; // 错误信息\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthat.isShowCouponModal = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 关闭模态框 (点空白处关闭)\r\n\t\tcloseCouponModalFn() {\r\n\t\t\tthis.isShowCouponModal = false;\r\n\t\t},\r\n\r\n\t\t// 获取剩余支付时间\r\n\t\tgetCancelOrderCountdown() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.cancel_order_countdown = that.$store.state.configInfo.cancel_order_countdown;\r\n\t\t\tthat.setTime(that.orderInfoAddTime, that.cancel_order_countdown);\r\n\t\t},\r\n\r\n\t\t// 给变量不停地设置 当前距离结束的秒数\r\n\t\tsetTime(str, num) {\r\n\t\t\tlet that = this;\r\n\t\t\tclearInterval(timer);\r\n\t\t\ttimer = setInterval(() => {\r\n\t\t\t\tstr = str + '';\r\n\t\t\t\tstr = str.replace(/-/g, '/');\r\n\r\n\t\t\t\tlet createTime = new Date(str).getTime();\r\n\t\t\t\tlet newTime = new Date().getTime();\r\n\r\n\t\t\t\tif (createTime + num * 60 * 1000 <= newTime) {\r\n\t\t\t\t\tthat.showTime = `0:0`;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet showTime = Math.floor((createTime + num * 60 * 1000 - newTime) / 1000);\r\n\t\t\t\tthat.showTime = `${Math.floor(showTime / 60)}:${Math.floor(showTime % 60)}`;\r\n\t\t\t}, 500);\r\n\t\t},\r\n\r\n\t\t// 获取当前订单信息\r\n\t\tasync getOrderDetailFn(fn) {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('获取订单信息接口 /api/order/order_detail 参数 id', that.ord_id, '\\n');\r\n\t\t\tlet result = await that.$request({\r\n\t\t\t\turl: '/api/order/order_detail',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tid: that.ord_id\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// console.log('获取当前订单信息接口 /api/order/order_detail 返回的数据', result, '\\n');\r\n\r\n\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\tlet orderInfo = assertObject(result.data.data);\r\n\r\n\t\t\t\t\tthat.orderInfo = orderInfo; // 返回的所有数据\r\n\r\n\t\t\t\t\tthat.orderType = orderTypeEnum[orderInfo.prom_type]; // 订单类型\r\n\r\n\t\t\t\t\tthat.orderInfoOrdBh = orderInfo.ord_bh; // 订单号\r\n\t\t\t\t\tthat.orderInfoOrdPrice = transNumFn(orderInfo.ord_price); // 订单金额\r\n\t\t\t\t\tthat.orderInfoOrdPayPrice = transNumFn(orderInfo.pay_price); // 实付金额\r\n\t\t\t\t\tthat.orderInfoAddTime = orderInfo.add_time; // 订单下单时间\r\n\t\t\t\t\tthat.orderInfoPeisongTime = orderInfo.peisong_time; // 配送时间\r\n\t\t\t\t\tthat.orderInfoPayTime = orderInfo.pay_time; // 支付时间\r\n\t\t\t\t\tthat.orderInfoUserName = orderInfo.user_name; // 收货人姓名\r\n\t\t\t\t\tthat.orderInfoUserPhone = orderInfo.user_phone; // 收货人手机号\r\n\t\t\t\t\tthat.orderInfoAddress = orderInfo.address; // 收货地址\r\n\t\t\t\t\tthat.orderInfoUserTag = orderInfo.user_tag; // 收货地址标签\r\n\t\t\t\t\tthat.orderInfoPayType = orderInfo.pay_type; // 支付方式\r\n\t\t\t\t\tthat.orderInfoPeisongPrice = transNumFn(orderInfo.peisong_price); // 配送费\r\n\t\t\t\t\tthat.orderInfoStatus = orderInfo.status; // 订单状态\r\n\t\t\t\t\tthat.orderInfoQuehuo = orderInfo.quehuo; // 如遇缺货 提示的文字\r\n\t\t\t\t\tthat.orderInfoPostType = orderInfo.post_type; // 配送方式 等于2  加一个按钮，查看物流信息  其他第三方配送....\r\n\t\t\t\t\tthat.orderInfoPostTypeText = orderInfo.post_type_text; // 配送方式 文字展示\r\n\t\t\t\t\tthat.orderInfoBalancePrice = transNumFn(orderInfo.balance_price); // 余额抵扣的金额\r\n\r\n\t\t\t\t\tthat.yve = transNumFn(assertObject(orderInfo.user_info).money); // 账户余额\r\n\r\n\t\t\t\t\tthat.orderIsSelectPaymentType = orderInfo.pt_type == 20; // 该订单支付时是否可以弹出选支付方式弹框\r\n\r\n\t\t\t\t\t// that.isddzt = orderInfo.is_ddzt == 1;\r\n\t\t\t\t\tconsole.log('that.orderInfo 订单信息', that.orderInfo);\r\n\t\t\t\t\tconsole.log('that.orderInfoPostType 配送方式', that.orderInfoPostType);\r\n\r\n\t\t\t\t\tif (that.orderInfoPostType == peiTypeEnumObj[peiTypeDuozitidian]) {\r\n\t\t\t\t\t\tthat.zitidianName = orderInfo.ztd_name; // 自提点名字\r\n\t\t\t\t\t\tthat.zitidianImage = orderInfo.ztd_img; // 自提点预览图\r\n\t\t\t\t\t\tthat.zitidianTime = orderInfo.ztd_bh; // 自提点营业时间\r\n\t\t\t\t\t\tthat.zitidianAddressText = orderInfo.address; // 自提点地址\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet voucher = assertArray(orderInfo.voucher); // 送达的凭证图片路径\r\n\t\t\t\t\tthat.sendEndImg = voucher.length > 0 ? voucher[0] : '';\r\n\r\n\t\t\t\t\tthat.goodsList = assertArray(orderInfo.goods);\r\n\t\t\t\t\tlet orderInfoSaleObj = {};\r\n\r\n\t\t\t\t\tif (checkTypeFn(orderInfo.sale) == 'Object' && Object.keys(orderInfo.sale).length > 0) {\r\n\t\t\t\t\t\tfor (let i in orderInfo.sale) {\r\n\t\t\t\t\t\t\tif (i && transNumFn(orderInfo.sale[i]) > 0) {\r\n\t\t\t\t\t\t\t\torderInfoSaleObj[i] = orderInfo.sale[i];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdelete orderInfoSaleObj['实付金额'];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\torderInfoSaleObj = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.orderInfoSaleObj = orderInfoSaleObj;\r\n\r\n\t\t\t\t\tthat.orderDetail = result.data.data;\r\n\t\t\t\t\tthat.getCancelOrderCountdown();\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\t@description 处理 第三方 (达达闪送) 配送状态 文字信息\r\n\t\t\t\t\t\t@return that.thirdPeisongStatusMsg <String> 赋值给这个属性\r\n\t\t\t\t\t*/\r\n\t\t\t\t\tif (that.orderInfoPostType == 3 || that.orderInfoPostType == 4 || that.orderInfoPostType == 0) {\r\n\t\t\t\t\t\tlet thirdPeisongObj = result.data.data.third_peisong;\r\n\t\t\t\t\t\tif (checkTypeFn(thirdPeisongObj) == 'Object' && Object.keys(thirdPeisongObj).length > 0) {\r\n\t\t\t\t\t\t\tif (that.orderInfoPostType == 3 && thirdPeisongObj.status == 'success') {\r\n\t\t\t\t\t\t\t\t// 达达\r\n\t\t\t\t\t\t\t\tthat.thirdPeisongStatusMsg = thirdPeisongObj.result.statusMsg;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (that.orderInfoPostType == 4 && thirdPeisongObj.status == 200) {\r\n\t\t\t\t\t\t\t\t// 闪送\r\n\t\t\t\t\t\t\t\tthat.thirdPeisongStatusMsg = thirdPeisongObj.data.orderStatusDesc; // 第三方 (达达闪送) 配送状态\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tthat.orderInfoPostType == 0 &&\r\n\t\t\t\t\t\t\t\tcheckTypeFn(thirdPeisongObj.statusChangeLog) == 'Array' &&\r\n\t\t\t\t\t\t\t\tthirdPeisongObj.statusChangeLog.length > 0\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t// 平台配送\r\n\t\t\t\t\t\t\t\tthat.thirdPeisongStatusMsg =\r\n\t\t\t\t\t\t\t\t\tthirdPeisongObj.statusChangeLog[\r\n\t\t\t\t\t\t\t\t\t\tthirdPeisongObj.statusChangeLog.length - 1\r\n\t\t\t\t\t\t\t\t\t].orderStatus; // 平台配送 配送状态\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t@description 处理 第三方 (达达闪送) 骑手信息\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\tif (that.orderInfoPostType == 3 || that.orderInfoPostType == 4 || that.orderInfoPostType == 0) {\r\n\t\t\t\t\t\tlet thirdPeisongObj = orderInfo.third_peisong;\r\n\r\n\t\t\t\t\t\tlet thirdQiShouName = ''; // 骑手名字\r\n\t\t\t\t\t\tlet thirdQiShouTel = ''; // 骑手电话\r\n\t\t\t\t\t\tif (checkTypeFn(thirdPeisongObj) == 'Object' && Object.keys(thirdPeisongObj).length > 0) {\r\n\t\t\t\t\t\t\tif (that.orderInfoPostType == 3 && thirdPeisongObj.status == 'success') {\r\n\t\t\t\t\t\t\t\t// 达达\r\n\t\t\t\t\t\t\t\tthirdQiShouName = thirdPeisongObj.result.transporterName;\r\n\t\t\t\t\t\t\t\tthirdQiShouTel = thirdPeisongObj.result.transporterPhone;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (that.orderInfoPostType == 4 && thirdPeisongObj.status == 200) {\r\n\t\t\t\t\t\t\t\t// 闪送\r\n\t\t\t\t\t\t\t\tthirdQiShouName = assertObject(assertObject(assertObject(thirdPeisongObj.data)).courier)\r\n\t\t\t\t\t\t\t\t\t.name;\r\n\t\t\t\t\t\t\t\tthirdQiShouTel = assertObject(assertObject(thirdPeisongObj.data).courier).mobile;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (that.orderInfoPostType == 0) {\r\n\t\t\t\t\t\t\t\t// 平台配送\r\n\t\t\t\t\t\t\t\tthirdQiShouName = that.orderInfo.rider_username;\r\n\t\t\t\t\t\t\t\tthirdQiShouTel = that.orderInfo.rider_mobile;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.thirdQiShouName = thirdQiShouName;\r\n\t\t\t\t\t\tthat.thirdQiShouTel = thirdQiShouTel;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet preSaleJdt = assertArray(orderInfo.preSaleJdt);\r\n\r\n\t\t\t\t\tif (preSaleJdt.length) {\r\n\t\t\t\t\t\tthat.preSaleJdt = preSaleJdt.map(item => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\ttitle: `${item.title} ${item.money}`\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.preSaleJdt = [];\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfn && fn();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthat.isShowLoading = false;\r\n\r\n\t\t\tconsole.log('pi/order/order_detai结果', result);\r\n\t\t},\r\n\t\t// 支付函数\r\n\t\tasync payFn() {\r\n\t\t\tlet that = this,\r\n\t\t\t\ttype,\r\n\t\t\t\tPlatform;\r\n\r\n\t\t\t// 判断是否需要调取微信支付\r\n\t\t\tif (that.orderInfoPayType == '余额支付') {\r\n\t\t\t\ttype = 'balance';\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tPlatform = 'wxMiniProgram';\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tPlatform = 'App';\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\t\t// 公众号微信浏览器\r\n\t\t\t\t\tPlatform = 'wxOfficialAccount';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 非微信浏览器 普通浏览器\r\n\t\t\t\t\tPlatform = 'H5';\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t} else if (that.orderInfoPayType == '微信支付' && that.orderInfoBalancePrice >= 0) {\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\ttype = 'wechat';\r\n\t\t\t\tPlatform = 'wxMiniProgram';\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\ttype = 'wechatApp';\r\n\t\t\t\tPlatform = 'App';\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\t\t// 公众号微信浏览器\r\n\t\t\t\t\ttype = 'wechatOfficialAccount';\r\n\t\t\t\t\tPlatform = 'wxOfficialAccount';\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 非微信浏览器 普通浏览器\r\n\t\t\t\t\ttype = 'wechatH5';\r\n\t\t\t\t\tPlatform = 'H5';\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t} else if (that.orderInfoPayType == '支付宝支付' && that.orderInfoBalancePrice >= 0) {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\ttype = 'alipay';\r\n\t\t\t\tPlatform = 'App';\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tif (!that.globalBrowserIsWx) {\r\n\t\t\t\t\t// 非微信浏览器 普通浏览器\r\n\t\t\t\t\ttype = 'alipayH5';\r\n\t\t\t\t\tPlatform = 'H5';\r\n\t\t\t\t}\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t\tconsole.log(\r\n\t\t\t\t'余额抵扣',\r\n\t\t\t\tthat.orderInfoBalancePrice,\r\n\t\t\t\t'\\n',\r\n\t\t\t\t'支付类型',\r\n\t\t\t\tthat.orderInfoPayType,\r\n\t\t\t\t'\\n',\r\n\t\t\t\t'支付类型',\r\n\t\t\t\ttype,\r\n\t\t\t\t'\\n',\r\n\t\t\t\t'支付平台',\r\n\t\t\t\tPlatform,\r\n\t\t\t\t'\\n'\r\n\t\t\t);\r\n\t\t\t// 去后台拿签名\r\n\t\t\tlet objs = {\r\n\t\t\t\ttype,\r\n\t\t\t\tPlatform,\r\n\t\t\t\tord_id: that.ord_id\r\n\t\t\t};\r\n\t\t\tconsole.log('支付的参数', objs);\r\n\t\t\tlet result = await that.$request({\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\turl: '/api/pay/pay',\r\n\t\t\t\tdata: objs\r\n\t\t\t});\r\n\t\t\tconsole.log('支付的结果', result);\r\n\r\n\t\t\t// #ifdef H5\r\n\t\t\tthat.h5GzhPayFn(result);\r\n\t\t\treturn false;\r\n\t\t\t// #endif\r\n\r\n\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\tif (that.orderInfoPayType == '余额支付') {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\t// 直接提示支付成功\r\n\t\t\t\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\tthat.commentFlag = true;\r\n\t\t\t\t\t\t\t\t\tthat.toBackFn();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (that.orderInfoPayType == '微信支付') {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet payOptions;\r\n\t\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t\t// 前端调 微信支付 付款\r\n\t\t\t\t\t\tpayOptions = JSON.parse(result.data.data);\r\n\r\n\t\t\t\t\t\tuni.requestPayment({\r\n\t\t\t\t\t\t\t...payOptions,\r\n\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\tconsole.log('成功', e);\r\n\r\n\t\t\t\t\t\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t\tthat.commentFlag = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.toBackFn();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\tconsole.log('失败！！！！', e);\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t// that.toBackFn()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t\t// #ifdef APP-PLUS\r\n\r\n\t\t\t\t\t\tpayOptions = result.data.data;\r\n\t\t\t\t\t\tlet providerObj = {\r\n\t\t\t\t\t\t\tprovider: 'wxpay'\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tlet payMentOptions = {\r\n\t\t\t\t\t\t\t...providerObj,\r\n\t\t\t\t\t\t\torderInfo: payOptions,\r\n\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t\tthat.commentFlag = true;\r\n\t\t\t\t\t\t\t\t\t\t\tthat.toBackFn();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tconsole.log('成功', e);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\tconsole.log('失败！！！！', e);\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t// that.toBackFn()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tconsole.log('payMentOptions 对象', payMentOptions);\r\n\t\t\t\t\t\tuni.requestPayment(payMentOptions);\r\n\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (that.orderInfoPayType == '支付宝支付') {\r\n\t\t\t\t\tlet zfbStr = assertString(result.data);\r\n\r\n\t\t\t\t\tlet payMentOptions = {\r\n\t\t\t\t\t\tprovider: 'alipay',\r\n\t\t\t\t\t\torderInfo: zfbStr,\r\n\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\tthat.commentFlag = true;\r\n\t\t\t\t\t\t\t\t\t\tthat.toBackFn();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(e) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\tconsole.log('失败！！！！', e);\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t// that.toBackFn()\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log('payMentOptions 对象', payMentOptions);\r\n\t\t\t\t\tuni.requestPayment(payMentOptions);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log(result, '-------------------');\r\n\t\t},\r\n\t\t// #ifdef H5\r\n\t\th5GzhPayFn(result) {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('公众号支付返回的东西', result);\r\n\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\tlet gzhWxPayOptions = assertObject(result.data.data); // 公众号支付需要的数据\r\n\r\n\t\t\t\t\tgzhWxPayOptions.timeStamp = `${gzhWxPayOptions.timeStamp}`;\r\n\r\n\t\t\t\t\tconsole.log('gzhWxPayOptions 参数', gzhWxPayOptions);\r\n\r\n\t\t\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\t\t\t// 公众号支付\r\n\t\t\t\t\t\tWeixinJSBridge.invoke('getBrandWCPayRequest', gzhWxPayOptions, function(res) {\r\n\t\t\t\t\t\t\tconsole.log('jweixinModule.invoke 结果', res);\r\n\r\n\t\t\t\t\t\t\tif (res.err_msg == 'get_brand_wcpay_request:ok') {\r\n\t\t\t\t\t\t\t\tthat.getOrderDetailFn(() => {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t\t// that.toBackFn()\r\n\t\t\t\t\t\t\t\t\t\t\t// that.getOrderDetailFn()\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\t\t\t\t\ttitle: '支付失败',\r\n\t\t\t\t\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\t\t\t\t\t// that.toBackFn()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 普通浏览器支付\r\n\r\n\t\t\t\t\t\tlet h5wxPayOptions = assertObject(result.data.data); // 公众号支付需要的数据\r\n\r\n\t\t\t\t\t\tlet redirectUrl = encodeURIComponent(\r\n\t\t\t\t\t\t\t`${location.origin}${location.pathname}#/pages/my/dingdan/index?act=0`\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tlet url = `${h5wxPayOptions.mweb_url}&redirect_url=${redirectUrl}`;\r\n\r\n\t\t\t\t\t\tconsole.log(url);\r\n\r\n\t\t\t\t\t\tlocation.href = url;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\r\n\t\t// 取消订单\r\n\t\tcancelFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '取消订单',\r\n\t\t\t\tasync success(e) {\r\n\t\t\t\t\tif (e.confirm) {\r\n\t\t\t\t\t\tthat.navigateToFn({\r\n\t\t\t\t\t\t\ttype: 'redirectTo',\r\n\t\t\t\t\t\t\turl: `/pages/my/dingdan/qvxiao?id=${that.ord_id}&backPage=dingdanList`\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\r\n\tcomputed: {\r\n\t\t/*\r\n\t\t\t@description\r\n\t\t\t\t根据后台开通的支付选项和当前客户端平台类型 判断 页面是否显示 微信支付 和 支付宝支付 选项\r\n\t\t\t@return <Object>\r\n\t\t\t\t{\r\n\t\t\t\t\twx: true,\r\n\t\t\t\t\tzfb: false\r\n\t\t\t\t}\r\n\t\t*/\r\n\t\tshowPaymentType() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet isShow = {\r\n\t\t\t\twx: false,\r\n\t\t\t\tzfb: false\r\n\t\t\t};\r\n\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tif (that.calcWeixinPayMiniprogram) {\r\n\t\t\t\tisShow.wx = true;\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef H5\r\n\t\t\tif (that.globalBrowserIsWx) {\r\n\t\t\t\tif (that.calcWeixinofficialaccount) {\r\n\t\t\t\t\tisShow.wx = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (that.calcWeixinPayH5) {\r\n\t\t\t\t\tisShow.wx = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (that.calcWeixinPayAndroidApp) {\r\n\t\t\t\tisShow.wx = true;\r\n\t\t\t}\r\n\t\t\tif (that.calcZhifubaoPayAndroidApp) {\r\n\t\t\t\tisShow.zfb = true;\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\treturn isShow;\r\n\t\t},\r\n\t\tmmpMark() {\r\n\t\t\tlet that = this;\r\n\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/fa.png',\r\n\t\t\t\t\t// iconPath: 'https://dev.sjwxsc.com/wx-image/global-image/fa.png',\r\n\r\n\t\t\t\t\tlatitude: 39.909185,\r\n\t\t\t\t\tlongitude: 116.397443\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/qi.png',\r\n\t\t\t\t\t// iconPath: 'https://dev.sjwxsc.com/wx-image/global-image/qi.png',\r\n\r\n\t\t\t\t\tlatitude: that.latitude,\r\n\t\t\t\t\tlongitude: that.longitude\r\n\t\t\t\t},\r\n\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 3,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/shou.png',\r\n\t\t\t\t\t// iconPath: 'https://dev.sjwxsc.com/wx-image/global-image/shou.png',\r\n\r\n\t\t\t\t\tlatitude: 39.907836,\r\n\t\t\t\t\tlongitude: 116.498443\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t},\r\n\t\t// 是否显示用户地址\r\n\t\tisShowAddress() {\r\n\t\t\tlet that = this;\r\n\t\t\t// 预售订单 & 只付定金 不显示收货地址\r\n\t\t\tif (that.orderType == preSale && that.orderInfoStatus == '已付定金') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 根据配送方式判断是否显示用户收货地址\r\n\t\t\tlet isShowAddress = {\r\n\t\t\t\t[peiTypeEnumObj[peiTypeShangjia]]: true, // 商家配送 0\r\n\t\t\t\t[peiTypeEnumObj[peiTypeZiti]]: false, // 自提 1\r\n\t\t\t\t[peiTypeEnumObj[peiTypeKuaidi]]: true, // 快递 2\r\n\t\t\t\t[peiTypeEnumObj[peiTypeDada]]: true, // 达达 3\r\n\t\t\t\t[peiTypeEnumObj[peiTypeShansong]]: true, // 闪送 4\r\n\t\t\t\t[peiTypeEnumObj[peiTypeDuozitidian]]: false // 多自提点 5\r\n\t\t\t};\r\n\t\t\treturn isShowAddress[that.orderInfoPostType];\r\n\t\t},\r\n\t\t/*\r\n\t\t\t@description 当前订单是否是 第三方配送 并且是否可以 查看详情 (只有在配送中可以看详情地图距离 信息)\r\n\t\t\t@return <Boolean>\r\n\t\t*/\r\n\t\tcalcIsAtRunIng() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet resultBoolean;\r\n\t\t\tif (that.orderInfoPostType == 3 || that.orderInfoPostType == 4 || that.orderInfoPostType == 0) {\r\n\t\t\t\tlet thirdPeisongObj = that.orderDetail.third_peisong;\r\n\t\t\t\tif (checkTypeFn(thirdPeisongObj) == 'Object' && Object.keys(thirdPeisongObj).length > 0) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthat.orderInfoPostType == 3 &&\r\n\t\t\t\t\t\tcheckTypeFn(thirdPeisongObj.result) == 'Object' &&\r\n\t\t\t\t\t\tthirdPeisongObj.result.statusCode == 3\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t// 达达\r\n\t\t\t\t\t\tresultBoolean = true;\r\n\t\t\t\t\t} else if (\r\n\t\t\t\t\t\tthat.orderInfoPostType == 4 &&\r\n\t\t\t\t\t\tcheckTypeFn(thirdPeisongObj.data) == 'Object' &&\r\n\t\t\t\t\t\tthirdPeisongObj.data.orderStatus == 20\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\t// 闪送\r\n\t\t\t\t\t\tresultBoolean = true;\r\n\t\t\t\t\t} else if (\r\n\t\t\t\t\t\tthat.orderInfoPostType == 0 &&\r\n\t\t\t\t\t\tcheckTypeFn(thirdPeisongObj.statusChangeLog) == 'Array' &&\r\n\t\t\t\t\t\tthirdPeisongObj.statusChangeLog.length > 0 &&\r\n\t\t\t\t\t\tthirdPeisongObj.statusChangeLog[thirdPeisongObj.statusChangeLog.length - 1].orderStatus ==\r\n\t\t\t\t\t\t\t'配送中'\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tresultBoolean = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresultBoolean = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresultBoolean = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tresultBoolean = false;\r\n\t\t\t}\r\n\t\t\treturn resultBoolean;\r\n\t\t},\r\n\t\t// 返回 轨迹信息 的数据\r\n\t\tcalcTracesArr() {\r\n\t\t\tlet that = this;\r\n\t\t\tif (that.kdInfoSuccess) {\r\n\t\t\t\tlet kdInfoTraces = [];\r\n\t\t\t\tif (checkTypeFn(that.kdInfoTraces) == 'Array' && that.kdInfoTraces.length > 0) {\r\n\t\t\t\t\tkdInfoTraces = that.kdInfoTraces;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tkdInfoTraces = [];\r\n\t\t\t\t}\r\n\t\t\t\tif (kdInfoTraces.length > 0) {\r\n\t\t\t\t\treturn kdInfoTraces.map(item => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttitle: item.AcceptStation,\r\n\t\t\t\t\t\t\tdesc: item.AcceptTime\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 返回商家信息 地址 和 联系电话\r\n\t\tshowAddressInfo() {\r\n\t\t\tlet configInfo = assertObject(this.configInfo);\r\n\t\t\treturn {\r\n\t\t\t\tsellerImage: this.addimgPathHostFn(configInfo.shop_image),\r\n\t\t\t\tsellerName: configInfo.shop_name,\r\n\t\t\t\tsellerTel: configInfo.mobile,\r\n\t\t\t\tsellerOpenTime: configInfo.shop_bh,\r\n\t\t\t\tsellerAddress: configInfo.address\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// @description 商家地址 信息\r\n\t\t// @return <Object>\r\n\t\tshopAddressObj() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet positionStr = that.configInfo.shop_coordinate;\r\n\t\t\tlet positionArr = positionStr.split(',');\r\n\t\t\tlet longitude = positionArr[0];\r\n\t\t\tlet latitude = positionArr[1];\r\n\t\t\treturn {\r\n\t\t\t\tlatitude,\r\n\t\t\t\tlongitude\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\t// 返回markers数据\r\n\t\tmarkers() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 1,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/fa.png',\r\n\t\t\t\t\tlatitude: that.origin.latitude,\r\n\t\t\t\t\tlongitude: that.origin.longitude\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 2,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/qi.png',\r\n\r\n\t\t\t\t\tlatitude: that.latitude,\r\n\t\t\t\t\tlongitude: that.longitude\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tid: 3,\r\n\t\t\t\t\twidth: 24,\r\n\t\t\t\t\theight: 24,\r\n\t\t\t\t\ticonPath: '/static/global-image/shou.png',\r\n\t\t\t\t\tlatitude: that.target.latitude,\r\n\t\t\t\t\tlongitude: that.target.longitude\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t},\r\n\t\t// 配送方式是多点自提 时返回 自提点信息\r\n\t\tzitidianInfo() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn {\r\n\t\t\t\tzitidianImage: that.zitidianImage,\r\n\t\t\t\tisRange: true,\r\n\t\t\t\tzitidianTime: that.zitidianTime,\r\n\t\t\t\tzitidianAddressText: that.zitidianAddressText,\r\n\t\t\t\tzitidianName: that.zitidianName\r\n\t\t\t};\r\n\t\t}\r\n\t} // ↑↑↑↑↑ computed 结束\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.page,\r\npage {\r\n\tmin-height: 100vh;\r\n\tbackground: $bg-grey-color;\r\n\toverflow: hidden;\r\n}\r\n\r\n@mixin border {\r\n\tborder-bottom: 1px solid #f8f8f8;\r\n}\r\n\r\n.cancel-content {\r\n\tposition: relative;\r\n\tmargin-top: 20rpx;\r\n\tpadding: 0 20rpx;\r\n\tmargin-bottom: 10rpx;\r\n\toverflow: hidden;\r\n\tbackground: #ffffff;\r\n\r\n\t.before {\r\n\t\tcontent: '';\r\n\t\tdisplay: block;\r\n\t\tposition: absolute;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\twidth: 100%;\r\n\t\theight: 24rpx;\r\n\t}\r\n\r\n\t.h3-block {\r\n\t\tmargin-top: 36rpx;\r\n\t\t@include border;\r\n\r\n\t\t.h3-1 {\r\n\t\t\tfont-size: 34rpx;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: $grey1-color;\r\n\t\t\tline-height: 2em;\r\n\t\t}\r\n\r\n\t\t.h3-2 {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tcolor: $grey2-color;\r\n\t\t\tline-height: 70rpx;\r\n\t\t}\r\n\t}\r\n\r\n\t.h4 {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\r\n\t\t.btn-buy {\r\n\t\t\t@include flex-center;\r\n\t\t\tmargin: 12rpx 0;\r\n\t\t\tmargin-left: 12rpx;\r\n\t\t\twidth: 160rpx;\r\n\t\t\theight: 64rpx;\r\n\t\t\tborder: 1px solid #efefef;\r\n\t\t\tcolor: $grey1-color;\r\n\t\t\tfont-size: 25rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.goods-list-block {\r\n\tpadding-top: 10rpx;\r\n\t.goods-content {\r\n\t\tborder-radius: 20rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tpadding: 0 20rpx;\r\n\t\t.title {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 86rpx;\r\n\r\n\t\t\t.h3 {\r\n\t\t\t\tfont-size: 34rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t\tcolor: $grey1-color;\r\n\t\t\t}\r\n\r\n\t\t\t.h4 {\r\n\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\tcolor: $grey2-color;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.goods-list {\r\n\t\t\t.item {\r\n\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\t@include border;\r\n\r\n\t\t\t\t&:first-child {\r\n\t\t\t\t\tborder-top: 1px solid #f8f8f8;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.top-goods-info {\r\n\t\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t\t.image-block {\r\n\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t\twidth: 160rpx;\r\n\t\t\t\t\t\theight: 160rpx;\r\n\r\n\t\t\t\t\t\timage {\r\n\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.goods-description-block {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t\t\tjustify-content: flex-start;\r\n\r\n\t\t\t\t\t\t.goods-name {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\t\t.name-block {\r\n\t\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\t\tcolor: $grey1-color;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.name-block {\r\n\t\t\t\t\t\t\t\tmax-width: 9em;\r\n\t\t\t\t\t\t\t\t@include text-ellipsis;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.goods-description-box {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\t\t\t\t\t\t\theight: 60rpx;\r\n\r\n\t\t\t\t\t\t\t.goods-description {\r\n\t\t\t\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\t\t\t\tcolor: $grey2-color;\r\n\t\t\t\t\t\t\t\tmax-width: 16em;\r\n\t\t\t\t\t\t\t\t@include text-ellipsis;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.tag-list {\r\n\t\t\t\t\t\t\tfont-size: 0;\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.right-price-num {\r\n\t\t\t\t\t\twidth: 150rpx;\r\n\t\t\t\t\t\ttext-align: right;\r\n\t\t\t\t\t\t.num {\r\n\t\t\t\t\t\t\tfont-size: 22rpx;\r\n\t\t\t\t\t\t\tcolor: $grey2-color;\r\n\t\t\t\t\t\t\tmax-width: 16em;\r\n\t\t\t\t\t\t\t@include text-ellipsis;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.price-block {\r\n\t\t\t\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\t\t\t\tcolor: $grey1-color;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.text {\r\n\t\t\t\t\t\t\tfont-size: 23rpx;\r\n\t\t\t\t\t\t\tcolor: #6ccc4e;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t.bottom-diff-price-tips {\r\n\t\t\t\t\tmargin: 8rpx 0 0;\r\n\t\t\t\t\tpadding-left: 0.4em;\r\n\t\t\t\t\tfont-size: 25rpx;\r\n\t\t\t\t\tfont-weight: 600;\r\n\t\t\t\t\tline-height: 1.2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.xiaofei {\r\n\t\t\t.peisong {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\theight: 85rpx;\r\n\t\t\t\tcolor: $grey1-color;\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tfont-weight: 600;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.zongjia {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\talign-items: center;\r\n\t\tmargin: 20rpx 0;\r\n\t\tpadding: 0 20rpx;\r\n\t\theight: 88rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: $grey2-color;\r\n\r\n\t\ttext {\r\n\t\t\ttext-indent: 0.5em;\r\n\t\t\tfont-weight: 600;\r\n\t\t\tcolor: $grey1-color;\r\n\t\t}\r\n\t}\r\n\r\n\t.order-info {\r\n\t\tpadding: 0 20rpx;\r\n\t\tbackground: #ffffff;\r\n\t\tborder-radius: 20rpx;\r\n\r\n\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t.line {\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: space-between;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 88rpx;\r\n\t\t\tfont-size: 23rpx;\r\n\t\t\tcolor: $grey1-color;\r\n\r\n\t\t\t.img-box {\r\n\t\t\t\tmargin: 0 1em;\r\n\t\t\t\twidth: 100rpx;\r\n\t\t\t\theight: 100rpx;\r\n\t\t\t\tborder-radius: 10rpx;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\t.image-dom {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.copy-btn {\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.couponModal {\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tposition: fixed;\r\n\tz-index: 700;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100vw;\r\n\theight: 100vh;\r\n\tbackground: rgba(0, 0, 0, 0.3);\r\n\r\n\t.top {\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.bottom {\r\n\t\theight: 1100rpx;\r\n\t\tbackground: #f5f5f5;\r\n\t\tborder-radius: 20rpx 20rpx 0 0;\r\n\t\tposition: relative;\r\n\r\n\t\t.icon-block {\r\n\t\t\tdisplay: inline-flex;\r\n\t\t\talign-items: center;\r\n\t\t\tposition: absolute;\r\n\t\t\tright: 1em;\r\n\t\t\ttop: 1em;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t\t// color: $red-color;\r\n\t\t\tcolor: #bbbdc0;\r\n\t\t\tborder: 1px solid #bbbdc0;\r\n\t\t\tborder-radius: 100rpx;\r\n\t\t\tpadding-left: 0.5em;\r\n\t\t\tpadding-right: 0.5em;\r\n\t\t}\r\n\r\n\t\t.title-h4 {\r\n\t\t\ttext-align: left;\r\n\t\t\tpadding-left: 24rpx;\r\n\r\n\t\t\tcolor: $grey1-color;\r\n\t\t\tline-height: 110rpx;\r\n\t\t\tfont-size: 30rpx;\r\n\t\t}\r\n\r\n\t\t.content {\r\n\t\t\tpadding: 0 34rpx;\r\n\r\n\t\t\t.title-h5 {\r\n\t\t\t\tcolor: $grey2-color;\r\n\t\t\t\tline-height: 55rpx;\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.card-wrap {\r\n\t\t\t\theight: 1080rpx;\r\n\r\n\t\t\t\t.card-block {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\toverflow-x: hidden;\r\n\t\t\t\t\t@include hide-scrollbar;\r\n\t\t\t\t\tpadding-bottom: 100rpx;\r\n\r\n\t\t\t\t\t.state-top-block {\r\n\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\tbackground: #ffffff;\r\n\t\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\t\tpadding: 20rpx;\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tline-height: 1.6em;\r\n\r\n\t\t\t\t\t\t.h5 {\r\n\t\t\t\t\t\t\tmargin-right: 0.5em;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.Traces-block {\r\n\t\t\t\t\t\tbackground: #ffffff;\r\n\t\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\t\tmargin: 10px 0;\r\n\t\t\t\t\t\tpadding-right: 10rpx;\r\n\t\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n.map-wrap {\r\n\t@mixin size {\r\n\t\twidth: 702rpx;\r\n\t\theight: 702rpx;\r\n\t}\r\n\tmargin: 20rpx auto;\r\n\t@include size;\r\n\toverflow: hidden;\r\n\tborder-radius: 20rpx;\r\n\r\n\t.map-dom {\r\n\t\t@include size;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./dingdan-state.vue?vue&type=style&index=0&id=8c05a21e&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./dingdan-state.vue?vue&type=style&index=0&id=8c05a21e&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675502582146\n      var cssReload = require(\"E:/HBuilderX.2.6.9.20200403/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}