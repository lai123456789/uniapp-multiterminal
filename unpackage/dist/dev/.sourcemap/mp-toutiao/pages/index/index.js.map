{"version":3,"sources":["uni-app:///main.js","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?62a8","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?192c","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?d35f","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?c7ee","uni-app:///pages/index/index.vue","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?91ba","webpack:///F:/test-uniapp2/万象优鲜商城生鲜配送系统生鲜批发版本APP小程序公众号抖音小程序快手商城小程序/pages/index/index.vue?073c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","homeSwiperAutoplayTimer","homeNewsTimer","setTabBarCartNumTimer","qqmapsdk","loopShowModalTimer","components","homeTopShowAddress","homeSearch","homeSwiper","homeTopCoupon","homePlatformIcon","homeNews","homeTypeBtns","homeHotScrollGoods","homeMiaoshaCaichang","bottomGoodsClassNavBar","bottomGoodsList","homeCouponModal","homeAdModal","firstScreenGjp","playBuyHistory","addressOutOfRangeModal","data","statusBarHeight","homeSwiperList","homeSwiperItemActive","homeSwiperAutoplay","homeNewsAutoplay","firstScreenGjpFlag","homeCouponList","homeCouponOptions","homeTagTextList","homeTagTextOptions","homeMsgTextList","homeMsgTextOptions","homeMenuBtnList","isShowHomeMenuTip","homePageScrollGoods","miaoshaGoodsList","caiChangGoodsList","bannerImageList","homeBottomGoodsClassList","navBarListActive","homePageBottomGoodsList","pageIndex","goodsLoading","loadMoreStatus","homeIsShow","currentAddressText","addressIsAtRangeFlag","isGetedAddressFlag","modalGroupCouponFlag","couponFlagCloseEd","modalGroupHomeAdFlag","homeAdFlagCloseEd","modalGroupNotRangeFlag","notRangeFlagCloseEd","isShowGoodsSpec","goodsSpecSelectItemList","goodsSpecRowsList","currentGoodsName","currentGoodsDescription","currentGoodsImages","currentGoodsId","currentGoodsSelectedNum","loginBoxFlag","cardNumber","openAppCount","onReady","console","onShow","uni","that","clearTimeout","goodsId","currentGoods","result","showCancel","title","success","onUnload","onLoad","buyHistoryResult","i","j","item","onHide","onPullDownRefresh","onShareAppMessage","options","path","query","scene","methods","fnn1","locationInfo","s","getIndexPageFirstScreenDataFn","Promise","indexPageHeaderData","indexPageHotScrollGoods","resFn","getIndexPageHeaderDataFn","url","resObj","homeHeadData","homeCouponData","homeCouponOptionsSet","show_type","coupon_popout_color","coupon_popout_but_color","coupon_popout_but_text_color","coupon_popout_text_color","coupon_popout_money_text_color","coupon_popout_money_color","coupon_popout_title_color","coupon_popout_title_text_color","homeTagTextData","homeMsgTextData","type","msg","getIndexPageHotScrollGoodsFn","homeScrollGoodsInfoObj","homeScrollGoodsList","goodsImage","isHot","isNew","goodsName","isVipPrice","goodsPrice","vipPrice","linePrice","goodsTag","selectedNum","isSpec","tagImg","goodsList","bgType","bgContent","titleText","subTitleText","titleIcon","titleColor","isShowMoreBtn","id","getIndexPageCaichangMiaoshaoFn","homeCaiChangMiaoShaObj","miaoshaObj","miaoshaOptions","miaoshaStartTime","miaoshaEndTime","miaoshaHomeBgColor","miaoshaListPageBgColor","caiChangObj","caiChangOptions","caichangTitleText","caichangSubTitleText","caichangListPageTitleBarTextColor","caichangListPageTitleBarBgColor","caichangHomeBgColor","getIndexPageMofangTupianFn","sortBy","resultArr","filter","map","content","image","sort","styleId","list","reverse","getIndexPageBottomGoodsFn","homeBottomGoodsData","goodsDescription","gysMdId","gysMdName","homeBottomGoodsList","currentAddressInfoFn","currentAddressTextResult","checkRangeResult","pageLoadFn","indexPageFirstScreenDataResult","indexPageCaichangMiaoshaoResult","icon","indexPageMofangTupianResult","indexPageBottomGoodsResult","fn","indexAddressInfo","isHasAddressInfo","hideHomeMenuTipFn","changeNavBarFn","navBarListClickFn","setTimeout","selectAll","boundingClientRect","scrollTop","duration","exec","getCouponSuccess","it","indexPageGetAddressInfoFn","latitude","longitude","loopShowModalFn","closeHomeCouponModalFn","closeHomeAdModalFn","lingqvFn","e","idList","join","loading","method","couponIds","getSetHomeAddressInfoFn","swiperChangeFn","onReachBottom","args","refreshFn","setGoodsSpec","setSpecFilterItemActiveFn","specFilterIndex","setAddressOutOfRangeModalFlagFn","getBuyHistoryFn","resultObject","headimgurl","computed","homeSwiperBgColor","calcPageIsScrollToSwiperBottom","calcTopHeadBgColor","tabCurrent","homeAdOption","AdOption","top","homeTemplateIdList","homeTemplateIdSettingFlag","globalMainSwitch","defaultHomeToastModalStatus","isUserCloneFlag","watch","newVal","oldVal"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AAC+L;AAC/L,gBAAgB,wMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAiuB,CAAgB,svBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;ACqNrvB;AAKA;AAEA;AAQA;AAAA;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAAA;EAAA;IAAA;EAAA,CAAC;AAAD;AAmBA;;AAcA;EAAA;EACAC;EAAA;EACAC;EAAA;EACAC;EAAA;EACAC;EAAA;EACAC;AAAA,eAEA;EACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IACAC;IAEAC;IACAC;IAUAC;EACA;EACAC;IACA;MACAC;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;;MAEA;MACAC;MAAA;;MAWAC;MAAA;MACAC;MAAA;;MAEAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;;MAEA;;MAEA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACA;MACAC;MAAA;MACAC;MAAA;;MAEA;MACAC;IACA;EACA;EACAC;IACA;IACAC;EAOA;EACAC;IACA;IACAD;;IAEA;IACAE;IACAA;MACAC;IACA;;IAEA;IACAD;IACAA;MACAC;IACA;IASAA;IACAC;IACAA;IACAzE;MACA;QACAwE;MACA;IACA;IACAvE;MACA;QACAuE;MACA;IACA;IAEAA;IAEAC;IAEAA;IACAD;IAEAtE;MACAsE;IACA;IACA;IACAD;IACAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAG;gBAEAL;gBAGA;kBACAM,wCACA;oBAAA;kBAAA,OACA;gBACA;kBACA;oBACA;sBACA;wBACAA;sBACA;oBACA;kBACA;gBACA;gBACA;;AAEA;AACA;AACA;AACA;AACA;gBAEAH;gBACAD;gBAEAF;gBAEAG;gBACAA;gBACAA;;gBAEAA;gBAAA;gBAAA,OAEAA;cAAA;gBAAAI;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACAJ;gBACAD;kBACAM;kBAAA;kBACAC;kBACAC;oBACA;oBACAV;kBACA;gBACA;gBAAA,iCACA;cAAA;gBAEAG;gBACAA;gBAEAH;gBAEAG;gBACAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,CACA;MAAA;QAAA;MAAA;IAAA;EACA;EACAQ;IACAT;IACA;EACA;EACAU;IACA;IACAZ;IAoBAG;IAQA;MACAA;IACA;IAGAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OAEAA;YAAA;cAAAU;cACA;gBACAV;gBACAD;cACA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA,CACA;;IAgBA;AACA;AACA;AACA;IACA;IACAA;IACAA;MACA;QAAAG;MACAL;MAEAG;QACAW;UACA;YACAC;UACA;QACA;MACA;MAEAZ;QACA;UACAa;QACA;MACA;IACA;EACA;EAUAC;IACA;IACAd;IACAC;IACA;MACAD;IACA;IACAC;IACA;MACAD;IACA;IACAA;IAEAC;IAEAF;EACA;EACA;EACAgB;IACA;IAOAf;IACAA;IACAA;;IAEAC;IACAD;MACAD;MACAC;IACA;EACA;EACA;EACAgB;IACA;IACA;IACA;MACAC;IACA;IACA;MACAA;IACA;IACA;MACAA;MACAC;MACAC;QACAC;MACA;IACA;EACA;EACAC;IAoBAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAtB;gBAGAD;gBAAA,kCACA;cAAA;gBAGAwB;gBAEA1B;gBAAA,kCACA;cAAA;gBAiBA2B;gBACA3B;gBAAA,kCAEA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAIA;IACA;IACA;IACA4B;MACA;MACA;QAAA;UAAA;YAAA;cAAA;gBAAA;kBACAC,yFACA;oBAAA;sBAAAC;sBAAAC;oBACAC;sBACAzB;wBACAuB;wBACAC;sBACA;oBACA;kBACA,EACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;AACA;AACA;AACA;IACAE;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACA9B;oBACA+B;kBACA;gBAAA;kBAFA3B;kBAGA4B;kBACA;oBACA;sBACAC;sBAEAjF;sBAEAkF;sBACA7E;sBAEA8E;sBAEA7E;wBACA;wBACAgD;wBAAA;wBACA8B;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;sBACA;sBAEAC;sBACAtF;sBACAC;sBAEAsF;sBACArF;sBACAC;sBAEAC;sBAEAqE;wBACAe;wBACAC;wBACA5C;0BACApD;0BAAA;0BACAK;0BAAA;0BACAC;0BAAA;;0BAEAC;0BAAA;0BACAC;0BAAA;;0BAEAC;0BAAA;0BACAC;0BAAA;0BACAC;wBACA;sBACA;oBACA;sBACAqE;wBACAe;wBACAC;wBACA5C;sBACA;oBACA;kBACA;oBACA4B;sBACAe;sBACAC;sBACA5C;oBACA;kBACA;kBACAyB;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAoB;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAjD;oBACA+B;kBACA;gBAAA;kBAFA3B;kBAGA4B;kBAEA;oBACA;sBACAkB;sBACAC;sBACAA;wBACA;;wBAEA;wBACAtC;0BACA;4BACAX;4BAAA;4BACAkD;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;4BAAA;4BACAC;0BACA;wBACA;wBACA;AACA;AACA;AACA;AACA;AACA;wBACA;0BACAlD;0BACAA;wBACA;0BACAA;0BACAA;wBACA;0BACAA;0BACAA;wBACA;wBACAA;wBACAA;wBACAA;wBACAA;wBACAA;sBACA;;sBACAmB;wBACAe;wBACAC;wBACA5C;0BACA;0BACA;4BACA4D;4BACAC;4BACAC;4BACAC;4BACAC;4BACAC;4BACAC;4BACAC;4BACAC;0BACA;wBACA;sBACA;oBACA;sBACAxC;wBACAe;wBACAC;wBACA5C;sBACA;oBACA;kBACA;oBACA4B;sBACAe;sBACAC;sBACA5C;oBACA;kBACA;kBACAyB;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IACA;IACA4C;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAzE;oBACA+B;kBACA;gBAAA;kBAFA3B;kBAGA4B;kBACA;oBACA;sBACA0C;sBAEAC;sBACA7G;sBACA8G;wBACA;;wBAEAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;sBACA;sBACA;AACA;AACA;AACA;AACA;;sBACA;wBACAJ;sBACA;wBACAA;sBACA;sBAEAK;sBAEAlH;sBAEAmH;wBACA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;wBAAA;wBACAC;sBACA;;sBAEAvD;wBACAe;wBACAC;wBACA5C;0BACAtC;0BAAA;0BACA8G;0BAAA;0BACA7G;0BAAA;0BACAmH;wBACA;sBACA;oBACA;sBACAlD;wBACAe;wBACAC;wBACA5C;sBACA;oBACA;kBACA;oBACA4B;sBACAe;sBACAC;sBACA5C;oBACA;kBACA;kBACAyB;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA2D;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAxF;oBACA+B;kBACA;gBAAA;kBAFA3B;kBAIA4B;kBACA;oBACA;sBACAyD;wBACA;0BACA;wBACA;sBACA;sBACAC,sDACAC;wBAAA;sBAAA,GACAC;wBACA;0BACA;4BACA7C;4BACA8C;4BACAC;0BACA;wBACA;wBACA;0BACAC;0BACAC;0BACAC;wBACA;sBACA,GACAF,qBACAG;sBAEAlE;wBACAgB;wBACAD;wBACA3C;sBACA;oBACA;sBACA4B;wBACAgB;wBACAD;wBACA3C;sBACA;oBACA;kBACA;oBACA4B;sBACAgB;sBACAD;sBACA3C;oBACA;kBACA;kBACAyB;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAsE;MACA;QACArJ;MACA;QACAA;MACA;QACAA;MACA;MACA;QACAA;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAkD;oBACA+B;oBACAjF;kBACA;gBAAA;kBAHAsD;kBAIA4B;kBACA;oBACA;sBACAoE;sBAEAnI;sBAEA+F;wBACA;0BACA9D;0BAAA;0BACAkD;0BAAA;0BACAC;0BAAA;0BACAC;0BAAA;0BACAC;0BAAA;0BACA8C;0BAAA;0BACAzC;0BAAA;0BACAJ;0BAAA;0BACAC;0BAAA;0BACAC;0BAAA;0BACAC;0BAAA;0BACAE;0BAAA;0BACAC;0BAAA;0BACAC;0BAAA;0BACAuC;0BAAA;0BACAC;wBACA;sBACA;sBACAC;sBAEA3G;sBAEAmC;wBACAe;wBACAC;wBACA5C;0BACAnC;0BAAA;0BACAuI;wBACA;sBACA;oBACA;sBACAxE;wBACAe;wBACAC;wBACA5C;sBACA;oBACA;kBACA;oBACA4B;sBACAe;sBACAC;sBACA5C;oBACA;kBACA;kBACAyB;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA4E;MACA;MACA;QACA/E,aACA1B,0CACAA,wFACA;UAAA;YAAA0G;YAAAC;UACA9E;YACAzB;cACAsG;cACAC;YACA;UACA;QACA;MACA;IACA;IAsCA;IAEA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA5G;gBACAA;;gBAEA;;gBAEA;gBACA;gBAAA;gBAAA,OACAA;cAAA;gBAAA6G;gBACA;AACA;AACA;AACA;AACA;AACA;AACA;gBANA,wBAQAA;gBAEA;kBAAA,wBAYAlF,4BAVA3E,uDACAK,uDACAC,6DAEAC,yDACAC,+DAEAC,yDACAC,+DACAC;kBAGAqC;kBACAA;kBACAA;kBACAA;kBACAA;kBACAA;kBACAA;kBACAA;;kBAEA;AACA;AACA;kBACA;oBACAA;kBACA;gBACA;kBACAA;gBACA;gBAEA;kBACAA;gBACA;kBACAA;gBACA;gBACA;kBACAA;gBACA;;gBAEA;gBACA;gBACA;gBAAA;gBAAA,OACAA;cAAA;gBAAA8G;gBACA;kBAAA,wBAMAA,wCAJAhJ,2DACA8G,uDACA7G,6DACAmH;kBAGAlF;kBACAA;kBACAA;kBACAA;kBAEAH;gBACA;kBACAG;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;;gBAEA;gBAAA;gBAAA,OACAN;cAAA;gBAAAgH;gBACAnH;gBACA;kBACAG;gBACA;kBACAA;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;;gBAEA;gBAAA;gBAAA,OACAN;cAAA;gBAAAiH;gBACA;kBACAjH;kBACAA;kBACAA;kBAEA;oBACAA;kBACA;oBACAA;kBACA;gBACA;kBACAA;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;gBAuCA4G;gBAEAC,qFAEA;gBACAC;gBACA;kBACApH;oBACAC;oBACAD;kBACA;gBACA;kBACAA;kBACAA;kBACAA;kBACAC;kBACAD;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAqH;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAvH;gBAEAA;gBAEAA;gBAAA;gBAAA,OACAA;cAAA;gBAAAiH;gBAEA;kBACAjH;kBACA;oBACAA;kBACA;oBACAA;kBACA;gBACA;kBACAA;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;gBACAN;gBACAA;kBACAwH;oBACA;oBACArG,MACAsG,sCACAC;sBACA;sBAEA;sBAEA7H;sBAEAA;sBAEAE;wBACA4H;wBACAC;sBACA;oBACA,GACAC;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MACA;MACAC;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAhI;gBAAA;gBAAA,OACAA;cAAA;gBAAAuB;gBACAvB;gBAAA,MAEAuB;kBAAA;kBAAA;gBAAA;gBAAA,uBACAA;gBAAA;gBAAA,OAIAvB;kBAAAiI;kBAAAC;gBAAA;cAAA;gBAAA;gBAAA,+CADA9H;gBAAAsG;gBAAAC;gBAGA9G;kBACA6G;kBACAC;gBACA;gBACA3G;gBAEA;kBACAA;kBAEAmH;oBACAc;oBACAC;oBACA1J;oBACAC;kBACA;kBACAoB;kBAEAE;gBACA;kBACAC;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;gBAEA4G;gBAAA;gBAAA;cAAA;gBAEAlH;kBACA+B;gBACA;cAAA;gBAGAlC;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAsI;MACA;MACAlI;MAEArE;QACA;UA4CA;UACA;YACA;cACA;YACA;YACAoE;YACA;UACA;YACAA;UACA;;UAEA;UACA;UACA;UACA;YACA;cACA;cACAD;YACA;cACA;gBACA;cACA;YACA;UACA;YACAA;UACA;;UAEA;UACA,IACAC,8BACAA,yCACA,yBACA;YACA;cACA;YACA;YACAA;YACA;UACA;YACAA;UACA;UACA;UACA;YACA;cACA;YACA;YACAA;YACA;UACA;YACAA;UACA;QACA;MACA;IACA;IAUA;IACAoI;MACA;MACA;MACAnI;MACA;IACA;IACA;IACAoI;MACA;MACA;MACApI;MACA;IACA;IACA;IACAqI;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAtI;gBAAA,IACAA;kBAAA;kBAAA;gBAAA;gBACAA;gBAAA,mCACA;cAAA;gBAAA,IAGAA;kBAAA;kBAAA;gBAAA;gBACAD;kBACAO;kBACAC;oBACAgI;sBAAAxG;oBAAA;kBACA;gBACA;gBAAA,mCACA;cAAA;gBAGAyG,6BACA5C;kBACA;gBACA,GACA6C;gBAAA;gBAAA,OAEAzI;kBACA0I;kBACAC;kBACA5G;kBACAjF;oBACA8L;kBACA;gBACA;cAAA;gBAPAxI;gBAQAP;gBAEA;kBACAE;oBACAgH;oBACAzG;kBACA;gBACA;kBACAP;oBACAgH;oBACAzG;kBACA;gBACA;gBACAN;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA;IACA6I;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA7I;gBACAmH;gBACAtH;gBACA;gBACAuH;gBAEA;kBACApH;kBACAA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA8I;MACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA/I;gBAMAA;gBACAA;gBAAA,gBACA;gBAEAgJ;gBACA;kBACAA;gBACA;gBAAA;gBAAA,OACAhJ;cAAA;gBAAAiH;gBACA;kBACA;oBACAjH;oBACAA,mEACAiH,sDACA;kBACA;oBACAjH;oBACAA;oBACA;sBACAA;oBACA;kBACA;gBACA;kBACAA;kBACAD;oBACAgH;oBACAzG;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACA2I;MACA;MACA;IACA;IAEA;IACA;IACAC;MACA;MACAlJ;MACA;QACAA;MACA;IACA;IACA;IACAmJ;MACA;MACA;QAAAC;MAEAvJ;MAEA;MAEAX;QACA;UACA2B;YACA;cACAkH;YACA;cACAA;YACA;UACA;QACA;MACA;MACA/H;IACA;IACA;IAEAqJ;MACA;MACA;QACA;QACApJ;QACA;MACA;MACA;IACA;IAuEA;IACAqJ;MACA;MACA;QAAA;UAAA;UAAA;YAAA;cAAA;gBAAA;kBAAA;kBAAA,OACAtJ;oBACA2I;oBACA5G;kBACA;gBAAA;kBAHA3B;kBAIA;oBACA;sBACAmJ;sBACAtD;wBACA;0BACA;4BACAuD;4BACAxG;0BACA;wBACA;wBACA;0BACAwG;0BACAxG;wBACA;sBACA;sBACAnB;wBACAkB;wBACAC;wBACA5C;sBACA;oBACA;sBACAyB;wBACAkB;wBACAC;wBACA5C;sBACA;oBACA;kBACA;oBACAyB;sBACAkB;sBACAC;sBACA5C;oBACA;kBACA;gBAAA;gBAAA;kBAAA;cAAA;YAAA;UAAA;QAAA,CACA;QAAA;UAAA;QAAA;MAAA;IACA;EACA;EAAA;EACAqJ;IACA;IACAC;MACA;QACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;QAKA;MAEA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;MACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA;MACA;IACA;IACA;IACAC;MACA;MACA;MACA;QACAC;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;QACAA;MAEAA;MAKA;IACA;EAAA,GACA;IACAC;MAAA;IAAA;IAAA;IACAC;MAAA;IAAA;IAAA;IACAC;MAAA;IAAA;IAAA;IACAC;MAAA;IAAA;IAAA;IACAC;MAAA;IAAA;EACA,GACA;;EAAA;EACAC;IACAX;MACA;MACA9J,YACA,8EACA0K,4CACAC,kGACA,yBACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC93DA;AAAA;AAAA;AAAA;AAA44C,CAAgB,y2CAAG,EAAC,C;;;;;;;;;;;ACAh6C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- \t\r\n\t\t万象优鲜生鲜系统(简称: 万象优鲜)\r\n\t\t软著证书号: 6907220\r\n\t\t软著登记号: 2021SR0182903\r\n\t\t手机: 18310199838\r\n\t\t电话: 4006697689\r\n\t\t邮箱: 3319653051@qq.com\r\n\t\t著作权人: 北京世间万象网络科技有限公司\r\n\t\t版权所有: 北京世间万象网络科技有限公司\r\n\t\t任何组织和个人未经本单位许可与授权, 不得擅自复制、更改内容本系统受版权法保护如未经授权而擅自复制或传播本系统(或其中部分), 将受到严厉的刑事及民事制裁，并将在法律许可范围内受到最大可能的起诉!\r\n\t-->\r\n\t<!-- 页面开始↓↓ -->\r\n\t<!-- <view :class=\"['page', youhuiquanModalBox ? 'stopScrollStyle' : '']\"> -->\r\n\t<view :class=\"['page']\">\r\n\t\t<!-- 首页的骨架屏组件 -->\r\n\t\t<first-screen-gjp :first-screen-gjp-flag=\"firstScreenGjpFlag\"></first-screen-gjp>\r\n\r\n\t\t<template v-if=\"!firstScreenGjpFlag\">\r\n\t\t\t<!-- #ifdef APP-PLUS || MP-WEIXIN || MP-TOUTIAO -->\r\n\t\t\t<!-- ↓↓↓ 页面顶部 titleBar 标题组件 -->\r\n\t\t\t<title-bar :bg-color=\"calcTopHeadBgColor\">{{ configInfo.shoname }}</title-bar>\r\n\t\t\t<!-- #endif -->\r\n\r\n\t\t\t<!-- ↓↓↓ 头部展示 当前地址组件 -->\r\n\t\t\t<home-top-show-address\r\n\t\t\t\t:address-text=\"currentAddressText\"\r\n\t\t\t\t:home-swiper-bg-color=\"calcTopHeadBgColor\"\r\n\t\t\t></home-top-show-address>\r\n\r\n\t\t\t<!-- ↓↓↓ 搜索框组件-->\r\n\t\t\t<!-- #ifdef MP-WEIXIN || APP-PLUS || MP-TOUTIAO -->\r\n\t\t\t<view class=\"home-search-wrap\" :style=\"{ top: `${statusBarHeight + 44}px` }\">\r\n\t\t\t\t<home-search :home-swiper-bg-color=\"calcTopHeadBgColor\"></home-search>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view class=\"home-search-wrap\" :style=\"{ top: `${statusBarHeight}px` }\">\r\n\t\t\t\t<home-search :home-swiper-bg-color=\"calcTopHeadBgColor\"></home-search>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\r\n\t\t\t<!-- ↓↓↓ 首页顶部轮播图 -->\r\n\t\t\t<home-swiper\r\n\t\t\t\t:home-swiper-list=\"homeSwiperList\"\r\n\t\t\t\t:home-swiper-item-active=\"homeSwiperItemActive\"\r\n\t\t\t\t:home-swiper-bg-color=\"calcTopHeadBgColor\"\r\n\t\t\t\t:autoplay=\"homeSwiperAutoplay\"\r\n\t\t\t\t@swiperChangeFn=\"swiperChangeFn\"\r\n\t\t\t></home-swiper>\r\n\t\t\t<!-- 轮播图下面的dom元素获取高度使用 -->\r\n\t\t\t<view class=\"home-swiper-bottom-dom\"></view>\r\n\r\n\t\t\t<!-- <view><button type=\"default\" size=\"mini\" @click=\"fnn1\">开发测试的登录按钮3</button></view> -->\r\n\r\n\t\t\t<!-- ↓↓↓ 首页页面里展示优惠券组件 (最后处理) -->\r\n\t\t\t<home-top-coupon\r\n\t\t\t\tv-if=\"homeCouponOptions.show_type == 1 && homeCouponList.length\"\r\n\t\t\t\t:coupon-title-text=\"homeCouponOptions.title\"\r\n\t\t\t\t:coupon-list=\"homeCouponList\"\r\n\t\t\t\t@getCouponSuccess=\"getCouponSuccess\"\r\n\t\t\t></home-top-coupon>\r\n\r\n\t\t\t<!-- ↓↓↓ 平台图标 组件 -->\r\n\t\t\t<home-platform-icon\r\n\t\t\t\t:platform-icon-list=\"homeTagTextList\"\r\n\t\t\t\t:platform-icon-options=\"homeTagTextOptions\"\r\n\t\t\t></home-platform-icon>\r\n\r\n\t\t\t<!-- ↓↓↓ 系统消息轮播 组件 -->\r\n\t\t\t<home-news\r\n\t\t\t\t:home-msg-text-options=\"homeMsgTextOptions\"\r\n\t\t\t\t:home-msg-text-list=\"homeMsgTextList\"\r\n\t\t\t\t:autoplay=\"homeNewsAutoplay\"\r\n\t\t\t\tpage=\"index-home\"\r\n\t\t\t></home-news>\r\n\r\n\t\t\t<!-- ↓↓↓ 首页的 分类 组件 -->\r\n\t\t\t<home-type-btns\r\n\t\t\t\t:home-menu-btn-list=\"homeMenuBtnList\"\r\n\t\t\t\t:is-show-home-menu-tip=\"isShowHomeMenuTip\"\r\n\t\t\t\t@hideHomeMenuTipFn=\"hideHomeMenuTipFn\"\r\n\t\t\t></home-type-btns>\r\n\r\n\t\t\t<!-- ↓↓↓ 热销排行 爆款 横向滚动商品 -->\r\n\t\t\t<home-hot-scroll-goods :home-page-scroll-goods=\"homePageScrollGoods\"></home-hot-scroll-goods>\r\n\r\n\t\t\t<!-- ↓↓↓ 秒杀 菜场 模块展示 -->\r\n\t\t\t<home-miaosha-caichang\r\n\t\t\t\t:home-is-show=\"homeIsShow\"\r\n\t\t\t\t:miaosha-goods-list=\"miaoshaGoodsList\"\r\n\t\t\t\t:cai-chang-goods-list=\"caiChangGoodsList\"\r\n\t\t\t></home-miaosha-caichang>\r\n\r\n\t\t\t<!-- ↓↓↓ 魔方图片的所有组件 -->\r\n\t\t\t<view class=\"all-components\" v-if=\"bannerImageList.length\">\r\n\t\t\t\t<all-components\r\n\t\t\t\t\tv-for=\"(item, index) in bannerImageList\"\r\n\t\t\t\t\t:style-id=\"item.styleId\"\r\n\t\t\t\t\t:list=\"item.list\"\r\n\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t:data-key-id=\"item.styleId\"\r\n\t\t\t\t></all-components>\r\n\t\t\t</view>\r\n\t\t\t<!-- ↓↓↓ 底部商品分类导航条组件 -->\r\n\r\n\t\t\t<block v-if=\"homeBottomGoodsClassList.length\">\r\n\t\t\t\t<view class=\"nav-bar-list-wrap\" :style=\"{ top }\">\r\n\t\t\t\t\t<bottom-goods-class-nav-bar\r\n\t\t\t\t\t\t:home-bottom-goods-class-list=\"homeBottomGoodsClassList\"\r\n\t\t\t\t\t\t:nav-bar-list-active=\"navBarListActive\"\r\n\t\t\t\t\t\t@changeNavBarFn=\"changeNavBarFn\"\r\n\t\t\t\t\t></bottom-goods-class-nav-bar>\r\n\t\t\t\t</view>\r\n\t\t\t</block>\r\n\r\n\t\t\t<!-- 商品列表上面的dom元素获取高度使用 -->\r\n\t\t\t<view\r\n\t\t\t\tclass=\"bottom-shop-list-getdom\"\r\n\t\t\t\tstyle=\"width: 100%; height: 0; opacity: 0; background: rgba(0,0,0,0);\"\r\n\t\t\t></view>\r\n\t\t\t<!-- ↓↓↓ 底部商品列表组件 -->\r\n\t\t\t<bottom-goods-list\r\n\t\t\t\t:goods-list=\"homePageBottomGoodsList\"\r\n\t\t\t\t:goods-loading=\"goodsLoading\"\r\n\t\t\t\t:load-more-status=\"loadMoreStatus\"\r\n\t\t\t></bottom-goods-list>\r\n\r\n\t\t\t<!-- ↓↓↓ 回到顶部按钮组件 -->\r\n\t\t\t<to-top-btn :flag=\"isShowToTopBtn\"></to-top-btn>\r\n\r\n\t\t\t<!-- ↓↓↓ 登录框 -->\r\n\t\t\t<login-fn\r\n\t\t\t\t:is-show-login=\"loginBoxFlag\"\r\n\t\t\t\t@loginSuccessCallback=\"refreshFn\"\r\n\t\t\t\t@close=\"closeGlobalLoginFn\"\r\n\t\t\t></login-fn>\r\n\t\t</template>\r\n\r\n\t\t<!-- ↓↓↓ 多规格弹框 -->\r\n\t\t<goods-spec\r\n\t\t\t:is-show=\"isShowGoodsSpec\"\r\n\t\t\t:goods-spec-rows-list=\"goodsSpecRowsList\"\r\n\t\t\t:goods-spec-select-item-list=\"goodsSpecSelectItemList\"\r\n\t\t\t:goods-name=\"currentGoodsName\"\r\n\t\t\t:goods-description=\"currentGoodsDescription\"\r\n\t\t\t:goods-images=\"currentGoodsImages\"\r\n\t\t\t:goods-id=\"currentGoodsId\"\r\n\t\t\t:selected-num=\"currentGoodsSelectedNum\"\r\n\t\t\t@setGoodsSpec=\"setGoodsSpec\"\r\n\t\t\t@setSpecFilterItemActiveFn=\"setSpecFilterItemActiveFn\"\r\n\t\t></goods-spec>\r\n\r\n\t\t<!-- ↓↓↓ 自定义页面底部tabBar 组件 -->\r\n\t\t<view class=\"hans-tabbar\">\r\n\t\t\t<view class=\"hans-tabbar-height\" :class=\"[isiPhoneX ? 'isiPhoneXClass' : '']\"></view>\r\n\t\t\t<view class=\"hans-tabbar-fixde\" :class=\"[isiPhoneX ? 'isiPhoneXClass' : '']\">\r\n\t\t\t\t<hans-tabbar :cardNumber=\"cardNumber\" :list=\"MenuList\" :tab-current=\"tabCurrent\"></hans-tabbar>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- ↓↓↓ 主体结构加载完毕 以下是弹框相关 -->\r\n\r\n\t\t<!-- #ifdef APP-PLUS -->\r\n\t\t<!-- app 平台下版本升级的 首页弹框 -->\r\n\t\t<app-update-version-modal v-if=\"modalGroupAppVersionFlag\"></app-update-version-modal>\r\n\t\t<!-- app平台的用户协议框 -->\r\n\t\t<app-agreement :isShow=\"isShowAppAgreement\" @confirmBtnClickFn=\"confirmBtnClickFn\"></app-agreement>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<!-- 优惠券到账提醒 模板消息 授权弹框按钮 -->\r\n\t\t<home-toast-modal-msg\r\n\t\t\tv-if=\"modalGroupWeixinTemplateMsgFlag\"\r\n\t\t\t@close=\"closeWeixinTemplateMsgFn\"\r\n\t\t></home-toast-modal-msg>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t<!-- ↓↓↓ 提示 添加到我的小程序组件 -->\r\n\t\t<home-tips></home-tips>\r\n\t\t<!-- #endif -->\r\n\r\n\t\t<!-- ↓↓↓ 首页的 首页优惠券弹框 组件 -->\r\n\t\t<home-coupon-modal\r\n\t\t\tv-if=\"modalGroupCouponFlag\"\r\n\t\t\t:set-options=\"homeCouponOptions\"\r\n\t\t\t:list=\"homeCouponList\"\r\n\t\t\t@lingqv=\"lingqvFn\"\r\n\t\t\t@close=\"closeHomeCouponModalFn\"\r\n\t\t></home-coupon-modal>\r\n\r\n\t\t<!-- ↓↓↓ 首页的 广告图弹框 组件 -->\r\n\t\t<home-ad-modal\r\n\t\t\tv-if=\"modalGroupHomeAdFlag\"\r\n\t\t\t:ad-options=\"homeAdOption\"\r\n\t\t\t@close=\"closeHomeAdModalFn\"\r\n\t\t></home-ad-modal>\r\n\r\n\t\t<!-- ↓↓↓ 弹框提示一下用户 不在配送范围内 -->\r\n\t\t<address-out-of-range-modal\r\n\t\t\tv-if=\"modalGroupNotRangeFlag\"\r\n\t\t\t@clone=\"setAddressOutOfRangeModalFlagFn(false)\"\r\n\t\t></address-out-of-range-modal>\r\n\r\n\t\t<!-- ↓↓↓ 轮播平台售卖记录组件 -->\r\n\t\t<play-buy-history :page-is-show=\"homeIsShow\" page=\"index\"></play-buy-history>\r\n\r\n\t\t<!-- ↓↓↓ page结束 -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\n// #ifdef H5\r\nimport jweixinModule from '@/tools/libs/jweixin-module.js';\r\n// #endif\r\n\r\nimport { success, error, bindMobileTips } from '@/tools/const.js';\r\n\r\nimport {\r\n\tcheckTypeFn,\r\n\ttimeStr2Arr,\r\n\tassertObject,\r\n\tassertArray,\r\n\ttransNumFn,\r\n\tcloneFn,\r\n\taddSpecFilterItemActAttrFn\r\n} from '@/tools/tools.js';\r\n\r\nimport firstScreenGjp from '@/pages/index/index-components/first-screen-gjp.vue'; // 首页的骨架屏组件\r\n\r\nimport addressOutOfRangeModal from '@/pages/index/index-components/address-out-of-range-modal.vue'; // 弹框提示一下用户 不在配送范围内\r\nimport homeNews from '@/pages/index/index-components/home-news.vue'; // 首页的 系统消息 轮播 组件\r\nimport homeTypeBtns from '@/pages/index/index-components/home-type-btns.vue'; // 首页的 分类 组件\r\nimport homeTopShowAddress from '@/pages/index/index-components/home-top-show-address.vue'; // 头部展示 当前地址组件\r\nimport homeSearch from '@/pages/index/index-components/home-search.vue'; // 搜索框组件\r\nimport homeSwiper from '@/pages/index/index-components/home-swiper.vue'; // 首页顶部轮播图\r\nimport homeTopCoupon from '@/pages/index/index-components/home-top-coupon.vue'; // 首页页面里展示优惠券组件\r\nimport homePlatformIcon from '@/pages/index/index-components/home-platform-icon.vue'; // 首页显示的平台图标 组件\r\nimport homeHotScrollGoods from '@/pages/index/index-components/home-hot-scroll-goods.vue'; // 首页的 热销排行 商品滑动 组件\r\nimport homeMiaoshaCaichang from '@/pages/index/index-components/home-miaosha-caichang.vue'; // 首页的 秒杀菜场模块 组件\r\nimport bottomGoodsClassNavBar from '@/pages/index/index-components/bottom-goods-class-nav-bar.vue'; // 首页的 底部商品分类导航条组件 组件\r\nimport bottomGoodsList from '@/pages/index/index-components/bottom-goods-list.vue'; // 首页的 底部商品列表组件 组件\r\nimport homeCouponModal from '@/pages/index/index-components/home-coupon-modal-components/home-coupon-modal.vue'; // 首页的 首页优惠券弹框 组件\r\nimport homeAdModal from '@/pages/index/index-components/home-ad-modal.vue'; // 首页的 广告图弹框 组件\r\n\r\nimport playBuyHistory from '@/df-components/global-components/play-buy-history.vue'; // 轮播平台售卖记录组件\r\n\r\n// #ifdef MP-WEIXIN\r\nimport homeToastModalMsg from '@/pages/index/index-components/home-toast-modal-msg.vue'; // 小程序里用户没有允许 发放优惠券的模板消息 弹框\r\nimport homeTips from '@/pages/index/index-components/home-tips'; // 首页提示 添加到我的小程序 组件\r\n// #endif\r\n\r\n// #ifdef APP-PLUS\r\nlet AppVersion = plus.runtime.version;\r\nimport { getVersionFn } from '@/tools/tools';\r\nimport appUpdateVersionModal from '@/pages/index/index-components/app-update-version-modal.vue'; // app 平台下版本升级的 首页弹框\r\nimport appAgreement from '@/pages/index/index-components/app-agreement.vue'; // app平台的用户协议\r\n// #endif\r\n\r\nlet statusBarHeight = uni.getSystemInfoSync().statusBarHeight, // 状态栏 高度\r\n\thomeSwiperAutoplayTimer, // 首页轮播图自动轮播\r\n\thomeNewsTimer, // 首页系统通知轮播\r\n\tsetTabBarCartNumTimer, // 购物车数量\r\n\tqqmapsdk, // 腾讯地图sdk里的对象\r\n\tloopShowModalTimer; // 循环展示弹框\r\n\r\nexport default {\r\n\tcomponents: {\r\n\t\thomeTopShowAddress,\r\n\t\thomeSearch,\r\n\t\thomeSwiper,\r\n\t\thomeTopCoupon,\r\n\t\thomePlatformIcon,\r\n\t\thomeNews,\r\n\t\thomeTypeBtns,\r\n\t\thomeHotScrollGoods,\r\n\t\thomeMiaoshaCaichang,\r\n\t\tbottomGoodsClassNavBar,\r\n\t\tbottomGoodsList,\r\n\t\thomeCouponModal,\r\n\t\thomeAdModal,\r\n\r\n\t\tfirstScreenGjp,\r\n\t\tplayBuyHistory,\r\n\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\thomeTips,\r\n\t\thomeToastModalMsg,\r\n\t\t// #endif\r\n\t\t// #ifdef APP-PLUS\r\n\t\tappUpdateVersionModal,\r\n\t\tappAgreement,\r\n\t\t// #endif\r\n\t\taddressOutOfRangeModal\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tstatusBarHeight,\r\n\t\t\thomeSwiperList: [], // 首页轮播图数据\r\n\t\t\thomeSwiperItemActive: 0, // 首页轮播图 当前索引\r\n\r\n\t\t\thomeSwiperAutoplay: false, // 首页轮播图是否自动轮播\r\n\t\t\thomeNewsAutoplay: false, // 首页系统消息轮播是否自动轮播\r\n\r\n\t\t\tfirstScreenGjpFlag: true, // 首页的骨架屏 默认显示\r\n\r\n\t\t\thomeCouponList: [], // 优惠券列表数据\r\n\t\t\thomeCouponOptions: {}, // 优惠券 相关配置\r\n\r\n\t\t\thomeTagTextList: [], // 中台提交系统标签列表数据\r\n\t\t\thomeTagTextOptions: {}, // 中台提交系统标签 相关样式配置\r\n\r\n\t\t\thomeMsgTextList: [], // 系统通知 广播轮播信息 列表\r\n\t\t\thomeMsgTextOptions: {}, // 系统通知 广播轮播信息 样式配置\r\n\t\t\thomeMenuBtnList: [], // 首页跳转到分类页面的菜单栏 按钮数据\r\n\t\t\tisShowHomeMenuTip: true, // 是否显示 首页跳转到分类页面的菜单栏 的提示\r\n\r\n\t\t\thomePageScrollGoods: [], // 首页 横向滚动商品列表数据\r\n\r\n\t\t\tmiaoshaGoodsList: [], // 秒杀模块的 商品列表数据\r\n\t\t\tcaiChangGoodsList: [], // 菜场模块 的商品列表\r\n\r\n\t\t\tbannerImageList: [], // 魔方图片数据\r\n\r\n\t\t\thomeBottomGoodsClassList: [], // 底部商品 分类列表\r\n\t\t\tnavBarListActive: 0, // 横向菜单 索引\r\n\r\n\t\t\t// 首页的商品数据\r\n\t\t\thomePageBottomGoodsList: [], // 首页底部的商品数据\r\n\t\t\tpageIndex: 1, // 底部 商品分页数\r\n\t\t\tgoodsLoading: false, // 底部商品图加载 状态 true正在加载, false不在加载\r\n\t\t\tloadMoreStatus: 'loading', // 底部商品列表 下拉状态\r\n\r\n\t\t\thomeIsShow: false, // 首页是否shou\r\n\r\n\t\t\tcurrentAddressText: '', // 展示在首页的地址文字描述文字\r\n\t\t\taddressIsAtRangeFlag: false, // 当前地址是否在配送范围内\r\n\r\n\t\t\t// 弹框相关\r\n\t\t\tisGetedAddressFlag: false, // 原生获取地址信息的弹框是否弹出了\r\n\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tmodalGroupAppVersionFlag: false, // app版本更新弹框\r\n\t\t\tisShowAppAgreement: false, // app平台的用户协议框是否展示\r\n\t\t\t// #endif\r\n\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tmodalGroupWeixinTemplateMsgFlag: false, // 微信模板消息弹框\r\n\t\t\tweixinTemplateMsgFlagCloseEd: false, // 微信模板消息弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\t\t\t// #endif\r\n\t\t\tmodalGroupCouponFlag: false, // 领取优惠券弹框\r\n\t\t\tcouponFlagCloseEd: false, // 领取优惠券弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\r\n\t\t\tmodalGroupHomeAdFlag: false, // 广告图弹框\r\n\t\t\thomeAdFlagCloseEd: false, // 广告图弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\t\t\tmodalGroupNotRangeFlag: false, // 距离提示弹框\r\n\t\t\tnotRangeFlagCloseEd: false, // 距离提示弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\r\n\t\t\t// ↑↑↑ ↓↓↓ ================================================================================================================================================================\r\n\r\n\t\t\t// ↓↓↓ 多规格相关数据 --------------------------------------------------------\r\n\t\t\tisShowGoodsSpec: false, // 是否显示多规格弹框\r\n\t\t\tgoodsSpecSelectItemList: [], // 多规格项\r\n\t\t\tgoodsSpecRowsList: {}, // 多规格 笛卡尔积项对应的 商品 信息\r\n\t\t\tcurrentGoodsName: '', // 当前弹窗多规格的商品名字\r\n\t\t\tcurrentGoodsDescription: '', // 当前弹窗多规格的商品描述\r\n\t\t\tcurrentGoodsImages: '', // 当前弹窗多规格的商品图片\r\n\t\t\tcurrentGoodsId: '', // 当前弹窗多规格的商品id\r\n\t\t\tcurrentGoodsSelectedNum: '', // 当前弹窗多规格的商品即加入到购物车里的数量\r\n\t\t\t// ↑↑↑ 多规格相关数据 --------------------------------------------------------\r\n\t\t\tloginBoxFlag: false, // 登录框显示隐藏状态\r\n\t\t\tcardNumber: 0, // 购物车数量\r\n\r\n\t\t\t// 打开app次数\r\n\t\t\topenAppCount: 0\r\n\t\t};\r\n\t},\r\n\tonReady() {\r\n\t\tlet that = this;\r\n\t\tconsole.log('onReady Run');\r\n\t\t// #ifdef H5\r\n\t\tsetTimeout(() => {\r\n\t\t\t// console.log(`uni.setNavigationBarTitle({ title: that.configInfo.shoname })`);\r\n\t\t\tuni.setNavigationBarTitle({ title: that.configInfo.shoname });\r\n\t\t}, 300);\r\n\t\t// #endif\r\n\t},\r\n\tonShow() {\r\n\t\tlet that = this;\r\n\t\tconsole.log('showFnRun');\r\n\r\n\t\t// 监听购物车数量改变\r\n\t\tuni.$off('setCardNumberFn');\r\n\t\tuni.$on('setCardNumberFn', cardNumber => {\r\n\t\t\tthat.cardNumber = cardNumber;\r\n\t\t});\r\n\r\n\t\t// 监听登录框\r\n\t\tuni.$off('setLoginBoxFlag');\r\n\t\tuni.$on('setLoginBoxFlag', loginBoxFlag => {\r\n\t\t\tthat.loginBoxFlag = loginBoxFlag;\r\n\t\t});\r\n\r\n\t\t// #ifdef H5\r\n\t\tsetTimeout(() => {\r\n\t\t\t// console.log(`uni.setNavigationBarTitle({ title: that.configInfo.shoname })`);\r\n\t\t\tuni.setNavigationBarTitle({ title: that.configInfo.shoname });\r\n\t\t}, 0);\r\n\t\tthat.jweixinModuleReadyFn();\r\n\t\t// #endif\r\n\t\tthat.homeIsShow = true;\r\n\t\tclearTimeout(homeSwiperAutoplayTimer);\r\n\t\tclearTimeout(homeNewsTimer);\r\n\t\thomeSwiperAutoplayTimer = setTimeout(() => {\r\n\t\t\tif (!that.homeSwiperAutoplay && !that.calcPageIsScrollToSwiperBottom) {\r\n\t\t\t\tthat.homeSwiperAutoplay = true;\r\n\t\t\t}\r\n\t\t}, 300);\r\n\t\thomeNewsTimer = setTimeout(() => {\r\n\t\t\tif (!that.homeNewsAutoplay) {\r\n\t\t\t\tthat.homeNewsAutoplay = true;\r\n\t\t\t}\r\n\t\t}, 300);\r\n\r\n\t\tthat.getSetHomeAddressInfoFn();\r\n\r\n\t\tclearTimeout(setTabBarCartNumTimer);\r\n\r\n\t\tclearTimeout(loopShowModalTimer);\r\n\t\tthat.loopShowModalFn();\r\n\r\n\t\tsetTabBarCartNumTimer = setTimeout(() => {\r\n\t\t\tthat.setTabBarCartNumFn();\r\n\t\t}, 400);\r\n\t\t// 监听多规格弹框事件\r\n\t\tuni.$off('popSpecBlock');\r\n\t\tuni.$on('popSpecBlock', async arg => {\r\n\t\t\tlet { goodsId, page } = arg;\r\n\r\n\t\t\tconsole.log('引用组件的页面', page);\r\n\t\t\tlet currentGoods;\r\n\r\n\t\t\tif (page == 'home-bottom-goods-list') {\r\n\t\t\t\tcurrentGoods = assertObject(\r\n\t\t\t\t\tassertArray(that.homePageBottomGoodsList.filter(item => item.goodsId == goodsId))[0]\r\n\t\t\t\t);\r\n\t\t\t} else if (page == 'home-scroll') {\r\n\t\t\t\tassertArray(that.homePageScrollGoods).forEach(item => {\r\n\t\t\t\t\tassertArray(item.goodsList).forEach(it => {\r\n\t\t\t\t\t\tif (it.goodsId == goodsId) {\r\n\t\t\t\t\t\t\tcurrentGoods = it;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t/*\r\n\r\n\t\t\tif (goodsId == that.currentGoodsId) {\r\n\t\t\t\tthat.currentGoodsSelectedNum = currentGoods.selectedNum; // 当前弹窗多规格的商品即加入到购物车里的数量\r\n\t\t\t\tthat.isShowGoodsSpec = true;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t */\r\n\t\t\tthat.currentGoodsId = goodsId;\r\n\t\t\tuni.showLoading();\r\n\r\n\t\t\tconsole.log('当前点击商品的信息currentGoods', currentGoods);\r\n\r\n\t\t\tthat.currentGoodsName = currentGoods.goodsName; // 当前弹窗多规格的商品名字\r\n\t\t\tthat.currentGoodsDescription = currentGoods.goodsDescription; // 当前弹窗多规格的商品描述\r\n\t\t\tthat.currentGoodsImages = currentGoods.goodsImage; // 当前弹窗多规格的商品图片\r\n\r\n\t\t\tthat.currentGoodsSelectedNum = currentGoods.selectedNum; // 当前弹窗多规格的商品即加入到购物车里的数量\r\n\r\n\t\t\tlet result = await that.getSpecInfoFn(that.currentGoodsId);\r\n\t\t\tif (result.type != 'success') {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\tshowCancel: false, //不显示取消按钮\r\n\t\t\t\t\ttitle: result.msg,\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\t//确认后的回调\r\n\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthat.goodsSpecSelectItemList = result.result.goodsSpecSelectItemList;\r\n\t\t\tthat.goodsSpecRowsList = result.result.goodsSpecRowsList;\r\n\r\n\t\t\tconsole.log(`${that.currentGoodsId} 商品的规格信息`, result);\r\n\r\n\t\t\tthat.isShowGoodsSpec = true;\r\n\t\t\tthat.hideAllFn();\r\n\t\t});\r\n\t},\r\n\tonUnload() {\r\n\t\tuni.$off('goodsAddCartEd_index');\r\n\t\tthis.$set(this, 'homePageBottomGoodsList', []);\r\n\t},\r\n\tonLoad(options) {\r\n\t\tlet that = this;\r\n\t\tconsole.log('首页load的options参数', options);\r\n\r\n\t\t// #ifdef APP-PLUS\r\n\t\t// app平台下 判断 是否是第一次进入app ? 弹框同意协议 : 正常进入\r\n\t\tlet openAppCountStorage = transNumFn(uni.getStorageSync('openAppCountStorage'));\r\n\t\tif (openAppCountStorage) {\r\n\t\t\tuni.setStorageSync('openAppCountStorage', openAppCountStorage + 1);\r\n\t\t\tthat.openAppCount = openAppCountStorage + 1;\r\n\t\t} else {\r\n\t\t\tuni.setStorageSync('openAppCountStorage', 1);\r\n\t\t\tthat.openAppCount = 1;\r\n\t\t}\r\n\t\tif (that.openAppCount <= 1) {\r\n\t\t\tthat.isShowAppAgreement = true;\r\n\t\t\tthat.firstScreenGjpFlag = false;\r\n\t\t} else {\r\n\t\t\tthat.isShowAppAgreement = false;\r\n\t\t}\r\n\t\tconsole.log('that.openAppCount', that.openAppCount);\r\n\t\t// #endif\r\n\t\tthat.hideAllFn();\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tuni.showShareMenu({\r\n\t\t\twithShareTicket: true,\r\n\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\r\n\t\t});\r\n\t\t// #endif\r\n\r\n\t\tif (options.shareFn) {\r\n\t\t\tthat.setSharerStrFn_btn(options);\r\n\t\t}\r\n\r\n\t\t// #ifdef MP-WEIXIN || H5 || MP-TOUTIAO\r\n\t\tthat.pageLoadFn(async () => {\r\n\t\t\t// 页面加载完获取平台的购买记录数据\r\n\t\t\tlet buyHistoryResult = await that.getBuyHistoryFn();\r\n\t\t\tif (buyHistoryResult.type == success && buyHistoryResult.result.length) {\r\n\t\t\t\tthat.$store.commit('setBuyHistoryList', buyHistoryResult.result);\r\n\t\t\t\tuni.$emit('homeLoadEndFn');\r\n\t\t\t}\r\n\t\t});\r\n\t\t// #endif\r\n\r\n\t\t// #ifdef APP-PLUS\r\n\t\tif (that.openAppCount > 1) {\r\n\t\t\tthat.pageLoadFn(async () => {\r\n\t\t\t\t// 页面加载完获取平台的购买记录数据\r\n\t\t\t\tlet buyHistoryResult = await that.getBuyHistoryFn();\r\n\t\t\t\tif (buyHistoryResult.type == success && buyHistoryResult.result.length) {\r\n\t\t\t\t\tthat.$store.commit('setBuyHistoryList', buyHistoryResult.result);\r\n\t\t\t\t\tuni.$emit('homeLoadEndFn');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t// #endif\r\n\r\n\t\t/* \r\n\t\tconsole.log('平台是否开启供应商功能 that.gongyingshang',that.gongyingshang);\r\n\t\tconsole.log('平台设置的加入购物车按钮样式',that.goodsAddCartStyle);\r\n\t\t*/\r\n\t\t// 加入购物车成功后\r\n\t\tuni.$off('goodsAddCartEd_index');\r\n\t\tuni.$on('goodsAddCartEd_index', arg => {\r\n\t\t\tlet { selectedNum, goodsId } = arg;\r\n\t\t\tconsole.log('that.homePageScrollGoods', that.homePageScrollGoods);\r\n\r\n\t\t\tthat.homePageScrollGoods.forEach(i => {\r\n\t\t\t\ti.goodsList.forEach(j => {\r\n\t\t\t\t\tif (j.goodsId == goodsId) {\r\n\t\t\t\t\t\tj.selectedNum = selectedNum;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\t\tthat.homePageBottomGoodsList.forEach(item => {\r\n\t\t\t\tif (item.goodsId == goodsId) {\r\n\t\t\t\t\titem.selectedNum = selectedNum;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t},\r\n\t// #ifdef MP-WEIXIN\r\n\t// 小程序分享首页到朋友圈带标题\r\n\tonShareTimeline() {\r\n\t\treturn {\r\n\t\t\ttitle: this.configInfo.applet_share_title\r\n\t\t};\r\n\t},\r\n\t// #endif\r\n\r\n\tonHide() {\r\n\t\tlet that = this;\r\n\t\tthat.homeIsShow = false;\r\n\t\tclearTimeout(homeSwiperAutoplayTimer);\r\n\t\tif (that.homeSwiperAutoplay) {\r\n\t\t\tthat.homeSwiperAutoplay = false;\r\n\t\t}\r\n\t\tclearTimeout(homeNewsTimer);\r\n\t\tif (that.homeNewsAutoplay) {\r\n\t\t\tthat.homeNewsAutoplay = false;\r\n\t\t}\r\n\t\tthat.hideHomeMenuTipFn();\r\n\r\n\t\tclearTimeout(loopShowModalTimer);\r\n\r\n\t\tuni.$off('popSpecBlock');\r\n\t},\r\n\t// 下拉刷新\r\n\tonPullDownRefresh() {\r\n\t\tlet that = this;\r\n\t\t// #ifdef APP-PLUS\r\n\t\tif (that.openAppCount <= 1) {\r\n\t\t\tuni.stopPullDownRefresh(); //停止下拉刷新动画\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// #endif\r\n\t\tthat.couponFlagCloseEd = false; // 领取优惠券弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\t\tthat.notRangeFlagCloseEd = false; // 距离提示弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\t\tthat.homeAdFlagCloseEd = false; // 广告图弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\r\n\t\tclearTimeout(loopShowModalTimer);\r\n\t\tthat.pageLoadFn(() => {\r\n\t\t\tuni.stopPullDownRefresh(); //停止下拉刷新动画\r\n\t\t\tthat.indexPageGetAddressInfoFn();\r\n\t\t});\r\n\t},\r\n\t// 分享首页用 微信聊天对话框分享出去\r\n\tonShareAppMessage() {\r\n\t\tlet that = this;\r\n\t\tlet options = {};\r\n\t\tif (that.configInfo.share_home) {\r\n\t\t\toptions.imageUrl = that.addimgPathHostFn(that.configInfo.share_home);\r\n\t\t}\r\n\t\tif (that.configInfo.applet_share_title) {\r\n\t\t\toptions.title = that.configInfo.applet_share_title;\r\n\t\t}\r\n\t\treturn that.shareFn({\r\n\t\t\toptions,\r\n\t\t\tpath: '/pages/index/index',\r\n\t\t\tquery: {\r\n\t\t\t\tscene: true\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\t// #ifdef APP-PLUS\r\n\t\t// app的协议框同意事件\r\n\t\tconfirmBtnClickFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tuni.setStorageSync('openAppCountStorage', 2);\r\n\t\t\tthat.openAppCount = 2;\r\n\t\t\tthat.isShowAppAgreement = false;\r\n\t\t\tthat.firstScreenGjpFlag = true;\r\n\t\t\t\r\n\t\t\tthat.pageLoadFn(async () => {\r\n\t\t\t\t// 页面加载完获取平台的购买记录数据\r\n\t\t\t\tlet buyHistoryResult = await that.getBuyHistoryFn();\r\n\t\t\t\tif (buyHistoryResult.type == success && buyHistoryResult.result.length) {\r\n\t\t\t\t\tthat.$store.commit('setBuyHistoryList', buyHistoryResult.result);\r\n\t\t\t\t\tuni.$emit('homeLoadEndFn');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// #endif\r\n\t\tasync fnn1() {\r\n\t\t\tlet that = this;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tuni.setStorageSync('token', '011665e9-ff5b-4b42-9790-788b7c85f296');\r\n\t\t\treturn false;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tlet locationInfo = await that.getLocationInfoFn();\r\n\t\t\t\r\n\t\t\tconsole.log(locationInfo);\r\n\t\t\treturn false;\r\n\t\t\t\r\n\t\t\tuni.setStorageSync('openAppCountStorage', 0);\r\n\t\t\tthat.openAppCount = 1;\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t\t\r\n\r\n\t\t\tconsole.log(that.calcZhifubaoPayAndroidApp);\r\n\t\t\treturn false;\r\n\r\n\t\t\tthat.navigateToFn({\r\n\t\t\t\turl: `/pages/order/submit-order`\r\n\t\t\t});\r\n\t\t\treturn false;\r\n\r\n\t\t\tlet s = await that.getLocationInfoFn();\r\n\t\t\tconsole.log('that.getLocationInfoFn 方法获取的地址信息', s);\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t\t// console.log('that.appenv',that.appenv,);\r\n\t\t\t// console.log('that.appleCheckOpen',that.appleCheckOpen);\r\n\t\t},\r\n\t\t// ↓↓↓ 页面网络请求层方法\r\n\t\t// 获取首屏数据 包括  首页页面头部数据 首页页面 热销排行 滑动商品数据\r\n\t\tgetIndexPageFirstScreenDataFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tPromise.all([that.getIndexPageHeaderDataFn(), that.getIndexPageHotScrollGoodsFn()]).then(\r\n\t\t\t\t\t([indexPageHeaderData, indexPageHotScrollGoods]) => {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tindexPageHeaderData,\r\n\t\t\t\t\t\t\t\tindexPageHotScrollGoods\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t\t获取首页页面头部数据\r\n\t\t\t\t轮播图-优惠券-系统设置的标签-广播通知轮播-首页跳转到其他页面的菜单按钮\r\n\t\t*/\r\n\t\tgetIndexPageHeaderDataFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: `/api/Index/index`\r\n\t\t\t\t});\r\n\t\t\t\tlet resObj = {};\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet homeHeadData = assertObject(result.data.data); // 首页 头部 部分的所有信息\r\n\r\n\t\t\t\t\t\tlet homeSwiperList = assertArray(homeHeadData.News); // 首页 轮播图列表\r\n\r\n\t\t\t\t\t\tlet homeCouponData = assertObject(homeHeadData.Coupon); // 优惠券相关数据\r\n\t\t\t\t\t\tlet homeCouponList = assertArray(homeCouponData.list); // 优惠券列表数据\r\n\r\n\t\t\t\t\t\tlet homeCouponOptionsSet = assertObject(homeCouponData.set); // 优惠券 配置信息 (设置颜色...)\r\n\r\n\t\t\t\t\t\tlet homeCouponOptions = {\r\n\t\t\t\t\t\t\t// 优惠券 相关配置\r\n\t\t\t\t\t\t\ttitle: homeCouponData.title, // 优惠券 标题文字\r\n\t\t\t\t\t\t\tshow_type: homeCouponData.show_type, // 优惠券的显示方式 1：页面显示  2：弹框显示\r\n\t\t\t\t\t\t\tcoupon_popout_color: homeCouponOptionsSet.coupon_popout_color, // 弹框背景颜色\r\n\t\t\t\t\t\t\tcoupon_popout_but_color: homeCouponOptionsSet.coupon_popout_but_color, // 弹框按钮背景颜色\r\n\t\t\t\t\t\t\tcoupon_popout_but_text_color: homeCouponOptionsSet.coupon_popout_but_text_color, // 弹框按钮字体颜色\r\n\t\t\t\t\t\t\tcoupon_popout_text_color: homeCouponOptionsSet.coupon_popout_text_color, // 弹框字体颜色\r\n\t\t\t\t\t\t\tcoupon_popout_money_text_color: homeCouponOptionsSet.coupon_popout_money_text_color, // 弹框金额字体颜色\r\n\t\t\t\t\t\t\tcoupon_popout_money_color: homeCouponOptionsSet.coupon_popout_money_color, // 弹框金额背景颜色\r\n\t\t\t\t\t\t\tcoupon_popout_title_color: homeCouponOptionsSet.coupon_popout_title_color, // 弹框标题背景颜色\r\n\t\t\t\t\t\t\tcoupon_popout_title_text_color: homeCouponOptionsSet.coupon_popout_title_text_color // 弹框标题字体颜色\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tlet homeTagTextData = assertObject(homeHeadData.Tag); // 中台提交系统标签数据\r\n\t\t\t\t\t\tlet homeTagTextList = assertArray(homeTagTextData.list); // 中台提交系统标签列表数据\r\n\t\t\t\t\t\tlet homeTagTextOptions = assertObject(homeTagTextData.set); // 中台提交系统标签 相关样式配置\r\n\r\n\t\t\t\t\t\tlet homeMsgTextData = assertObject(homeHeadData.Notice); // 系统通知 广播轮播相关数据\r\n\t\t\t\t\t\tlet homeMsgTextList = assertArray(homeMsgTextData.list); // 系统通知 广播轮播信息 列表\r\n\t\t\t\t\t\tlet homeMsgTextOptions = assertObject(homeMsgTextData.set); // 系统通知 广播轮播信息 样式配置\r\n\r\n\t\t\t\t\t\tlet homeMenuBtnList = assertArray(homeHeadData.iconNavi); // 首页跳转到分类页面的菜单栏 按钮数据\r\n\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\thomeSwiperList, // 首页 轮播图列表\r\n\t\t\t\t\t\t\t\thomeCouponList, // 优惠券列表数据\r\n\t\t\t\t\t\t\t\thomeCouponOptions, // 优惠券 相关配置\r\n\r\n\t\t\t\t\t\t\t\thomeTagTextList, // 中台提交系统标签列表数据\r\n\t\t\t\t\t\t\t\thomeTagTextOptions, // 中台提交系统标签 相关样式配置\r\n\r\n\t\t\t\t\t\t\t\thomeMsgTextList, // 系统通知 广播轮播信息 列表\r\n\t\t\t\t\t\t\t\thomeMsgTextOptions, // 系统通知 广播轮播信息 样式配置\r\n\t\t\t\t\t\t\t\thomeMenuBtnList // 首页跳转到分类页面的菜单栏 按钮数据\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resObj);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 获取首页页面 热销排行 滑动商品数据\r\n\t\tgetIndexPageHotScrollGoodsFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: `/api/Index/GoodsType`\r\n\t\t\t\t});\r\n\t\t\t\tlet resObj = {};\r\n\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet homeScrollGoodsInfoObj = assertObject(result.data.data); // 首页的 横向滚动 商品 数据\r\n\t\t\t\t\t\tlet homeScrollGoodsList = assertArray(homeScrollGoodsInfoObj.list); //  首页 横向滚动商品列表数据\r\n\t\t\t\t\t\thomeScrollGoodsList.forEach(item => {\r\n\t\t\t\t\t\t\t// item.goods_list = assertArray(item.goods_list);\r\n\r\n\t\t\t\t\t\t\tlet cloneGoodsList = cloneFn(assertArray(item.goods_list));\r\n\t\t\t\t\t\t\titem.goodsList = cloneGoodsList.map(item => {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tgoodsId: item.goods_id, // 商品id\r\n\t\t\t\t\t\t\t\t\tgoodsImage: item.image, // 商品图片\r\n\t\t\t\t\t\t\t\t\tisHot: item.is_hot == 1, // 是否热销爆款\r\n\t\t\t\t\t\t\t\t\tisNew: item.is_new == 1, // 是否新品\r\n\t\t\t\t\t\t\t\t\tgoodsName: item.goods_name, // 商品名字\r\n\t\t\t\t\t\t\t\t\tisVipPrice: item.is_vip_price == 1, // 是否会员专享\r\n\t\t\t\t\t\t\t\t\tgoodsPrice: item.shop_price, // 商品价格\r\n\t\t\t\t\t\t\t\t\tvipPrice: item.vip_market_price, // vip专享价\r\n\t\t\t\t\t\t\t\t\tlinePrice: item.vip_market_price, // 划线价\r\n\t\t\t\t\t\t\t\t\tgoodsTag: item.activity, // 商品标签\r\n\t\t\t\t\t\t\t\t\tselectedNum: transNumFn(item.selectedNum), // 加入到购物车里的数量\r\n\t\t\t\t\t\t\t\t\tisSpec: item.is_guige == 1, // 商品是否多规格\r\n\t\t\t\t\t\t\t\t\ttagImg: item.top_left_tag_img // 商品左上的图片标签\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t 判断背景格式\r\n\t\t\t\t\t\t\t\t\t1：使用系统主题颜色\r\n\t\t\t\t\t\t\t\t\t2：使用background_color字段颜色\r\n\t\t\t\t\t\t\t\t\t3：使用background_icon字段背景图\r\n\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\tif (item.is_background == 1) {\r\n\t\t\t\t\t\t\t\titem.bgType = 'color';\r\n\t\t\t\t\t\t\t\titem.bgContent = that.configInfo.web_site_color;\r\n\t\t\t\t\t\t\t} else if (item.is_background == 2) {\r\n\t\t\t\t\t\t\t\titem.bgStyleType = 'color';\r\n\t\t\t\t\t\t\t\titem.bgContent = item.background_color;\r\n\t\t\t\t\t\t\t} else if (item.is_background == 3) {\r\n\t\t\t\t\t\t\t\titem.bgType = 'image';\r\n\t\t\t\t\t\t\t\titem.bgContent = item.background_icon;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\titem.titleText = item.name; // 主标题\r\n\t\t\t\t\t\t\titem.subTitleText = item.brief; // 副标题\r\n\t\t\t\t\t\t\titem.titleIcon = item.icon; // 标题前的icon图标\r\n\t\t\t\t\t\t\titem.titleColor = item.text_color ? item.text_color : that.configInfo.web_site_text_color; // 标题文字的颜色\r\n\t\t\t\t\t\t\titem.isShowMoreBtn = item.is_more_btn == 1; // 是否显示加载更多按钮\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: homeScrollGoodsList.map(item => {\r\n\t\t\t\t\t\t\t\t// 首页 横向滚动商品列表数据\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tgoodsList: item.goodsList,\r\n\t\t\t\t\t\t\t\t\tbgType: item.bgType,\r\n\t\t\t\t\t\t\t\t\tbgContent: item.bgContent,\r\n\t\t\t\t\t\t\t\t\ttitleText: item.titleText,\r\n\t\t\t\t\t\t\t\t\tsubTitleText: item.subTitleText,\r\n\t\t\t\t\t\t\t\t\ttitleIcon: item.titleIcon,\r\n\t\t\t\t\t\t\t\t\ttitleColor: item.titleColor,\r\n\t\t\t\t\t\t\t\t\tisShowMoreBtn: item.isShowMoreBtn,\r\n\t\t\t\t\t\t\t\t\tid: item.id\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resObj);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 菜场 和 秒杀相关的数据\r\n\t\tgetIndexPageCaichangMiaoshaoFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: `/api/Index/RobFoodmarket`\r\n\t\t\t\t});\r\n\t\t\t\tlet resObj = {};\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet homeCaiChangMiaoShaObj = assertObject(result.data.data); // 菜场 和 秒杀相关的数据\r\n\r\n\t\t\t\t\t\tlet miaoshaObj = assertObject(homeCaiChangMiaoShaObj.Rob); // 秒杀的数据\r\n\t\t\t\t\t\tlet miaoshaGoodsList = assertArray(miaoshaObj.list); // 秒杀模块展示的商品列表\r\n\t\t\t\t\t\tlet miaoshaOptions = {\r\n\t\t\t\t\t\t\t// 秒杀模块 相关配置\r\n\r\n\t\t\t\t\t\t\tmiaoshaStartTime: miaoshaObj.start_time, // 开始时间\r\n\t\t\t\t\t\t\tmiaoshaEndTime: miaoshaObj.end_time, // 结束时间\r\n\t\t\t\t\t\t\tmiaoshaHomeBgColor: miaoshaObj.rob_hm_color || that.configInfo.web_site_color, // 今日秒杀首页推荐背景颜色\r\n\t\t\t\t\t\t\tmiaoshaListPageBgColor: miaoshaObj.rob_list_color || that.configInfo.web_site_color // 今日秒杀列表背景色\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t今日秒杀商品列表 背景图设置规则\r\n\t\t\t\t\t\t\t\t如果没有背景图 就用 rob_list_color字段背景颜色用\r\n\t\t\t\t\t\t\t\t如果没有背景颜色就用系统设置背景颜色\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\tif (miaoshaObj.rob_list_img) {\r\n\t\t\t\t\t\t\tmiaoshaOptions.miaoshaListPageBgImage = miaoshaObj.rob_list_img;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmiaoshaOptions.miaoshaListPageBgImage = null;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tlet caiChangObj = assertObject(homeCaiChangMiaoShaObj.Foodmarket); // 菜场 相关的数据\r\n\r\n\t\t\t\t\t\tlet caiChangGoodsList = assertArray(caiChangObj.list); // 菜场模块展示的商品列表\r\n\r\n\t\t\t\t\t\tlet caiChangOptions = {\r\n\t\t\t\t\t\t\t// 菜场 模块 相关配置\r\n\t\t\t\t\t\t\tcaichangTitleText: caiChangObj.vege_name, // 菜场模块标题文字\r\n\t\t\t\t\t\t\tcaichangSubTitleText: caiChangObj.title, // 菜场模块副标题文字\r\n\t\t\t\t\t\t\tcaichangListPageTitleBarTextColor: caiChangObj.vege_text_color, // 菜场页面 的 滑动模块标题栏的文字颜色\r\n\t\t\t\t\t\t\tcaichangListPageTitleBarBgColor: caiChangObj.vege_color, // 菜场页面 的 滑动模块标题栏的文字背景颜色\r\n\t\t\t\t\t\t\tcaichangHomeBgColor: caiChangObj.vege_hm_color // 菜场模块背景颜色\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\tmiaoshaGoodsList, // 秒杀模块 展示的商品列表\r\n\t\t\t\t\t\t\t\tmiaoshaOptions, // 秒杀模块 相关样式配置\r\n\t\t\t\t\t\t\t\tcaiChangGoodsList, // 菜场模块 展示的商品列表\r\n\t\t\t\t\t\t\t\tcaiChangOptions // 菜场模块 相关样式配置\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resObj);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取首页页面 魔方图片 数据\r\n\t\tgetIndexPageMofangTupianFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: `/api/Index/getIndexPicture`\r\n\t\t\t\t});\r\n\r\n\t\t\t\tlet resObj = {};\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tfunction sortBy(field) {\r\n\t\t\t\t\t\t\treturn function(a, b) {\r\n\t\t\t\t\t\t\t\treturn a[field] - b[field];\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet resultArr = assertArray(result.data.data)\r\n\t\t\t\t\t\t\t.filter(item => item.is_show - 0)\r\n\t\t\t\t\t\t\t.map(item => {\r\n\t\t\t\t\t\t\t\tlet list = assertArray(assertObject(item).content).map(item => {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\ttype: transNumFn(item.jump_type),\r\n\t\t\t\t\t\t\t\t\t\tcontent: item.path,\r\n\t\t\t\t\t\t\t\t\t\timage: that.addimgPathHostFn(item.image)\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tsort: item.sort,\r\n\t\t\t\t\t\t\t\t\tstyleId: transNumFn(item.style_id),\r\n\t\t\t\t\t\t\t\t\tlist\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.sort(sortBy('sort'))\r\n\t\t\t\t\t\t\t.reverse();\r\n\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tresult: resultArr\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resObj);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 获取首页页面 底部商品 数据\r\n\t\tgetIndexPageBottomGoodsFn(pageIndex, goodsTypeId) {\r\n\t\t\tlet that = this,\r\n\t\t\t\tdata = {};\r\n\t\t\tif (pageIndex) {\r\n\t\t\t\tdata.page = pageIndex;\r\n\t\t\t} else {\r\n\t\t\t\tdata.page = 1;\r\n\t\t\t}\r\n\t\t\tif (goodsTypeId) {\r\n\t\t\t\tdata.guideId = goodsTypeId;\r\n\t\t\t}\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: `/api/Index/GuideGoods`,\r\n\t\t\t\t\tdata\r\n\t\t\t\t});\r\n\t\t\t\tlet resObj = {};\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet homeBottomGoodsData = assertObject(result.data.data); // 底部商品 滑动菜单栏 和 菜单相对应的 商品列表数据\r\n\r\n\t\t\t\t\t\tlet homeBottomGoodsClassList = assertArray(homeBottomGoodsData.guide); // 底部商品 分类列表\r\n\r\n\t\t\t\t\t\tlet goodsList = assertArray(homeBottomGoodsData.goods).map(item => {\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tgoodsId: item.goods_id, // 商品id\r\n\t\t\t\t\t\t\t\tgoodsImage: item.image, // 商品图片\r\n\t\t\t\t\t\t\t\tisHot: item.is_hot == 1, // 是否热销爆款\r\n\t\t\t\t\t\t\t\tisNew: item.is_new == 1, // 是否新品\r\n\t\t\t\t\t\t\t\tgoodsName: item.goods_name, // 商品名称\r\n\t\t\t\t\t\t\t\tgoodsDescription: item.goods_remark, // 商品描述\r\n\t\t\t\t\t\t\t\tgoodsTag: item.activity, // 商品标签文字\r\n\t\t\t\t\t\t\t\tisVipPrice: item.is_vip_price == 1, // 是否会员专享\r\n\t\t\t\t\t\t\t\tgoodsPrice: item.shop_price, // 商品价格\r\n\t\t\t\t\t\t\t\tvipPrice: item.vip_market_price, // 会员价\r\n\t\t\t\t\t\t\t\tlinePrice: item.vip_market_price, // 划线价\r\n\t\t\t\t\t\t\t\tselectedNum: item.selectedNum, // 已经添加到购物车的数量\r\n\t\t\t\t\t\t\t\tisSpec: item.is_guige == 1, // 商品是否多规格\r\n\t\t\t\t\t\t\t\ttagImg: item.top_left_tag_img, // 商品左上的图片标签\r\n\t\t\t\t\t\t\t\tgysMdId: transNumFn(item.supp_id), // 供应商门店id\r\n\t\t\t\t\t\t\t\tgysMdName: item.dp_name // 供应商门店名字\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet homeBottomGoodsList = goodsList; // 当前分类下的 商品列表\r\n\r\n\t\t\t\t\t\tconsole.log('首页底部的商品列表数据', homeBottomGoodsList);\r\n\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\t\thomeBottomGoodsClassList, // 底部商品 分类列表\r\n\t\t\t\t\t\t\t\thomeBottomGoodsList // 当前分类下的 商品列表\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresObj = {\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resObj);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 当前坐标的文字描述 和 是否在配送范围内\r\n\t\tcurrentAddressInfoFn(locationInfo) {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(resFn => {\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tthat.getCurrentAddressInfo(locationInfo),\r\n\t\t\t\t\tthat.checkRangeFn(`${locationInfo.longitude},${locationInfo.latitude}`)\r\n\t\t\t\t]).then(([currentAddressTextResult, checkRangeResult]) => {\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\tresult: {\r\n\t\t\t\t\t\t\tcurrentAddressTextResult,\r\n\t\t\t\t\t\t\tcheckRangeResult\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\t// 获取 手动发送优惠券模板ID列表 首页弹框用户授权这个模板id列表\r\n\t\tgetIndexPageCouponTemplateIdListFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async (resFn, rejFn) => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\turl: '/api/Pay/hand_send_coupon'\r\n\t\t\t\t});\r\n\t\t\t\tlet resultObj = {};\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet templateIdList = assertArray(result.data.data)\r\n\t\t\t\t\t\t\t.filter(item => item.mini_status == 1)\r\n\t\t\t\t\t\t\t.map(item => item.mini_template_id);\r\n\t\t\t\t\t\tresultObj = {\r\n\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\tmsg: '成功',\r\n\t\t\t\t\t\t\tresult: templateIdList\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresultObj = {\r\n\t\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult: result\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresultObj = {\r\n\t\t\t\t\t\ttype: 'error',\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tresFn(resultObj);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// ↑↑↑ 页面网络请求层方法\r\n\r\n\t\t// ↓↓↓ 页面方法调用层方法\r\n\r\n\t\t// 页面打开第一次加载 or 登录成功后的回调 or 下拉刷新会触发\r\n\t\tasync pageLoadFn(fn) {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.hideAllFn();\r\n\r\n\t\t\t// ↓↓↓ 首屏数据\r\n\r\n\t\t\t// 1. 轮播图 优惠券 系统设置的标签 广播通知 轮播 首页跳转到其他页面的菜单按钮\r\n\t\t\t// 2. 热销排行榜 滑动数据\r\n\t\t\tlet indexPageFirstScreenDataResult = await that.getIndexPageFirstScreenDataFn();\r\n\t\t\t/*\r\n\t\t\tconsole.log(\r\n\t\t\t\t'JSON.stringify(indexPageFirstScreenDataResult)',\r\n\t\t\t\tJSON.stringify(indexPageFirstScreenDataResult),\r\n\t\t\t\tindexPageFirstScreenDataResult\r\n\t\t\t);\r\n\t\t\t */\r\n\r\n\t\t\tlet { indexPageHeaderData, indexPageHotScrollGoods } = indexPageFirstScreenDataResult.result;\r\n\r\n\t\t\tif (indexPageHeaderData.type == success) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\thomeSwiperList,\r\n\t\t\t\t\thomeCouponList,\r\n\t\t\t\t\thomeCouponOptions,\r\n\r\n\t\t\t\t\thomeTagTextList,\r\n\t\t\t\t\thomeTagTextOptions,\r\n\r\n\t\t\t\t\thomeMsgTextList,\r\n\t\t\t\t\thomeMsgTextOptions,\r\n\t\t\t\t\thomeMenuBtnList\r\n\t\t\t\t} = indexPageHeaderData.result;\r\n\r\n\t\t\t\tthat.homeSwiperList = homeSwiperList;\r\n\t\t\t\tthat.homeCouponList = homeCouponList;\r\n\t\t\t\tthat.homeCouponOptions = homeCouponOptions;\r\n\t\t\t\tthat.homeTagTextList = homeTagTextList;\r\n\t\t\t\tthat.homeTagTextOptions = homeTagTextOptions;\r\n\t\t\t\tthat.homeMsgTextList = homeMsgTextList;\r\n\t\t\t\tthat.homeMsgTextOptions = homeMsgTextOptions;\r\n\t\t\t\tthat.homeMenuBtnList = homeMenuBtnList;\r\n\r\n\t\t\t\t/* \r\n\t\t\t\t\t优惠券以前领取过 并且 是刚登陆 优惠券弹框还是显示状态 这时把优惠券弹框隐藏掉\r\n\t\t\t\t*/\r\n\t\t\t\tif (that.homeCouponList.length <= 0 && that.modalGroupCouponFlag) {\r\n\t\t\t\t\tthat.modalGroupCouponFlag = false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthat.firstScreenGjpFlag = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (indexPageHotScrollGoods.type == success) {\r\n\t\t\t\tthat.homePageScrollGoods = indexPageHotScrollGoods.result;\r\n\t\t\t} else {\r\n\t\t\t\tthat.firstScreenGjpFlag = false;\r\n\t\t\t}\r\n\t\t\tif (that.firstScreenGjpFlag) {\r\n\t\t\t\tthat.firstScreenGjpFlag = false;\r\n\t\t\t}\r\n\r\n\t\t\t// ↑↑↑ 首屏数据\r\n\t\t\t// ↓↓↓ 非首屏数据\r\n\t\t\t// 菜场秒杀\r\n\t\t\tlet indexPageCaichangMiaoshaoResult = await that.getIndexPageCaichangMiaoshaoFn();\r\n\t\t\tif (indexPageCaichangMiaoshaoResult.type == success) {\r\n\t\t\t\tlet {\r\n\t\t\t\t\tmiaoshaGoodsList, // 秒杀模块 展示的商品列表\r\n\t\t\t\t\tmiaoshaOptions, // 秒杀模块 相关样式配置\r\n\t\t\t\t\tcaiChangGoodsList, // 菜场模块 展示的商品列表\r\n\t\t\t\t\tcaiChangOptions // 菜场模块 相关样式配置\r\n\t\t\t\t} = indexPageCaichangMiaoshaoResult.result;\r\n\r\n\t\t\t\tthat.miaoshaGoodsList = miaoshaGoodsList; // 秒杀模块的 商品列表数据\r\n\t\t\t\tthat.$store.commit('setMiaoshaOptions', miaoshaOptions);\r\n\t\t\t\tthat.caiChangGoodsList = caiChangGoodsList; // 菜场模块 的商品列表\r\n\t\t\t\tthat.$store.commit('setCaiChangOptions', caiChangOptions);\r\n\r\n\t\t\t\tconsole.log('miaoshaOptions', miaoshaOptions);\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageCaichangMiaoshaoResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// 魔方图片\r\n\t\t\tlet indexPageMofangTupianResult = await that.getIndexPageMofangTupianFn();\r\n\t\t\tconsole.log('魔方图片数据 indexPageMofangTupianResult', indexPageMofangTupianResult);\r\n\t\t\tif (indexPageMofangTupianResult.type == success) {\r\n\t\t\t\tthat.bannerImageList = indexPageMofangTupianResult.result;\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageMofangTupianResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// 底部商品\r\n\t\t\tlet indexPageBottomGoodsResult = await that.getIndexPageBottomGoodsFn(1);\r\n\t\t\tif (indexPageBottomGoodsResult.type == success) {\r\n\t\t\t\tthat.navBarListActive = 0; // 横向菜单 索引\r\n\t\t\t\tthat.homeBottomGoodsClassList = indexPageBottomGoodsResult.result.homeBottomGoodsClassList;\r\n\t\t\t\tthat.homePageBottomGoodsList = indexPageBottomGoodsResult.result.homeBottomGoodsList;\r\n\r\n\t\t\t\tif (that.homePageBottomGoodsList.length) {\r\n\t\t\t\t\tthat.loadMoreStatus = 'more';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.loadMoreStatus = 'noMore';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageBottomGoodsResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t// 获取小程序里首页的模板消息列表\r\n\t\t\tlet indexPageCouponTemplateIdListResult = await that.getIndexPageCouponTemplateIdListFn();\r\n\r\n\t\t\tif (indexPageCouponTemplateIdListResult.type == success) {\r\n\t\t\t\tlet indexPageCouponTemplateIdList = indexPageCouponTemplateIdListResult.result;\r\n\r\n\t\t\t\tthat.$store.commit('setHomeTemplateIdList', indexPageCouponTemplateIdList);\r\n\r\n\t\t\t\tif (indexPageCouponTemplateIdList.length) {\r\n\t\t\t\t\t// 首页的模板消息 是否被同意过\r\n\t\t\t\t\tlet homeSetingFalgResult = await that.homeTempIdListIsConfirm(indexPageCouponTemplateIdList);\r\n\r\n\t\t\t\t\tif (homeSetingFalgResult.type == 'success') {\r\n\t\t\t\t\t\tthat.$store.commit('setHomeTemplateIdSettingFlag', true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.$store.commit('setHomeTemplateIdSettingFlag', false);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//\r\n\t\t\t\t\tlet isUserCloneMsgFlag = await that.isUserCloneMsg(indexPageCouponTemplateIdList);\r\n\r\n\t\t\t\t\tif (isUserCloneMsgFlag.type == 'success') {\r\n\t\t\t\t\t\tthat.$store.commit('setIsUserCloneFlag', true);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.$store.commit('setIsUserCloneFlag', false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageCouponTemplateIdListResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\r\n\t\t\tfn && fn();\r\n\r\n\t\t\tlet indexAddressInfo = assertObject(uni.getStorageSync('indexAddressInfo'));\r\n\r\n\t\t\t// 是否有首页地址信息 true有;  false没有\r\n\t\t\tlet isHasAddressInfo = checkTypeFn(indexAddressInfo) == 'Object' && Object.keys(indexAddressInfo).length;\r\n\t\t\tif (!isHasAddressInfo) {\r\n\t\t\t\tthat.indexPageGetAddressInfoFn(() => {\r\n\t\t\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\t\t\tthat.loopShowModalFn();\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthat.currentAddressText = indexAddressInfo.currentAddressText;\r\n\t\t\t\tthat.addressIsAtRangeFlag = indexAddressInfo.addressIsAtRangeFlag;\r\n\t\t\t\tthat.isGetedAddressFlag = true;\r\n\t\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\t\tthat.loopShowModalFn();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 分类商品组滑动到右边 隐藏 漂浮的提示\r\n\t\thideHomeMenuTipFn() {\r\n\t\t\tthis.isShowHomeMenuTip = false;\r\n\t\t},\r\n\t\t// 底部的商品分类滑动导航点击\r\n\t\tchangeNavBarFn(e) {\r\n\t\t\tthis.navBarListActive = e.index;\r\n\t\t\tthis.navBarListClickFn(e.index, e.item);\r\n\t\t},\r\n\t\t// 底部的商品分类滑动导航点击后请求当前分类商品数据\r\n\t\tasync navBarListClickFn(index, item) {\r\n\t\t\tlet that = this;\r\n\r\n\t\t\tthat.goodsLoading = true;\r\n\r\n\t\t\tthat.pageIndex = 1;\r\n\t\t\tlet indexPageBottomGoodsResult = await that.getIndexPageBottomGoodsFn(that.pageIndex, item.id);\r\n\r\n\t\t\tif (indexPageBottomGoodsResult.type == success) {\r\n\t\t\t\tthat.homePageBottomGoodsList = indexPageBottomGoodsResult.result.homeBottomGoodsList;\r\n\t\t\t\tif (that.homePageBottomGoodsList.length) {\r\n\t\t\t\t\tthat.loadMoreStatus = 'more';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.loadMoreStatus = 'noMore';\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageBottomGoodsResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthat.goodsLoading = false;\r\n\t\t\tthat.$nextTick(() => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tvar query = uni.createSelectorQuery().in(that);\r\n\t\t\t\t\tquery\r\n\t\t\t\t\t\t.selectAll('.bottom-shop-list-getdom')\r\n\t\t\t\t\t\t.boundingClientRect(rect => {\r\n\t\t\t\t\t\t\tlet topVal = transNumFn(assertObject(assertArray(rect)[0]).top);\r\n\r\n\t\t\t\t\t\t\tlet pageTo = that.mixinScrollTop + topVal - (88 + statusBarHeight + that.rpxTopxFn(128));\r\n\r\n\t\t\t\t\t\t\tconsole.log('$nextTick Run', pageTo);\r\n\r\n\t\t\t\t\t\t\tconsole.log('bottom-shop-list dom元素位置信息', rect, rect[0].top);\r\n\r\n\t\t\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\t\t\tscrollTop: pageTo,\r\n\t\t\t\t\t\t\t\tduration: 100\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.exec();\r\n\t\t\t\t}, 10);\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 展示优惠券类型是在顶部页面时 领取优惠券成功\r\n\t\tgetCouponSuccess(item) {\r\n\t\t\tlet it = cloneFn(item.item);\r\n\t\t\tit.isGet = true;\r\n\t\t\tthis.$set(this.homeCouponList, item.index, it);\r\n\t\t},\r\n\t\t// 首页加载地址信息\r\n\t\tasync indexPageGetAddressInfoFn(fn) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet locationInfo = await that.getLocationInfoFn();\r\n\t\t\tthat.isGetedAddressFlag = true;\r\n\r\n\t\t\tif (locationInfo.type == success) {\r\n\t\t\t\tlet { latitude, longitude } = locationInfo.result;\r\n\r\n\t\t\t\tlet {\r\n\t\t\t\t\tresult: { currentAddressTextResult, checkRangeResult }\r\n\t\t\t\t} = await that.currentAddressInfoFn({ latitude, longitude });\r\n\r\n\t\t\t\tconsole.log('当前坐标的文字描述 和 是否在配送范围内 currentAddressInfoResult', {\r\n\t\t\t\t\tcurrentAddressTextResult,\r\n\t\t\t\t\tcheckRangeResult\r\n\t\t\t\t});\r\n\t\t\t\tthat.addressIsAtRangeFlag = checkRangeResult.type == success;\r\n\r\n\t\t\t\tif (currentAddressTextResult.type == success) {\r\n\t\t\t\t\tthat.currentAddressText = currentAddressTextResult.result.address;\r\n\r\n\t\t\t\t\tlet indexAddressInfo = {\r\n\t\t\t\t\t\tlatitude: latitude,\r\n\t\t\t\t\t\tlongitude: longitude,\r\n\t\t\t\t\t\tcurrentAddressText: that.currentAddressText,\r\n\t\t\t\t\t\taddressIsAtRangeFlag: that.addressIsAtRangeFlag\r\n\t\t\t\t\t};\r\n\t\t\t\t\tconsole.log('indexAddressInfo 数据', indexAddressInfo);\r\n\r\n\t\t\t\t\tuni.setStorageSync('indexAddressInfo', indexAddressInfo);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.hideAllFn();\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: currentAddressTextResult.msg\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfn && fn();\r\n\t\t\t} else {\r\n\t\t\t\tthat.navigateToFn({\r\n\t\t\t\t\turl: `/packageA/set-address-page/index?page=index`\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tconsole.log('在首页获取位置信息locationInfo', locationInfo);\r\n\t\t},\r\n\t\t// 循环调用显示当前的所有弹框函数\r\n\t\tloopShowModalFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tclearTimeout(loopShowModalTimer);\r\n\r\n\t\t\tloopShowModalTimer = setTimeout(() => {\r\n\t\t\t\tif (that.isGetedAddressFlag) {\r\n\t\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t\t// 处理 app版本更新弹框\r\n\t\t\t\t\tlet currentVersion = getVersionFn(AppVersion);\r\n\t\t\t\t\tlet newVersion = getVersionFn(that.configInfo.versionNum);\r\n\t\t\t\t\tif (that.configInfo.app_download_url && newVersion > currentVersion) {\r\n\t\t\t\t\t\tif (that.modalGroupAppVersionFlag) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// 有下载链接 并且 线上版本要比现在使用的高\r\n\t\t\t\t\t\tthat.modalGroupAppVersionFlag = true; // app 平台的更新最新版本的弹框\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.modalGroupAppVersionFlag = false; // app 平台的更新最新版本的弹框\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\t\t/*\r\n\r\n\t\t\t\t\tconsole.log(\r\n\t\t\t\t\t\t`系统允许弹框 ${that.globalMainSwitch} '\\n'\r\n\t\t\t\t\t\t首页的 模板id列表 ${that.homeTemplateIdList}  '\\n'\r\n\t\t\t\t\t\t运行模板消息时 没有 勾选 \"允许通知并不再提示\"  ${!that.homeTemplateIdSettingFlag} '\\n'`\r\n\t\t\t\t\t);\r\n\t\t\t\t\t */\r\n\r\n\t\t\t\t\t// 处理 引导用户允许 发送模板消息弹框\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthat.globalMainSwitch && // 系统允许弹框\r\n\t\t\t\t\t\tthat.homeTemplateIdList && // 首页的 模板id列表 不是空\r\n\t\t\t\t\t\t!that.homeTemplateIdSettingFlag && // 运行模板消息时 没有 勾选 \"允许通知并不再提示\"\r\n\t\t\t\t\t\t!that.weixinTemplateMsgFlagCloseEd // 是否被用户关闭过了 (关闭过就不弹了  )\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif (that.modalGroupWeixinTemplateMsgFlag) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.modalGroupWeixinTemplateMsgFlag = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.modalGroupWeixinTemplateMsgFlag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// #endif\r\n\r\n\t\t\t\t\t// 处理 距离提示弹框\r\n\t\t\t\t\tif (!that.addressIsAtRangeFlag && !that.notRangeFlagCloseEd) {\r\n\t\t\t\t\t\tif (that.modalGroupNotRangeFlag) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.modalGroupNotRangeFlag = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.modalGroupNotRangeFlag = false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 处理间隔xxxx时间内不再弹出\r\n\t\t\t\t\tlet newDate = +new Date();\r\n\t\t\t\t\tlet loopShowModalFlag = uni.getStorageSync('loopShowModalFlag');\r\n\t\t\t\t\tif (loopShowModalFlag) {\r\n\t\t\t\t\t\tif (newDate - loopShowModalFlag > 1800000) {\r\n\t\t\t\t\t\t\t// if (newDate - loopShowModalFlag > 1000 * 60) {\r\n\t\t\t\t\t\t\tuni.setStorageSync('loopShowModalFlag', newDate);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (newDate - loopShowModalFlag > 5 * 1000) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.setStorageSync('loopShowModalFlag', newDate);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// 处理 领取优惠券弹框\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\tthat.homeCouponList.length &&\r\n\t\t\t\t\t\tthat.homeCouponOptions.show_type == 2 &&\r\n\t\t\t\t\t\t!that.couponFlagCloseEd\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tif (that.modalGroupCouponFlag) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.modalGroupCouponFlag = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.modalGroupCouponFlag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 处理平台首页广告图\r\n\t\t\t\t\tif (that.homeAdOption && !that.homeAdFlagCloseEd) {\r\n\t\t\t\t\t\tif (that.modalGroupHomeAdFlag) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.modalGroupHomeAdFlag = true;\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.modalGroupHomeAdFlag = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 1000);\r\n\t\t},\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\t// 关闭引导用户允许 发送模板消息弹框\r\n\t\tcloseWeixinTemplateMsgFn() {\r\n\t\t\tthis.modalGroupWeixinTemplateMsgFlag = false;\r\n\t\t\tthis.weixinTemplateMsgFlagCloseEd = true;\r\n\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\tthis.loopShowModalFn();\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// 关闭首页 领取优惠券弹框\r\n\t\tcloseHomeCouponModalFn() {\r\n\t\t\tthis.modalGroupCouponFlag = false;\r\n\t\t\tthis.couponFlagCloseEd = true; // 领取优惠券弹框 是否被用户关闭过了 ( 关闭过就不弹了  )\r\n\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\tthis.loopShowModalFn();\r\n\t\t},\r\n\t\t// 关闭首页 广告图弹框\r\n\t\tcloseHomeAdModalFn() {\r\n\t\t\tthis.modalGroupHomeAdFlag = false;\r\n\t\t\tthis.homeAdFlagCloseEd = true;\r\n\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\tthis.loopShowModalFn();\r\n\t\t},\r\n\t\t// 领取 优惠券\r\n\t\tasync lingqvFn(e) {\r\n\t\t\tlet that = this;\r\n\t\t\tif (!that.isLogin) {\r\n\t\t\t\tthat.closeGlobalLoginFn(true);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// 未绑定手机号不能操作以下功能\r\n\t\t\tif (!that.isRunBindMobileFunc) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: bindMobileTips,\r\n\t\t\t\t\tsuccess(e) {\r\n\t\t\t\t\t\te.confirm && that.navigateToFn({ url: `/packageA/tel-login/user-info` });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tlet idList = that.homeCouponList\r\n\t\t\t\t.map(item => {\r\n\t\t\t\t\treturn item.id;\r\n\t\t\t\t})\r\n\t\t\t\t.join(',');\r\n\r\n\t\t\tlet result = await that.$request({\r\n\t\t\t\tloading: true,\r\n\t\t\t\tmethod: 'post',\r\n\t\t\t\turl: '/api/User/GetCoupon',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tcouponIds: idList\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(result, '领取优惠券结果');\r\n\r\n\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: result.data.msg\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: that.$errorMsg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthat.closeHomeCouponModalFn();\r\n\t\t},\r\n\r\n\t\t// ↑↑↑ 页面方法调用层方法\r\n\t\t// 选择地址页面 设置好后 首页展示出来\r\n\t\tasync getSetHomeAddressInfoFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet indexAddressInfo = assertObject(uni.getStorageSync('indexAddressInfo'));\r\n\t\t\tconsole.log('indexAddressInfo', indexAddressInfo);\r\n\t\t\t// 是否有首页地址信息 true有;  false没有\r\n\t\t\tlet isHasAddressInfo = checkTypeFn(indexAddressInfo) == 'Object' && Object.keys(indexAddressInfo).length;\r\n\r\n\t\t\tif (isHasAddressInfo && indexAddressInfo.reset) {\r\n\t\t\t\tthat.currentAddressText = indexAddressInfo.currentAddressText;\r\n\t\t\t\tthat.addressIsAtRangeFlag = indexAddressInfo.addressIsAtRangeFlag;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t//↓↓轮播图切换事件 切换 底部 表示点\r\n\t\tswiperChangeFn(e) {\r\n\t\t\tthis.homeSwiperItemActive = e.current;\r\n\t\t\t// console.log('轮播图切换事件触发 当前索引', this.homeSwiperItemActive);\r\n\t\t},\r\n\r\n\t\t// 上拉触底 加载更多\r\n\t\tasync onReachBottom() {\r\n\t\t\tlet that = this;\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tif (that.openAppCount <= 1) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t\tthat.loadMoreStatus = 'loading';\r\n\t\t\tthat.pageIndex++;\r\n\t\t\tlet { id: typeId } = assertObject(that.homeBottomGoodsClassList[that.navBarListActive]);\r\n\r\n\t\t\tlet args = [that.pageIndex];\r\n\t\t\tif (typeId) {\r\n\t\t\t\targs.push(typeId);\r\n\t\t\t}\r\n\t\t\tlet indexPageBottomGoodsResult = await that.getIndexPageBottomGoodsFn(...args);\r\n\t\t\tif (indexPageBottomGoodsResult.type == success) {\r\n\t\t\t\tif (indexPageBottomGoodsResult.result.homeBottomGoodsList.length) {\r\n\t\t\t\t\tthat.loadMoreStatus = 'more';\r\n\t\t\t\t\tthat.homePageBottomGoodsList = that.homePageBottomGoodsList.concat(\r\n\t\t\t\t\t\tindexPageBottomGoodsResult.result.homeBottomGoodsList\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.loadMoreStatus = 'noMore';\r\n\t\t\t\t\tthat.pageIndex--;\r\n\t\t\t\t\tif (that.pageIndex <= 1) {\r\n\t\t\t\t\t\tthat.pageIndex == 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: indexPageBottomGoodsResult.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 登录后回调\r\n\t\trefreshFn() {\r\n\t\t\tthis.pageLoadFn();\r\n\t\t\tthis.setTabBarCartNumFn();\r\n\t\t},\r\n\r\n\t\t// ↓↓↓ 多规格相关方法 --------------------------------------------------------\r\n\t\t// 设置规格框的显示隐藏\r\n\t\tsetGoodsSpec(bool) {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.isShowGoodsSpec = bool;\r\n\t\t\tif (!bool) {\r\n\t\t\t\tthat.goodsSpecSelectItemList = addSpecFilterItemActAttrFn(cloneFn(that.goodsSpecSelectItemList));\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 选择规格项 改变展示 状态\r\n\t\tsetSpecFilterItemActiveFn(arg) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet { index, specFilterIndex } = arg;\r\n\r\n\t\t\tconsole.log('外部列表修改', index, specFilterIndex);\r\n\r\n\t\t\tlet goodsSpecSelectItemList = cloneFn(that.goodsSpecSelectItemList);\r\n\r\n\t\t\tgoodsSpecSelectItemList.forEach((item, inde) => {\r\n\t\t\t\tif (inde == index) {\r\n\t\t\t\t\titem.item.forEach((it, inx) => {\r\n\t\t\t\t\t\tif (inx == specFilterIndex) {\r\n\t\t\t\t\t\t\tit.active = true;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tit.active = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthat.goodsSpecSelectItemList = goodsSpecSelectItemList;\r\n\t\t},\r\n\t\t// ↑↑↑ 多规格相关方法 --------------------------------------------------------\r\n\r\n\t\tsetAddressOutOfRangeModalFlagFn(flag) {\r\n\t\t\tthis.modalGroupNotRangeFlag = flag;\r\n\t\t\tif (!flag) {\r\n\t\t\t\tthis.notRangeFlagCloseEd = true;\r\n\t\t\t\tclearTimeout(loopShowModalTimer);\r\n\t\t\t\tthis.loopShowModalFn();\r\n\t\t\t}\r\n\t\t\t// console.log('that.addressOutOfRangeModalFlag', this.addressOutOfRangeModalFlag);\r\n\t\t},\r\n\r\n\t\t// #ifdef H5\r\n\t\t// 微信公众号sdk分享\r\n\t\tasync jweixinModuleReadyFn() {\r\n\t\t\tlet that = this;\r\n\t\t\tconsole.log('jweixinModuleReadyFn run', that.isWeixn());\r\n\t\t\tif (!that.isWeixn()) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tlet result = await that.getGzhSignPackageFn();\r\n\t\t\tconsole.log('that.getGzhSignPackageFn', result);\r\n\t\t\tif (result.type == success) {\r\n\t\t\t\tlet jweixin = result.result;\r\n\t\t\t\tjweixinModule.ready(function() {\r\n\t\t\t\t\tconsole.log('jweixinModule.ready', updateAppMessageShareDataOptions);\r\n\r\n\t\t\t\t\tlet updateAppMessageShareDataOptions = {\r\n\t\t\t\t\t\tsuccess() {\r\n\t\t\t\t\t\t\tconsole.log('success', e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (that.configInfo.share_home) {\r\n\t\t\t\t\t\tupdateAppMessageShareDataOptions.imgUrl = that.addimgPathHostFn(that.configInfo.share_home);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (that.configInfo.applet_share_title) {\r\n\t\t\t\t\t\tupdateAppMessageShareDataOptions.desc = that.configInfo.applet_share_title;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdateAppMessageShareDataOptions.title = document.title;\r\n\r\n\t\t\t\t\tlet shareUrlStr = `${location.origin}${location.pathname}${location.hash}`;\r\n\t\t\t\t\tif (that.isLogin) {\r\n\t\t\t\t\t\tif (shareUrlStr.includes('?')) {\r\n\t\t\t\t\t\t\tshareUrlStr += `&shareFn=true&scene=${that.userInfoEncrypt}`;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tshareUrlStr += `?shareFn=true&scene=${that.userInfoEncrypt}`;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupdateAppMessageShareDataOptions.link = shareUrlStr;\r\n\r\n\t\t\t\t\tconsole.log('updateAppMessageShareDataOptions', updateAppMessageShareDataOptions);\r\n\r\n\t\t\t\t\tjweixinModule.updateAppMessageShareData(updateAppMessageShareDataOptions);\r\n\t\t\t\t\tjweixinModule.updateTimelineShareData(updateAppMessageShareDataOptions);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjweixinModule.error(function(e) {\r\n\t\t\t\t\tconsole.log('jweixinModule.error', e);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tjweixinModule.config({\r\n\t\t\t\t\t// debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。\r\n\t\t\t\t\tappId: jweixin.appId, // 必填，公众号的唯一标识\r\n\t\t\t\t\ttimestamp: jweixin.timestamp, // 必填，生成签名的时间戳\r\n\t\t\t\t\tnonceStr: jweixin.nonceStr, // 必填，生成签名的随机串\r\n\t\t\t\t\tsignature: jweixin.signature, // 必填，签名\r\n\t\t\t\t\tjsApiList: ['updateAppMessageShareData', 'updateTimelineShareData'], // 必填，需要使用的JS接口列表\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log('jweixinModule.config res', res);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthat.hideAllFn();\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\ttitle: e.msg\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// 获取购买记录数据\r\n\t\tgetBuyHistoryFn() {\r\n\t\t\tlet that = this;\r\n\t\t\treturn new Promise(async resFn => {\r\n\t\t\t\tlet result = await that.$request({\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\turl: '/api/Index/order_notify_switch'\r\n\t\t\t\t});\r\n\t\t\t\tif (result.statusCode == 200) {\r\n\t\t\t\t\tif (result.data.code == 200) {\r\n\t\t\t\t\t\tlet resultObject = assertObject(result.data.data);\r\n\t\t\t\t\t\tlet list = assertArray(resultObject.list).map((item, index) => {\r\n\t\t\t\t\t\t\tif (item.headimgurl && item.nickname) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\theadimgurl: that.addimgPathHostFn(item.headimgurl),\r\n\t\t\t\t\t\t\t\t\tmsg: `${item.nickname}刚刚下单啦`\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\theadimgurl: that.calcImageSrc('/eat/my-user-image.png'),\r\n\t\t\t\t\t\t\t\tmsg: `匿名用户-${index}刚刚下单啦`\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: success,\r\n\t\t\t\t\t\t\tmsg: '获取数据成功',\r\n\t\t\t\t\t\t\tresult: list\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tresFn({\r\n\t\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\t\tmsg: result.data.msg,\r\n\t\t\t\t\t\t\tresult\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tresFn({\r\n\t\t\t\t\t\ttype: error,\r\n\t\t\t\t\t\tmsg: that.$errorMsg,\r\n\t\t\t\t\t\tresult\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}, //<---- methods 结束\r\n\tcomputed: {\r\n\t\t// 返回当前轮播图的背景颜色\r\n\t\thomeSwiperBgColor() {\r\n\t\t\tif (this.homeSwiperList.length) {\r\n\t\t\t\tlet color = this.homeSwiperList[this.homeSwiperItemActive].color;\r\n\t\t\t\treturn color ? color : this.configInfo.web_site_color;\r\n\t\t\t}\r\n\t\t\treturn this.configInfo.web_site_color;\r\n\t\t},\r\n\t\t// 当前页面滚动是否到轮播图下面了\r\n\t\tcalcPageIsScrollToSwiperBottom() {\r\n\t\t\tif (this.homeSwiperList.length) {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\treturn this.mixinScrollTop > 131;\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef MP-WEIXIN || APP-PLUS || MP-TOUTIAO\r\n\t\t\t\treturn this.mixinScrollTop > 175;\r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t\treturn this.mixinScrollTop > 30;\r\n\t\t},\r\n\t\t// 返回顶部头部背景颜色\r\n\t\tcalcTopHeadBgColor() {\r\n\t\t\tif (this.calcPageIsScrollToSwiperBottom) {\r\n\t\t\t\treturn this.configInfo.web_site_color;\r\n\t\t\t}\r\n\t\t\treturn this.homeSwiperBgColor;\r\n\t\t},\r\n\t\ttabCurrent() {\r\n\t\t\tfor (let i = 0; i < this.MenuList.length; i++) {\r\n\t\t\t\tif (this.MenuList[i].field == 'h') {\r\n\t\t\t\t\treturn i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\t// 首页的弹框广告配置\r\n\t\thomeAdOption() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet AdOption = assertObject(assertObject(this.configInfo).advertising);\r\n\t\t\tif (Object.keys(AdOption).length) {\r\n\t\t\t\tAdOption.image = that.addimgPathHostFn(AdOption.image);\r\n\t\t\t\treturn AdOption;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttop() {\r\n\t\t\tlet that = this,\r\n\t\t\t\ttop;\r\n\t\t\t// #ifdef APP-PLUS || MP-WEIXIN || MP-TOUTIAO\r\n\t\t\ttop = 88 + that.statusBarHeight - that.rpxTopxFn(10);\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\ttop = 44 + that.statusBarHeight - that.rpxTopxFn(10);\r\n\t\t\t// #endif\r\n\t\t\treturn `${top}px`;\r\n\t\t},\r\n\t\t...mapState({\r\n\t\t\thomeTemplateIdList: state => state.homeTemplateIdList, // 首页 模板消息 数组\r\n\t\t\thomeTemplateIdSettingFlag: state => state.homeTemplateIdSettingFlag, // 首页模板消息id 是否被永久 允许了\r\n\t\t\tglobalMainSwitch: state => state.globalMainSwitch, // 小程序设置里 允许发送发送模板消息的 设置\r\n\t\t\tdefaultHomeToastModalStatus: state => state.defaultHomeToastModalStatus, //  默认首页 弹出 确认 权限的 模态框\r\n\t\t\tisUserCloneFlag: state => state.isUserCloneFlag //  是否是 用户 手动关闭的\r\n\t\t})\r\n\t}, // ↑↑↑↑↑ computed 结束\r\n\twatch: {\r\n\t\tcalcPageIsScrollToSwiperBottom(newVal, oldVal) {\r\n\t\t\tthis.homeSwiperAutoplay = !newVal;\r\n\t\t\tconsole.log(\r\n\t\t\t\t'watch -> calcPageIsScrollToSwiperBottom',\r\n\t\t\t\t`新赋的值 ${newVal}`,\r\n\t\t\t\t`之前的值 ${oldVal}`,\r\n\t\t\t\t`轮播图是否自动轮播 this.homeSwiperAutoplay ${this.homeSwiperAutoplay}`\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.all-components {\r\n\tbackground: #f5f5f5;\r\n\tpadding-top: 8rpx;\r\n}\r\n.home-search-wrap {\r\n\tposition: sticky;\r\n\tz-index: 50;\r\n\theight: 44px;\r\n}\r\n.nav-bar-list-wrap {\r\n\theight: 128rpx;\r\n\tposition: -webkit-sticky;\r\n\tposition: sticky;\r\n\tz-index: 49;\r\n\tborder-bottom: 1px solid #ffffff;\r\n}\r\n</style>\r\n","import mod from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX.2.6.9.20200403\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1675502567052\n      var cssReload = require(\"E:/HBuilderX.2.6.9.20200403/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}